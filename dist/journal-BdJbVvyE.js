import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as t}from"./esm-shims-BDPl6Msv.js";import{got_default as n}from"./got-BaOFZRd4.js";import r from"node:path";const i=`https://ieeexplore.ieee.org`,a={name:`IEEE Journal Articles`,maintainers:[`HenryQW`],categories:[`journal`],path:`/journal/:punumber/:earlyAccess?`,parameters:{punumber:"Publication Number, look for `punumber` in the URL",earlyAccess:`Optional, set any value to get early access articles`},example:`/ieee/journal/6287639/preprint`,handler:o};async function o(n){let a=n.req.param(`punumber`),o=!!n.req.param(`earlyAccess`),u=await s(a),{displayTitle:d,currentIssue:f,preprintIssue:p,coverImagePath:m}=u,{issueNumber:h,volume:g}=o?p:f,_=await c(a,h),v=_.records.map(n=>{let i=l(g)(n);return i.description=e(r.join(t,`templates/description-e509e615.art`),{item:i}),i});return{title:d,link:`${i}/xpl/tocresult.jsp?isnumber=${h}`,item:v,image:`${i}${m}`}}async function s(e){let t=await n(`${i}/rest/publication/home/metadata?pubid=${e}`);return t.data}async function c(e,t){let r=await n.post(`${i}/rest/search/pub/${e}/issue/${t}/toc`,{json:{punumber:e,isnumber:t,rowsPerPage:`100`}});return r.data}function l(e){return t=>({abstract:t.abstract||``,authors:t.authors?t.authors.map(e=>e.preferredName).join(`; `):``,description:``,doi:t.doi,link:t.htmlLink,title:t.articleTitle||``,volume:e})}export{a as route};
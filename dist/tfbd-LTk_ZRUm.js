import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import{timezone as a}from"./timezone-BrxBCotj.js";import o from"node:path";import{load as s}from"cheerio";const c=`http://tfbd.ccf.org.cn`,l=(e,t)=>`http://tfbd.ccf.org.cn/tfbd/${e}/${t}/`,u=e=>t(o.join(r,`templates/description-a3d04f77.art`),{desc:e}),d=(e,t)=>t.tryGet(e.link,async()=>{let t=await i(e.link),n=s(t.data);return e.description=n(`div.articleCon`).html(),e}),f=e=>{let t=s(e),r=t(`div.file-list div.article-item`),i=r.toArray().map(e=>{let r=t(e),i={title:r.find(`h3 a[href]`).text().trim(),link:c+r.find(`h3 a[href]`).attr(`href`),pubDate:a(n(r.find(`p`).text().trim(),`YYYY-MM-DD`),8)};return i});return i};var p={BASE:c,urlBase:l,fetchAllArticles:f,detailPage:d,renderDesc:u};const m={path:`/tfbd/:caty/:id`,categories:[`study`],example:`/ccf/tfbd/xwdt/tzgg`,parameters:{caty:`主分类，可在 URL 找到`,id:`子分类，可在 URL 找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`tfbd.ccf.org.cn/tfbd/:caty/:id`,`tfbd.ccf.org.cn/`]}],name:`大数据专家委员会`,maintainers:[`tudou027`],handler:h};async function h(t){let n=p.urlBase(t.req.param(`caty`),t.req.param(`id`)),r=await i(n),a=p.fetchAllArticles(r.data),o=s(r.data),c=await Promise.all(a.map(t=>p.detailPage(t,e)));return t.set(`json`,{info:a}),{title:`大数据专家委员会 - `+o(`.position a:last-child`).text(),link:n,item:c}}export{m as route};
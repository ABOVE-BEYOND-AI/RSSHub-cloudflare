import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import{timezone as i}from"./timezone-BrxBCotj.js";import a from"node:path";import{load as o}from"cheerio";const s=`https://www.yicai.com`,c=async(o,c)=>{let u=await r({method:`get`,url:o}),d=u.data.map(r=>({title:r.NewsTitle,link:r.url.startsWith(`http`)?r.url:`${s}${r.AppID===0?`/vip`:``}${r.url}`,author:r.NewsAuthor||r.NewsSource||r.CreaterName,pubDate:i(t(r.CreateDate),8),category:[r.ChannelName],description:e(a.join(n,`templates/description-55895928.art`),{image:{src:r.originPic,alt:r.NewsTitle},video:{src:r.VideoUrl,type:r.VideoUrl?.split(/\./).pop()??void 0},intro:r.NewsNotes})}));return Promise.all(l(d,c))};function l(e,n){return e.map(e=>n(e.link,async()=>{let n=await r({method:`get`,url:e.link}),i=o(n.data);if(!e.pubDate){let n=i(`script[src='/js/alert.min.js']`).next().text()||i(`title`).next().text(),r=new Map(JSON.parse(n.match(/_pb = (\[.*?]);/)[1].replaceAll(`'`,`"`)));e.pubDate=t(`${r.get(`actime`)}:00`)}return i(`h1`).remove(),i(`.u-btn6, .m-smallshare, .topic-hot`).remove(),e.description=(e.description??``)+(i(`.multiText, #multi-text, .txt`).html()??``),e}))}export{c as ProcessItems,l as fetchFullArticles,s as rootUrl};
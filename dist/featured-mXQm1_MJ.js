import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as t}from"./esm-shims-BDPl6Msv.js";import{got_default as n}from"./got-BaOFZRd4.js";import r from"node:path";import{load as i}from"cheerio";const a={today:`left`,newest:`right`},o={path:`/featured/:category?`,categories:[`other`],example:`/tvtropes/featured/today`,parameters:{category:`Category, see below, Today's Featured Trope by default`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Featured`,maintainers:[`nczitzk`],handler:s,description:`| Today's Featured Trope | Newest Trope |
| ---------------------- | ------------ |
| today                  | newest       |`};async function s(o){let{category:s=`today`}=o.req.param(),c=`https://tvtropes.org`,{data:l}=await n(c),u=i(l),d=u(`div#featured-tropes div.${a[s]}`),f=new URL(d.find(`h2.entry-title a`).prop(`href`),c).href,{data:p}=await n(f),m=i(p);m(`div.folderlabel`).remove(),m(`div.lazy_load_img_box`).each((n,i)=>{i=m(i);let a=i.find(`img`);i.replaceWith(e(r.join(t,`templates/description-be2da49d.art`),{images:[{src:a.prop(`src`),alt:a.prop(`alt`),width:a.prop(`width`),height:a.prop(`height`)}]}))});let h=[{title:d.find(`h2.entry-title`).text(),link:f,description:m(`div#main-article`).html()}],g=new URL(u(`img.logo-big`).prop(`src`),c).href,_=u(`link[rel="shortcut icon"]`).prop(`href`);return{item:h,title:`${u(`title`).text()} - ${d.find(`span.box-title`).text()}`,link:c,description:u(`meta[name="description"]`).prop(`content`),language:u(`html`).prop(`lang`),image:g,icon:_,logo:_,subtitle:u(`meta[property="og:title"]`).prop(`content`),author:u(`meta[property="og:site_name"]`).prop(`content`),allowEmpty:!0}}export{o as route};
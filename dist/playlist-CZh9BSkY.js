import{config as e}from"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as t}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";const a={path:`/music/playlist/:id`,categories:[`multimedia`],example:`/163/music/playlist/35798529`,parameters:{id:`歌单 id, 可在歌单页 URL 中找到`},features:{requireConfig:[{name:`NCM_COOKIES`,optional:!0,description:"网易云音乐登陆后的 cookie 值，可在浏览器控制台通过`document.cookie`获取。"}],requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`歌单歌曲`,maintainers:[`DIYgod`],handler:o};async function o(a){let o=a.req.param(`id`),s=await r.get(`https://music.163.com/api/v3/playlist/detail?id=${o}`,{headers:{Referer:`https://music.163.com/`,Cookie:e.ncm.cookies}}),c=s.data.playlist,l=await r(`https://music.163.com/api/song/detail`,{headers:{Referer:`https://music.163.com`},searchParams:{ids:`[${c.trackIds.slice(0,201).map(e=>e.id)}]`}}),u=l.data.songs;return{title:c.name,link:`https://music.163.com/#/playlist?id=${o}`,description:`网易云音乐歌单 - ${c.name}`,item:c.trackIds.slice(0,201).map(e=>{let r=u.find(t=>t.id===e.id),a=r.artists.length===1?r.artists[0].name:r.artists.reduce((e,t)=>(e.name||e)+`/`+t.name);return{title:`${r.name} - ${a}`,description:t(i.join(n,`templates/playlist-a7669f99.art`),{singer:a,album:r.album.name,date:new Date(r.album.publishTime).toLocaleDateString(),picUrl:r.album.picUrl}),link:`https://music.163.com/song?id=${e.id}`,guid:`https://music.163.com/#/song?id=${e.id}`,pubDate:new Date(e.at),author:a}})}}export{a as route};
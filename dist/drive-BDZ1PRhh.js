import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{ofetch_default as n}from"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{invalid_parameter_default as i}from"./invalid-parameter-CfUmvEUg.js";import a from"node:path";const o={path:`/drive/:selName`,categories:[`program-update`],example:`/lenovo/drive/PF3WRD2G`,parameters:{selName:`产品序列号`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`lenovo.com.cn`],target:`/drive/:selName`}],name:`驱动`,maintainers:[`cscnk52`],handler:s};async function s(o){let s=o.req.param(`selName`),c=`https://newsupport.lenovo.com.cn/api/drive/drive_listnew?searchKey=${s}`,l=await n(c);if(l.statusCode!==200)throw new i(`无效序列号, 请检查你的序列号是否正确.`);let u=l.data.partList.flatMap(e=>e.drivelist),d=u.map(n=>({title:`${n.DriverName} ${n.Version}`,link:`https://newsupport.lenovo.com.cn/driveDownloads_detail.html?driveId=${n.DriverEdtionId}`,description:e(a.join(r,`templates/drive-2802e117.art`),{driveName:n.DriverName,driveCode:n.DriverCode,driveVersion:n.Version,downloadFileName:n.FileName,downloadFilePath:n.FilePath}),pubDate:t(n.CreateTime,8)}));return{title:`${l.data.driverSerious[0].NodeCode} 驱动`,item:d,language:`zh-CN`}}export{s as handler,o as route};
import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s=e=>{let n=o(e),i=n(`h2`).first().text(),s=n(`h2.author`).first().text(),c=n(`.desc`).first().text(),l=n(`img.cover__backcover`).attr(`src`),u=n(`img.cover__backcover`).attr(`alt`);return l||(l=n(`img.img-responsive`).attr(`data-src`),u=n(`img.img-responsive`).attr(`alt`)),t(a.join(r,`templates/book-e2535a5a.art`),{title:i,author:s,description:c,imageSrc:l,imageAlt:u})},c=e=>{let t=e(`script`).toArray().find(e=>{let t=e.children[0];return!t||!t.data?!1:t.data.includes(`post_date`)});if(t.length===0)return;let r=t.children[0].data.match(/(?<="post_date":").*?(?=")/);if(r)return n(r[0])},l=e=>{let t=o(e),n=t(`h2.read-down-text`).first().html(),r=``;return t(`.awesome-list>li`).map((e,t)=>{let n=s(t);return r+=n,n}),{description:n,content:r,pubDate:c(t)}},u=e=>{let n=o(e),i=n(`h2.hdr-smalltxt`).first().html(),s=n(`div.img-block>img`).first().attr(`src`),l=n(`div.img-block>img`).first().attr(`alt`),u=``,d=t(a.join(r,`templates/articleHeader-7457abf4.art`),{description:i,imageSrc:s,imageAlt:l});return n(`div.main-content>p,div.main-content>ul`).map((e,t)=>{let n=o(t);return u+=n.html(),n}),{description:d,content:u,pubDate:c(n)}},d=(t,n,r)=>Promise.all(t.map(t=>e.tryGet(t.url,async()=>{let e=await i(t.url),n=e.data,a=r(n),o={title:t.title,description:a.description+`<br>`+a.content,pubDate:a.pubDate,link:t.url};return o})));var f={parseList:d,parseBooks:l,parseArticle:u};export{f as utils_default};
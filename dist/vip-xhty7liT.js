import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s={path:`/open/vip`,categories:[`study`],example:`/163/open/vip`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`vip.open.163.com/`]}],name:`精品课程`,maintainers:[`hoilc`],handler:c,url:`vip.open.163.com/`};async function c(){let s=`https://vip.open.163.com`,c=await i(s),l=o(c.data),u=JSON.parse(l(`script`).text().match(/window\.__INITIAL_STATE__=(.*);\(function\(\){var/)[1]),d=Object.values(u.courseindex.myModules).flatMap(e=>e.contents.map(t=>({title:`${t.title} - ${t.subtitle}`,author:t.authorName,pubDate:n(t.publishTime,`x`),link:`${s}/courses/${t.courseUid}/`,courseUid:t.courseUid,category:e.name}))),f=await Promise.all(d.map(n=>e.tryGet(n.link,async()=>{let{data:{data:e}}=await i.post(`${s}/open/trade/pc/course/getCourseInfo.do`,{form:{courseUid:n.courseUid,version:1}}),c=o(e.courseInfo.description,null,!1);return c(`img`).each((e,t)=>{t.attribs.src=t.attribs.src.split(`?`)[0],delete t.attribs.width}),n.category=[n.category,e.courseInfo.firstClassifyName,e.courseInfo.secondClassifyName],n.description=t(a.join(r,`templates/open-c69043c4.art`),{data:e,description:c.html()}),n})));return{title:`网易公开课 - 精品课程`,link:s,item:f}}export{s as route};
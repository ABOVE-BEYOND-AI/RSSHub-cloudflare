import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s=async s=>{let{language:c=`zh`}=s.req.param(),l=s.req.query(`limit`)?Number.parseInt(s.req.query(`limit`),10):30,u=`https://${c===`zh`?`www`:c.replaceAll(/[^\dA-Za-z-]/g,``)}.zhonglun.com`,d=new URL(`research/articles`,u).href,{data:f}=await i(d),p=o(f),m=p(`div#dataList > dl > dd, div#dataList > ul > li`).slice(0,l).toArray().map(e=>{e=p(e);let i=t(a.join(r,`templates/description-ca64252b.art`),{intro:e.find(`p`).text()});return{title:e.find(`h3 > a`).text(),description:i,pubDate:n(e.find(`span`).text()),link:e.find(`h3 > a`).prop(`href`),language:c}});m=await Promise.all(m.map(s=>e.tryGet(s.link,async()=>{let{data:e}=await i(s.link),l=o(e),u=l(`div.news_dtitle h2`).text(),d=s.description+t(a.join(r,`templates/description-ca64252b.art`),{description:l(`div.edit_con_original`).html()}),f=l(`img.raw-image`).first().prop(`src`);return s.title=u,s.description=d,s.pubDate=n(l(`span.posttime`).text()),s.author=l(`span.author`).text().split(/：/).pop(),s.content={html:d,text:l(`div.edit_con_original`).text()},s.image=f,s.banner=f,s.language=c,s})));let h=new URL(p(`header.header h1 a img`).prop(`src`),u).href;return{title:`${p(`title`).text()} - ${p(`div.siteban_text`).text()}`,description:p(`meta[name="description"]`).prop(`content`),link:d,item:m,allowEmpty:!0,image:h,author:p(`meta[name="author"]`).prop(`content`),language:c}},c={path:`/research/article/:language{[a-zA-Z0-9-]+}?`,name:`中伦研究专业文章`,url:`zhonglun.com`,maintainers:[`nczitzk`],handler:s,example:`/zhonglun/research/article/zh`,parameters:{category:`语言，默认为 zh，即简体中文，可在对应分类页 URL 中找到`},description:`
| ENG | 简体中文 | 日本語 | 한국어 |
| --- | -------- | ------ | ------ |
| en  | zh       | ja     | kr     |
    `,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{title:`专业文章`,source:[`zhonglun.com/research/articles`],target:`/research/article/zh`},{title:` Articles`,source:[`en.zhonglun.com/research/articles`],target:`/research/article/en`},{title:`論評`,source:[`ja.zhonglun.com/research/articles`],target:`/research/article/ja`},{title:`전문기사`,source:[`kr.zhonglun.com/research/articles`],target:`/research/article/kr`}]};export{s as handler,c as route};
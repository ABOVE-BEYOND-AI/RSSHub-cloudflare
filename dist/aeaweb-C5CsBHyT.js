import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s={path:`/:id`,categories:[`journal`],example:`/aeaweb/aer`,parameters:{id:`Journal id, can be found in URL`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!0},radar:[{source:[`aeaweb.org/journals/:id`,`aeaweb.org/`]}],name:`Journal`,maintainers:[`nczitzk`],handler:c,description:"The URL of the journal [American Economic Review](https://www.aeaweb.org/journals/aer) is `https://www.aeaweb.org/journals/aer`, where `aer` is the id of the journal, so the route for this journal is `/aeaweb/aer`.\n\n::: tip\n  More jounals can be found in [AEA Journals](https://www.aeaweb.org/journals).\n:::"};async function c(s){let c=s.req.param(`id`),l=`https://www.aeaweb.org`,u=`${l}/journals/${c}`,d=await i({method:`get`,url:u}),f=o(d.data);f(`.read-more`).remove(),c=f(`input[name="journal"]`).attr(`value`);let p=f(`.page-title`).text(),m=f(`.intro-copy`).text(),h=`${l}/journals/search-results?journal=${c}&ArticleSearch[current]=1`;d=await i({method:`get`,url:h}),f=o(d.data);let g=f(`h4.title a`).toArray().map(e=>(e=f(e),{link:`${l}${e.attr(`href`).split(`&`)[0]}`}));return g=await Promise.all(g.map(s=>e.tryGet(s.link,async()=>{let e=await i({method:`get`,url:s.link}),c=o(e.data);return s.doi=c(`meta[name="citation_doi"]`).attr(`content`),s.guid=s.doi,s.title=c(`meta[name="citation_title"]`).attr(`content`),s.author=c(`.author`).toArray().map(e=>c(e).text().trim()).join(`, `),s.pubDate=n(c(`meta[name="citation_publication_date"]`).attr(`content`),`YYYY/MM`),s.description=t(a.join(r,`templates/description-384bc71e.art`),{description:c(`meta[name="twitter:description"]`).attr(`content`).replace(/\(\w+ \d+\)( - )?/,``)}),s}))),{title:p,description:m,link:u,item:g,language:f(`html`).attr(`lang`)}}export{s as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{art as e}from"./render-DE4LRFBD.js";import{ofetch_default as t}from"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{ViewType as r}from"./types-D9T3SQ-7.js";import i from"node:path";import{load as a}from"cheerio";const o=async r=>{let o=Number.parseInt(r.req.query(`limit`)??`50`,10),s=`https://coolbuy.com`,c=new URL(`api/v1.4/product_preview`,s).href,l=await t(c,{query:{order_by:`-id`,limit:o,page:0,offset:0}}),u=await t(s),d=a(u),f=d(`html`).attr(`lang`)??`zh`,p=l.objects.slice(0,o).map(t=>{let r=t.title,a=t.cover_image?.split(/\?/)?.[0],o=t.display_image?.split(/\?/)?.[0],c=e(i.join(n,`templates/description-63ae3544.art`),{summary:t.summary,price:t.price,original_price:t.original_price,highest_price:t.highest_price,highest_original_price:t.highest_original_price,images:[o,a].filter(Boolean).map(e=>({src:e,alt:r}))}),l=t.visit_url,u=`coolbuy-${t.id}#${t.price}`,d={title:r,description:c,link:l??new URL(t.id,s).href,guid:u,id:u,content:{html:c,text:c},image:a,banner:a,language:f};return d});return{title:d(`title`).text(),description:d(`meta[property="og:description"]`).attr(`content`),link:s,item:p,allowEmpty:!0,image:new URL(`static/coolbuy/packages/dongguan/dist/images/97be46f6.png`,`https://mcache.ifanr.cn`).href,language:f,id:s}},s={path:`/`,name:`产品`,url:`coolbuy.com`,maintainers:[`nczitzk`],handler:o,example:`/coolbuy`,parameters:void 0,description:void 0,categories:[`shopping`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`coolbuy.com`],target:`/`}],view:r.Articles};export{o as handler,s as route};
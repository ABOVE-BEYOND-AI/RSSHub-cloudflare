import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import{timezone as i}from"./timezone-BrxBCotj.js";import a from"node:path";import{load as o}from"cheerio";import s from"iconv-lite";const c=`https://www.56kog.com`,l=async(l,u,d)=>{let{data:f}=await r(u,{responseType:`buffer`}),p=o(s.decode(f,`gbk`)),m=p(`p.line`).toArray().map(e=>{e=p(e);let t=e.find(`a`);return{title:t.text(),link:new URL(t.prop(`href`),c).href,author:e.find(`span`).last().text()}});m=await Promise.all(m.map(l=>d(l.link,async()=>{try{let{data:u}=await r(l.link,{responseType:`buffer`}),d=o(s.decode(u,`gbk`)),f=d(`div.mohe-content p`).toArray().map(e=>{e=d(e);let t=e.find(`a`);return{label:e.find(`span.c-l-depths`).text().split(/：/)[0],value:t.length===0?d(e.contents().toArray().find(e=>e.nodeType===3)).text().trim():{href:new URL(t.first().prop(`href`),c).href,text:t.first().text().trim()}}}),p=f.find(e=>e.label===`更新`).value;l.title=d(`h1`).contents().first().text(),l.description=e(a.join(n,`templates/description-81e40009.art`),{images:[{src:new URL(d(`a.mohe-imgs img`).prop(`src`),c).href,alt:l.title}],details:f}),l.author=f.find(e=>e.label===`作者`).value,l.category=[f.find(e=>e.label===`状态`).value,f.find(e=>e.label===`类型`).value.text].filter(Boolean),l.guid=`56kog-${l.link.match(/\/(\d+)\.html$/)[1]}#${p}`,l.pubDate=i(t(p),8)}catch{}return l})));let h=new URL(`favicon.ico`,c).href;return{item:m.filter(e=>e.description).slice(0,l),title:p(`title`).text(),link:u,description:p(`meta[name="description"]`).prop(`content`),language:p(`html`).prop(`lang`),icon:h,logo:h,subtitle:p(`meta[name="keywords"]`).prop(`content`),author:p(`div.uni_footer a`).text(),allowEmpty:!0}};export{l as fetchItems,c as rootUrl};
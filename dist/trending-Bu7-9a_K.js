import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s={path:`/trending/:filters?`,name:`Unknown`,maintainers:[`nczitzk`],handler:c};async function c(s){let c=s.req.param(`filters`),l=`https://pubmed.ncbi.nlm.nih.gov`,u=`${l}/trending${c?`?filter=${c.replaceAll(`,`,`&filter=`)}`:``}`,d=await i({method:`get`,url:u}),f=o(d.data),p=f(`a[data-article-id]`).toArray().map(e=>(e=f(e),{title:e.text(),link:`${l}/${e.attr(`data-article-id`)}`}));return p=await Promise.all(p.map(s=>e.tryGet(s.link,async()=>{let e=await i({method:`get`,url:s.link}),c=o(e.data);return s.doi=c(`meta[name="citation_doi"]`).attr(`content`),s.pubDate=n(c(`meta[name="citation_date"]`).attr(`content`)),s.description=t(a.join(r,`templates/description-f09d77cf.art`),{authors:c(`.authors-list`).html(),abs:c(`#enc-abstract`).html()}),s}))),{title:`Trending page - PubMed`,link:u,item:p}}export{s as route};
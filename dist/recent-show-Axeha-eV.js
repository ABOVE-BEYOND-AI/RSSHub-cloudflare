import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";const o={path:`/recent-show`,categories:[`shopping`],example:`/shoac/recent-show`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`shoac.com.cn/`]}],name:`演出月历`,maintainers:[`TonyRL`],handler:s,url:`shoac.com.cn/`};async function s(){let o=`https://www.shoac.com.cn`,s={Channel:`theatre_pc`,Location:`121.458563,31.250315`,Theater:1323,"Flagship-Store":!0},{data:c}=await i.post(`${o}/platform-backend/good/theater/dongyi-products`,{headers:s,json:{page:1,size:12,calendar:!1,timeSort:!0,venueId:``}}),l=c.data.records.map(e=>({title:e.productNameShort,category:[e.categoryName,e.subCategoryName],link:`${o}/#/detail?projectId=${e.projectId}`,projectId:e.projectId,minPrice:e.minPrice,maxPrice:e.maxPrice,placeCname:e.placeCname})),u=await Promise.all(l.map(c=>e.tryGet(c.link,async()=>{let{data:e}=await i(`${o}/platform-backend/good/project/detail/old/${c.projectId}`,{headers:s,searchParams:{distributionSeriesId:``,distributionChannelId:``}}),{data:l}=await i(`${o}/platform-backend/good/shows/old/${c.projectId}`,{headers:s,searchParams:{distributionSeriesId:``,distributionChannelId:``}});return c.description=t(a.join(r,`templates/detail-25b153ac.art`),{item:c,detail:e.data,show:l.data}),c.pubDate=l.data.showInfoDetailList?n(l.data.showInfoDetailList[0].saleBeginTime,`x`):null,c})));return{title:`演出月历 - 上海东方艺术中心管理有限公司`,link:o,item:u}}export{o as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s={path:[`/highlights`,`/main`,`/`],name:`Unknown`,maintainers:[],handler:c,url:`news.futunn.com/main`};async function c(s){let c=s.req.query(`limit`)?Number.parseInt(s.req.query(`limit`)):50,l=`https://news.futunn.com`,u=`${l}/main`,d=`${l}/news-site-api/main/get-market-list?size=${c}`,f=await i({method:`get`,url:d}),p=f.data.data.list.map(e=>({title:e.title,link:e.url.split(`?`)[0],author:e.source,pubDate:n(e.timestamp*1e3),description:t(a.join(r,`templates/description-d147424f.art`),{abs:e.abs,pic:e.pic})}));return p=await Promise.all(p.map(t=>e.tryGet(t.link,async()=>{if(/news\.futunn\.com/.test(t.link)){let e=await i({method:`get`,url:t.link}),n=o(e.data);n(`.futu-news-time-stamp`).remove(),n(`.nnstock`).each(function(){n(this).replaceWith(`<a href="${n(this).attr(`href`)}">${n(this).text().replaceAll(`$`,``)}</a>`)}),t.description=n(`.origin_content`).html(),t.category=[...n(`.news__from-topic__title`).toArray().map(e=>n(e).text()),...n(`#relatedStockWeb .stock-name`).toArray().map(e=>n(e).text().trim())]}return t}))),{title:`Futubull - Headlines`,link:u,item:p}}export{s as route};
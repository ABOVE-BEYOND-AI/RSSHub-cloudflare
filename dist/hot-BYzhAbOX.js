import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import{getSearchParams as a,rootUrl as o}from"./utils-C_M_Hqf8.js";import s from"node:path";import{load as c}from"cheerio";const l={path:`/hot`,categories:[`finance`],example:`/cls/hot`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cls.cn/`]}],name:`热门文章排行榜`,maintainers:[`5upernova-heng`,`nczitzk`],handler:u,url:`cls.cn/`};async function u(l){let u=l.req.query(`limit`)?Number.parseInt(l.req.query(`limit`)):50,d=`${o}/v2/article/hot/list`,f=await i({method:`get`,url:d,searchParams:a()}),p=f.data.data.slice(0,u).map(e=>({title:e.title||e.brief,link:`${o}/detail/${e.id}`,pubDate:n(e.ctime*1e3)}));return p=await Promise.all(p.map(n=>e.tryGet(n.link,async()=>{let e=await i({method:`get`,url:n.link}),a=c(e.data),o=JSON.parse(a(`script#__NEXT_DATA__`).text()),l=o.props.initialState.detail.articleDetail;return n.author=l.author?.name??n.author??``,n.description=t(s.join(r,`templates/depth-39e6d921.art`),{articleDetail:l}),n}))),{title:`财联社 - 热门文章排行榜`,link:o,item:p}}export{l as route};
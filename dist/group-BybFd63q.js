import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import{timezone as i}from"./timezone-BrxBCotj.js";import a from"node:path";const o={path:`/group/:id/:sort?`,categories:[`bbs`],example:`/douyu/group/1011`,parameters:{id:`鱼吧 id，可在鱼吧页 URL 中找到`,sort:`排序方式，见下表，默认为发布时间排序`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`yuba.douyu.com/group/:id`,`yuba.douyu.com/group/newself/:id`,`yuba.douyu.com/group/newall/:id`,`yuba.douyu.com/`],target:`/group/:id`}],name:`鱼吧帖子`,maintainers:[`nczitzk`],handler:s,description:`| 回复时间排序 | 发布时间排序 |
| ------------ | ------------ |
| 1            | 2            |`};async function s(o){let s=o.req.param(`id`),c=o.req.param(`sort`)??`2`,l=`https://yuba.douyu.com`,u=`${l}/wbapi/web/group/head?group_id=${s}`,d=`${l}/wbapi/web/group/postlist?group_id=${s}&page=1&sort=${c}`,f=`${l}/group/${c===`1`?`newall`:`newself`}/${s}`,p=await r({method:`get`,url:d}),m=await r({method:`get`,url:u}),h=p.data.data.map(r=>({title:r.title,link:`${l}/p/${r.post_id}`,pubDate:i(t(r.created_at_std),8),description:e(a.join(n,`templates/description-45e4c66d.art`),{content:r.describe,images:r.imglist.map(e=>({size:e.size,url:e.url}))})}));return{title:`斗鱼鱼吧 - ${m.data.data.group_name}`,link:f,item:h,description:m.data.data.describe}}export{o as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";import{load as a}from"cheerio";import o from"markdown-it";const s=o({html:!0}),c={path:`/nice`,categories:[`blog`],example:`/chuanliu/nice`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`chuanliu.org/nice`]}],name:`严选`,maintainers:[`nczitzk`],handler:l,url:`chuanliu.org/nice`};async function l(o){let c=o.req.query(`limit`)?Number.parseInt(o.req.query(`limit`),10):100,l=new URL(`nice/`,`https://chuanliu.org`).href,u=new URL(`api/dis/api/v1/memo`,`https://s.chuanliu.org`).href,{data:d}=await r(u,{searchParams:{creatorId:1,offset:0,limit:c}}),f=d.slice(0,c).map(r=>{let a=r.content.split(/\n/),o=a?.[0].replace(/^#/,``)??void 0,c=a?.[1]??void 0,l=a?.[2]??void 0,u=a?.[3]??void 0,d=(a?.[5]&&a[5]===`star`)??!1;return d&&a.splice(5,1),{title:`${d?`[STAR] `:``}${c}`,link:l,description:e(i.join(n,`templates/description-0a74e693.art`),{description:s.render(a?.join(`

`)??``),images:r.resourceList.map(e=>({src:e.externalLink,alt:e.filename,type:e.type}))}),author:u,category:[o,d?`STAR`:void 0].filter(Boolean),guid:`chuanliu-nice#${r.id}`,pubDate:t(r.createdTs,`X`),updated:t(r.updatedTs,`X`)}}),{data:p}=await r(l),m=a(p),h=new URL(m(`link[rel="shortcut icon"]`).prop(`href`),l).href;return{item:f,title:m(`title`).text(),link:l,description:m(`span.rainbow-text`).first().text(),language:m(`html`).prop(`lang`),icon:h,logo:h,subtitle:m(`title`).text(),author:m(`meta[name="author"]`).prop(`content`),allowEmpty:!0}}export{c as route};
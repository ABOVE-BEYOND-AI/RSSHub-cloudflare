import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{invalid_parameter_default as a}from"./invalid-parameter-CfUmvEUg.js";import o from"node:path";const s=`https://api.myfans.jp`,c=`https://myfans.jp`,l={"google-ga-data":`event328`},u=t=>e.tryGet(`myfans:account:${t}`,async()=>{let e=await r(`${s}/api/v2/users/show_by_username`,{headers:l,query:{username:t}});if(!e.id)throw new a(`This creator does not exist.`);return e}),d=async e=>{let t=await r(`${s}/api/v2/users/${e}/posts`,{headers:l,query:{sort_key:`publish_start_at`,page:1}});return t.data},f={path:`/user/:username`,categories:[`multimedia`],example:`/myfans/user/secret_japan`,parameters:{username:`User handle`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,nsfw:!0},radar:[{source:[`myfans.jp/:username`,`myfans.jp/:language/:username`]}],name:`User Posts`,maintainers:[`TonyRL`],handler:m},p=(e,n)=>t(o.join(i,`templates/post-e2e0e95c.art`),{postImages:e,body:n});async function m(e){let{username:t}=e.req.param(),r=await u(t),i=await d(r.id),a=i.map(e=>({title:e.body?.replaceAll(`\r
`,` `).trim().split(` `)[0],description:p(e.post_images,e.body?.replaceAll(`\r
`,`<br>`)),pubDate:n(e.published_at),link:`${c}/posts/${e.id}`,author:e.user.name}));return{title:`${r.name} (@${r.username})`,link:`${c}/${r.username}`,description:`${r.posts_count} Post ${r.likes_count} Like ${r.followers_count}
Followers ${r.followings_count} Follow ${r.about.replaceAll(`\r
`,` `)}`,image:r.avatar_url,icon:r.avatar_url,logo:r.avatar_url,language:`ja-JP`,item:a}}export{f as route};
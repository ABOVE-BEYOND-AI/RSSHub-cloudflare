import{config as e}from"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as t}from"./cache-C3AIQtoX.js";import{art as n}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import{invalid_parameter_default as a}from"./invalid-parameter-CfUmvEUg.js";import o from"node:path";const s={path:`/news/:category?`,categories:[`traditional-media`],example:`/i-cable/news`,parameters:{category:`分類，默認為新聞資訊`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.i-cable.com`],target:`/news`},{source:[`www.i-cable.com/category/:category`],target:`/news/:category`}],name:`新聞`,maintainers:[`quiniapiezoelectricity`],handler:c,url:`www.i-cable.com/`,description:`
::: tip
分類只可用分類名稱，如：新聞資訊/港聞
:::`};async function c(s){let c=s.req.param(`category`)??`新聞資訊`,l=s.req.query(`limit`)??20,u=`https://www.i-cable.com/wp-json/wp/v2`,d=await t.tryGet(`${u}/categories?slug=${c}`,async()=>await i(`${u}/categories?slug=${c}`),e.cache.routeExpire,!1);if(d.data.length<1)throw new a(`Invalid Category: ${c}`);let f=d.data[0],p=await i(`${u}/posts?_embed=1&categories=${f.id}&per_page=${l}`),m=p.data.map(e=>{let t=n(o.join(r,`templates/description-0404a122.art`),{media:e._embedded[`wp:featuredmedia`]??[],content:e.content.rendered});return{title:e.title.rendered,link:e.link,pubDate:e.date_gmt,description:t,category:e._embedded[`wp:term`][0].map(e=>e.name)??[]}});return{title:`有線新聞 - ${f.name}`,description:f.description,link:f.link,item:m}}export{s as route};
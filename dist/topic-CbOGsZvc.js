import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s={path:`/:community/:category?`,categories:[`bbs`],example:`/learnku/laravel/qa`,parameters:{community:`社区 标识，可在 <https://learnku.com/communities> 找到`,category:"分类，如果不传 `category` 则获取全部分类"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`learnku.com/:community`],target:`/:community`}],name:`社区`,maintainers:[`kayw-geek`],handler:c,description:`| 招聘 | 翻译         | 问答 | 链接  |
| ---- | ------------ | ---- | ----- |
| jobs | translations | qa   | links |`};async function c(s){let c=s.req.param(`community`),l=s.req.param(`category`)||``,u=`https://learnku.com/${c}`;l!==``&&(u=`https://learnku.com/${c}/c/${l}`);let d=await i({method:`get`,url:u}),f=d.data,p=o(f),m=p(`.simple-topic`).toArray(),h=await Promise.all(m.map(async s=>{let c=o(s),l=c(`.category-name span`).text().trim();if([`置顶`,`广告`].includes(l))return``;c(`.topic-title i`).remove();let u=c(`.topic-title-wrap`).attr(`href`),d=c(`.topic-title`).text().trim(),f=await e.tryGet(u,async()=>{let e=await i.get(u);return o(e.data)}),p=f(`.article-content .content-body`).html(),m=f(`#all-comments`).html();return{title:d,description:t(a.join(r,`templates/topic-17346cca.art`),{article:p,comment:m}),category:l,link:u,pubDate:n(c(`.timeago`).attr(`title`),`YYYY/MM/DD`)}})),g=p(`.sidebar .community-details .header span`).text();p(`.sidebar .community-details .main div div a`).remove();let _=p(`.sidebar .community-details .main div div`).text(),v=new Map([[`translations`,{name:`翻译`}],[`jobs`,{name:`招聘`}],[`qa`,{name:`问答`}],[`links`,{name:`链接`}],[``,{name:`最新`}]]);return{title:`LearnKu - ${g} - ${v.get(l).name}`,link:u,description:_,item:h.filter(e=>e!==``)}}export{s as route};
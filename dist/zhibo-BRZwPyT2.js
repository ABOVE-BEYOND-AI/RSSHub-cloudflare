import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";import a from"crypto-js";const o={m3u8:`x-mpegURL`,mp3:`mpeg`,mp4:`mp4`,m4a:`mp4`},s={path:`/zhibo/:id`,categories:[`multimedia`],example:`/radio/zhibo/1395528`,parameters:{id:`直播 id，可在对应点播页面的 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!0,supportScihub:!1},name:`直播`,maintainers:[`nczitzk`],handler:c,description:"如果订阅 [新闻和报纸摘要](http://www.radio.cn/pc-portal/sanji/zhibo_2.html?name=1395528)，其 URL 为 `http://www.radio.cn/pc-portal/sanji/zhibo_2.html?name=1395528`，可以得到 `name` 为 `1395528`\n\n  所以对应路由为 [`/radio/zhibo/1395528`](https://rsshub.app/radio/zhibo/1395528)\n\n::: tip\n  查看更多电台直播节目，可前往 [电台直播](http://www.radio.cn/pc-portal/erji/radioStation.html)\n:::"};async function c(s){let c=s.req.param(`id`),l=s.req.query(`limit`)??`100`,u=`columnId=${c}&pageNo=0&pageSize=${l}`,d=`https://www.radio.cn`,f=`${d}/pc-portal/image/icon_32.jpg`,p=`${d}/pc-portal/sanji/zhibo_2.html?name=${c}`,m=`https://ytmsout.radio.cn/web/appProgram/pageByColumn?${u}`,h=Date.now(),g=a.MD5(`${u}&timestamp=${h}&key=f0fc4c668392f9f9a447e48584c214ee`).toString().toUpperCase(),_=await r({method:`get`,url:m,headers:{sign:g,timestamp:h,"Content-Type":`application/json`,equipmentId:`0000`,platformCode:`WEB`}}),v=_.data.data.data,y=v.map(r=>{let a=r.playUrlHigh??r.playUrlLow;a=/\.m3u8$/.test(a)?r.downloadUrl:a;let s=new URL(a).pathname.split(`.`).pop(),c=s?`audio/${o[s]}`:``,l=new Date(r.startTime),u=`${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()}`;return{guid:r.id,title:`${u} ${r.name}`,link:a,description:e(i.join(n,`templates/description-2b297c34.art`),{description:r.des,enclosure_url:a,enclosure_type:c}),pubDate:t(r.startTime),enclosure_url:a,enclosure_type:c,itunes_duration:r.durationStr,itunes_item_image:f}});return{title:`云听 - ${v[0].name}`,link:p,item:y,image:f,itunes_author:`radio.cn`,description:v[0].des}}export{s as route};
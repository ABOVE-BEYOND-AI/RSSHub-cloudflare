import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as t}from"./esm-shims-BDPl6Msv.js";import{got_default as n}from"./got-BaOFZRd4.js";import r from"node:path";const i={path:`/movie/weekly/:type?`,categories:[`social-media`],example:`/douban/movie/weekly`,parameters:{type:`分类，可在榜单页 URL 中找到，默认为一周口碑电影榜`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`一周口碑榜`,maintainers:[`numm233`,`nczitzk`],handler:a,description:`| 一周口碑电影榜      | 华语口碑剧集榜            |
| ------------------- | ------------------------- |
| movie_weekly_best | tv_chinese_best_weekly |`};async function a(i){let a=i.req.param(`type`)||`movie_weekly_best`,o=`https://m.douban.com/movie`,s=`https://m.douban.com/rexxar/api/v2/subject_collection/${a}`,c=await n({method:`get`,url:`${s}/items?start=0&count=10`,headers:{Referer:o}}),l=await n({method:`get`,url:s,headers:{Referer:o}}),u=c.data.subject_collection_items;return{title:l.data.title,link:`https://m.douban.com/subject_collection/${a}`,description:l.data.description,item:u.map(({title:n,cover:i,cover_url:a,url:o,rating:s,null_rating_reason:c,description:l,card_subtitle:u,photos:d})=>{let f=s?`${s.value.toFixed(1)}分`:c;return i&&i.url&&(a=i.url),{title:n,description:e(r.join(t,`templates/weekly_best-71f344cb.art`),{title:n,card_subtitle:u,description:l,rate:f,cover_url:a,photos:d}),link:o}})}}export{i as route};
import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import{invalid_parameter_default as i}from"./invalid-parameter-CfUmvEUg.js";import a from"node:path";const o=e=>e(`4gamers:categories`,async()=>{let{data:e}=await r(`https://www.4gamers.com.tw/site/api/news/category`);return e.data.map(e=>({id:e.id,name:e.name}))}),s=e=>e.map(e=>({title:e.title,author:e.author.nickname,intro:e.intro,pubDate:t(e.createPublishedAt,`x`),link:e.canonicalUrl,category:[...new Set([e.category.name,...e.tags])],articleId:e.id})),c=async e=>{let{data:t}=await r(`https://www.4gamers.com.tw/site/api/news/find-section`,{searchParams:{sub:e.articleId}});return e.description=l(e.intro,t.data.contentSection.sections.map(t=>{switch(t[`@type`]){case`ContentAdsSection`:case`ScrollerAdsSection`:case`textScrollerAdsSection`:return``;case`RawHtmlSection`:return t.html;case`ImageGroupSection`:return u(t.items);default:throw new i(`Unhandled section type: ${t[`@type`]} on ${e.link}`)}}).join(``)),e},l=(t,r)=>e(a.join(n,`templates/description-f7ad79ff.art`),{intro:t,content:r}),u=t=>e(a.join(n,`templates/image-6e82a0bb.art`),{images:t});export{o as getCategories,c as parseItem,s as parseList};
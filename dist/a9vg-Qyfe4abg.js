import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import{timezone as a}from"./timezone-BrxBCotj.js";import o from"node:path";import{load as s}from"cheerio";const c=async c=>{let{category:l=`news/All`}=c.req.param(),u=c.req.query(`limit`)?Number.parseInt(c.req.query(`limit`),10):15,d=`http://www.a9vg.com`,f=new URL(`list/${l}`,d).href,{data:p}=await i(f),m=s(p),h=m(`html`).prop(`lang`),g=m(`a.a9-rich-card-list_item`).slice(0,u).toArray().map(e=>{e=m(e);let i=e.find(`img.a9-rich-card-list_image`),s=e.find(`div.a9-rich-card-list_label`).text();return{title:s,link:new URL(e.prop(`href`),d).href,description:t(o.join(r,`templates/description-16be3a2a.art`),{images:i?[{src:i.prop(`src`),alt:s}]:void 0}),pubDate:a(n(e.find(`div.a9-rich-card-list_infos`).text()),8),language:h}});g=await Promise.all(g.map(c=>e.tryGet(c.link,async()=>{let{data:e}=await i(c.link),l=s(e);return l(`ignore_js_op img, p img`).each((e,n)=>{n=l(n),n.parent().replaceWith(t(o.join(r,`templates/description-16be3a2a.art`),{images:n.prop(`file`)?[{src:n.prop(`file`),alt:n.next().find(`div.xs0 p`).first().text()}]:void 0}))}),c.title=l(`h1.ts, div.c-article-main_content-title`).first().text(),c.description=t(o.join(r,`templates/description-16be3a2a.art`),{description:l(`td.t_f, div.c-article-main_contentraw`).first().html()}),c.author=l(`b a.blue`).first().text()||l(l(`span.c-article-main_content-intro-item`).toArray().findLast(e=>l(e).text().startsWith(`作者`))).text().split(/：/).pop(),c.pubDate=a(n(l(`div.authi em`).first().text().trim().match(/发表于 (\d+-\d+-\d+ \d+:\d+)/)?.[1]??l(`span.c-article-main_content-intro-item`).first().text(),[`YYYY-M-D HH:mm`,`YYYY-MM-DD HH:mm`]),8),c.language=h,c})));let _=m(`title`).text(),v=new URL(`images/logo.1cee7c0f.svg`,d).href;return{title:_,description:m(`meta[name="description"]`).prop(`content`),link:f,item:g,allowEmpty:!0,image:v,author:_.split(/-/).pop(),language:h}},l={path:`/:category{.+}?`,name:`新闻`,url:`a9vg.com`,maintainers:[`monnerHenster`,`nczitzk`],handler:c,example:`/a9vg/news`,parameters:{category:`分类，默认为 ，可在对应分类页 URL 中找到, Category, by default`},description:`::: tip
  若订阅 [PS4](http://www.a9vg.com/list/news/PS4)，网址为 \`http://www.a9vg.com/list/news/PS4\`。截取 \`http://www.a9vg.com/list\` 到末尾的部分 \`news/PS4\` 作为参数填入，此时路由为 [\`/a9vg/news/PS4\`](https://rsshub.app/a9vg/news/PS4)。
:::

| 分类                                               | ID                                                     |
| -------------------------------------------------- | ------------------------------------------------------ |
| [All](https://www.a9vg.com/list/news/All)          | [news/All](https://rsshub.app/a9vg/news/All)           |
| [PS4](https://www.a9vg.com/list/news/PS4)          | [news/PS4](https://rsshub.app/a9vg/news/PS4)           |
| [PS5](https://www.a9vg.com/list/news/PS5)          | [news/PS5](https://rsshub.app/a9vg/news/PS5)           |
| [Switch](https://www.a9vg.com/list/news/Switch)    | [news/Switch](https://rsshub.app/a9vg/news/Switch)     |
| [Xbox One](https://www.a9vg.com/list/news/XboxOne) | [news/XboxOne](https://rsshub.app/a9vg/news/XboxOne)   |
| [XSX](https://www.a9vg.com/list/news/XSX)          | [news/XSX](https://rsshub.app/a9vg/news/XSX)           |
| [PC](https://www.a9vg.com/list/news/PC)            | [news/PC](https://rsshub.app/a9vg/news/PC)             |
| [业界](https://www.a9vg.com/list/news/Industry)    | [news/Industry](https://rsshub.app/a9vg/news/Industry) |
| [厂商](https://www.a9vg.com/list/news/Factory)     | [news/Factory](https://rsshub.app/a9vg/news/Factory)   |
  `,categories:[`game`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.a9vg.com/list/:category`],target:e=>{let t=e.category;return t?`/${t}`:``}},{title:`All`,source:[`www.a9vg.com/list/news/All`],target:`/news/All`},{title:`PS4`,source:[`www.a9vg.com/list/news/PS4`],target:`/news/PS4`},{title:`PS5`,source:[`www.a9vg.com/list/news/PS5`],target:`/news/PS5`},{title:`Switch`,source:[`www.a9vg.com/list/news/Switch`],target:`/news/Switch`},{title:`Xbox One`,source:[`www.a9vg.com/list/news/XboxOne`],target:`/news/XboxOne`},{title:`XSX`,source:[`www.a9vg.com/list/news/XSX`],target:`/news/XSX`},{title:`PC`,source:[`www.a9vg.com/list/news/PC`],target:`/news/PC`},{title:`业界`,source:[`www.a9vg.com/list/news/Industry`],target:`/news/Industry`},{title:`厂商`,source:[`www.a9vg.com/list/news/Factory`],target:`/news/Factory`}]};export{c as handler,l as route};
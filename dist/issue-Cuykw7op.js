import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";import{load as a}from"cheerio";import{CookieJar as o}from"tough-cookie";const s=new o,c={path:[`/:journal/vol/:issue`,`/:journal/:issue`],radar:[{source:[`www.sciencedirect.com/journal/:journal/*`],target:`/:journal`}],name:`Unknown`,maintainers:[],handler:l};async function l(o){let c=o.req.param(`journal`),l=`Volume `+o.req.param(`issue`).replace(`-`,` Issue `),u=`https://www.sciencedirect.com`,d=`${u}/journal/${c}/vol/${o.req.param(`issue`).replace(`-`,`/issue/`)}`,f=await r(d,{cookieJar:s}),p=a(f.data),m=p(`.anchor.js-title-link`).text(),h=p(`.js-article`).toArray().map(e=>{let t=p(e).find(`.js-article-title`).text(),n=p(e).find(`.js-article__item__authors`).text(),r=p(e).find(`.article-content-title`).attr(`href`),i=p(e).find(`.article-content-title`).attr(`id`);return{title:t,link:r,id:i,authors:n,issue:l}}),g=e=>t(i.join(n,`templates/description-cc75687b.art`),{item:e}),_=await Promise.all(h.map(t=>e.tryGet(t.link,async()=>{let e=await r(`${u}/science/article/pii/${t.id}`,{cookieJar:s}),n=a(e.data);return n(`.section-title`).remove(),t.doi=n(`.doi`).attr(`href`).replace(`https://doi.org/`,``),t.abstract=n(`.abstract.author`).text(),t.description=g(t),t})));return{title:`${m} - ${l}`,link:d,item:_}}export{c as route};
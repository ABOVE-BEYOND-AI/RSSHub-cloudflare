import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{getSubPath as r}from"./common-utils-C27Jp3s6.js";import"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{got_default as a}from"./got-BaOFZRd4.js";import{timezone as o}from"./timezone-BrxBCotj.js";import s from"node:path";import{load as c}from"cheerio";const l={path:`*`,radar:[{source:[`sinchew.com.my/`],target:``}],name:`Unknown`,maintainers:[],handler:u,url:`sinchew.com.my/`};async function u(l){let u=`https://www.sinchew.com.my`,d=`${u}${r(l)===`/`?``:r(l)}`,f=await a({method:`get`,url:d}),p=c(f.data),m=p(`.title .internalLink`).slice(0,l.req.query(`limit`)?Number.parseInt(l.req.query(`limit`)):20).toArray().map(e=>{e=p(e);let t=e.attr(`href`);return{title:e.attr(`data-title`),link:t.startsWith(`http`)?t:`${u}${t}`,pubDate:o(n(e.text()),8)}});return m=await Promise.all(m.map(r=>e.tryGet(r.link,async()=>{let e=await a({method:`get`,url:r.link}),l=c(e.data);return l(`.ads-frame, .read-more-msg`).remove(),l(`figure`).each(function(){l(this).replaceWith(t(s.join(i,`templates/images-dc75461b.art`),{image:l(this).find(`img`).attr(`src`),caption:l(this).find(`figcaption`).text()}))}),r.description=l(`.article-page-content`).html(),r.pubDate=o(n(l(`meta[property="article:published_time"]`).attr(`content`)),8),r}))),{title:p(`title`).text(),link:d,item:m}}export{l as route};
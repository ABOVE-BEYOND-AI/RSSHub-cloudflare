import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import a from"node:path";import{load as o}from"cheerio";const s=`https://news.google.com`,c={path:`/news/:category/:locale`,categories:[`new-media`],example:`/google/news/Top stories/hl=en-US&gl=US&ceid=US:en`,parameters:{category:`Category Title`,locale:"locales, could be found behind `?`, including `hl`, `gl`, and `ceid` as parameters"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`News`,maintainers:[`zoenglinghou`,`pseudoyu`],handler:l};async function l(c){let l=c.req.param(`category`),u=c.req.param(`locale`),d=await e.tryGet(`google:news:${u}`,async()=>{let e=await r(`${s}/?${u}`),t=o(e);return[...t(`a.brSCsc`).toArray().slice(3).map(e=>(e=t(e),{category:e.text(),url:new URL(e.attr(`href`),s).href})),...t(`a.aqvwYd`).toArray().map(e=>(e=t(e),{category:e.text(),url:new URL(e.attr(`href`),s).href}))]}),f=d.find(e=>e.category===l).url,p=await r(f),m=o(p),h=[...m(`.UwIKyb`),...m(`.IBr9hb`),...m(`.IFHyqb`)],g=h.map(e=>{e=m(e);let r=e.find(`.gPFEn`).text(),o=e.find(`.bInasb span`).text(),c=o?o.replace(/^By\s+/i,``).replaceAll(/\s+\([^)]*\)/g,``).split(/,|\s+&\s+|\s+and\s+/).map(e=>e.trim()).filter(e=>{if(!e)return!1;let t=[`et al`,`et al.`];return!t.some(t=>e.toLowerCase().endsWith(t))}).map(e=>({name:e})):[];return{title:r,description:t(a.join(i,`templates/news-c158a6b5.art`),{img:e.find(`img.Quavad`).attr(`src`),brief:r}),pubDate:n(e.find(`time`).attr(`datetime`)),author:c,link:new URL(e.find(`a.WwrzSb`).first().attr(`href`),s).href}});return{title:m(`title`).text(),link:f,item:g}}export{c as route};
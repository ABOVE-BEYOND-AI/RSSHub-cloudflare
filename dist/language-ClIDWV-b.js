import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{timezone as a}from"./timezone-BrxBCotj.js";import{ViewType as o}from"./types-D9T3SQ-7.js";import s from"node:path";import{load as c}from"cheerio";const l=async o=>{let{category:l=`thelatest`}=o.req.param(),u=Number.parseInt(o.req.query(`limit`)??`30`,10),d=new URL(l,`https://language.chinadaily.com.cn`).href,f=await r(d),p=c(f),m=p(`html`).attr(`lang`)??`zh-CN`,h=[];h=p(`div.gy_box, ul.content_list li`).slice(0,u).toArray().map(e=>{let n=p(e),r=n.find(`a:not(.gy_box_img):not(.a_img)`).first(),a=r.text(),o=n.find(`a.gy_box_img img, a.a_img img`).attr(`src`),c=t(s.join(i,`templates/description-881baa33.art`),{images:o?[{src:o,alt:a}]:void 0,intro:n.find(`p.gy_box_txt3 a`).text()}),l=r.attr(`href`),u={title:a,description:c,link:l?.startsWith(`//`)?`https:${l}`:l,content:{html:c,text:c},image:o,banner:o,language:m};return u}),h=(await Promise.all(h.map(o=>o.link?e.tryGet(o.link,async()=>{let e=await r(o.link),l=c(e),u=l(`meta[ property="og:title"]`).attr(`content`),d=l(`p.main_title3`).text().split(/\s/).pop(),f=l(`meta[name="keywords"]`).attr(`content`)?.split(/,/),p=l(`meta[name="source"], meta[name="author"], meta[name="editor"]`).toArray(),h=[...new Set(p.map(e=>{let t=l(e);return t.attr(`content`)}).filter(e=>e!==void 0))],g=h.map(e=>({name:e})),_=l(`meta[property="og:image"]`).attr(`content`),v=d,y={title:u,pubDate:d?a(n(d),8):o.pubDate,category:f,author:g,image:_,banner:_,updated:v?a(n(v),8):o.updated,language:m},b=l(`iframe#playerFrame, audio`).first(),x=b.attr(`src`);x&&(y={...y,enclosure_url:x?.startsWith(`//`)?`https:${x}`:x,enclosure_title:u,enclosure_length:void 0,itunes_duration:void 0,itunes_item_image:_}),l(`div.urlShareArea`).remove();let S=o.description+t(s.join(i,`templates/description-881baa33.art`),{description:l(`div#Content`).html()});return y={...y,description:S,content:{html:S,text:S}},{...o,...y}}):o))).filter(e=>!0);let g=p(`title`).text(),_=g.split(/-\s/).pop();return{title:g,description:p(`meta[name="description"]`).attr(`content`),link:d,item:h,allowEmpty:!0,image:p(`a.header2_logo1 img`).attr(`src`),author:_,language:m,itunes_author:_,itunes_category:`Language`,id:d}},u={path:`/language/:category{.+}?`,name:`英语点津`,url:`language.chinadaily.com.cn`,maintainers:[`nczitzk`],handler:l,example:`/chinadaily/language/thelatest`,parameters:{category:{description:"分类，默认为 `thelatest`，即精彩推荐，可在对应分类页 URL 中找到, Category, `thelatest`，即精彩推荐  by default",options:[{label:`精彩推荐`,value:`thelatest`},{label:`每日一词`,value:`news_hotwords/word_of_the_day`},{label:`双语新闻`,value:`news_bilingual`},{label:`新闻热词`,value:`news_hotwords`},{label:`实用口语`,value:`practice_tongue`},{label:`译词课堂`,value:`trans_collect`},{label:`图片新闻`,value:`news_photo`},{label:`视频精选`,value:`video_links`},{label:`新闻播报`,value:`audio_cd`},{label:`专栏作家`,value:`columnist`},{label:`权威发布`,value:`5af95d44a3103f6866ee845c`}]}},description:`:::tip
若订阅 [精彩推荐](https://language.chinadaily.com.cn/thelatest)，网址为 \`https://language.chinadaily.com.cn/thelatest\`，请截取 \`https://language.chinadaily.com.cn/\` 到末尾的部分 \`thelatest\` 作为 \`category\` 参数填入，此时目标路由为 [\`/chinadaily/language/thelatest\`](https://rsshub.app/chinadaily/language/thelatest)。
:::

<details>
  <summary>更多分类</summary>

| 分类                                                                         | ID                                                                                                    |
| ---------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------- |
| [精彩推荐](https://language.chinadaily.com.cn/thelatest)                     | [thelatest](https://rsshub.app/chinadaily/language/thelatest)                                         |
| [每日一词](https://language.chinadaily.com.cn/news_hotwords/word_of_the_day) | [news_hotwords/word_of_the_day](https://rsshub.app/chinadaily/language/news_hotwords/word_of_the_day) |
| [双语新闻](https://language.chinadaily.com.cn/news_bilingual)                | [news_bilingual](https://rsshub.app/chinadaily/language/news_bilingual)                               |
| [新闻热词](https://language.chinadaily.com.cn/news_hotwords)                 | [news_hotwords](https://rsshub.app/chinadaily/language/news_hotwords)                                 |
| [实用口语](https://language.chinadaily.com.cn/practice_tongue)               | [practice_tongue](https://rsshub.app/chinadaily/language/practice_tongue)                             |
| [译词课堂](https://language.chinadaily.com.cn/trans_collect)                 | [trans_collect](https://rsshub.app/chinadaily/language/trans_collect)                                 |
| [图片新闻](https://language.chinadaily.com.cn/news_photo)                    | [news_photo](https://rsshub.app/chinadaily/language/news_photo)                                       |
| [视频精选](https://language.chinadaily.com.cn/video_links)                   | [video_links](https://rsshub.app/chinadaily/language/video_links)                                     |
| [新闻播报](https://language.chinadaily.com.cn/audio_cd)                      | [audio_cd](https://rsshub.app/chinadaily/language/audio_cd)                                           |
| [专栏作家](https://language.chinadaily.com.cn/columnist)                     | [audio_cd](https://rsshub.app/chinadaily/language/columnist)                                          |
| [权威发布](https://language.chinadaily.com.cn/5af95d44a3103f6866ee845c)      | [5af95d44a3103f6866ee845c](https://rsshub.app/chinadaily/language/5af95d44a3103f6866ee845c)           |

</details>
`,categories:[`traditional-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!0,supportScihub:!1},radar:[{source:[`language.chinadaily.com.cn/:category`],target:e=>{let t=e.category;return`/chinadaily/language${t?`/${t}`:``}`}},{title:`精彩推荐`,source:[`language.chinadaily.com.cn/thelatest`],target:`/language/thelatest`},{title:`每日一词`,source:[`language.chinadaily.com.cn/news_hotwords/word_of_the_day`],target:`/language/news_hotwords/word_of_the_day`},{title:`双语新闻`,source:[`language.chinadaily.com.cn/news_bilingual`],target:`/language/news_bilingual`},{title:`新闻热词`,source:[`language.chinadaily.com.cn/news_hotwords`],target:`/language/news_hotwords`},{title:`实用口语`,source:[`language.chinadaily.com.cn/practice_tongue`],target:`/language/practice_tongue`},{title:`译词课堂`,source:[`language.chinadaily.com.cn/trans_collect`],target:`/language/trans_collect`},{title:`图片新闻`,source:[`language.chinadaily.com.cn/news_photo`],target:`/language/news_photo`},{title:`视频精选`,source:[`language.chinadaily.com.cn/video_links`],target:`/language/video_links`},{title:`新闻播报`,source:[`language.chinadaily.com.cn/audio_cd`],target:`/language/audio_cd`},{title:`专栏作家`,source:[`language.chinadaily.com.cn/columnist`],target:`/language/columnist`},{title:`权威发布`,source:[`language.chinadaily.com.cn/5af95d44a3103f6866ee845c`],target:`/language/5af95d44a3103f6866ee845c`}],view:o.Articles};export{l as handler,u as route};
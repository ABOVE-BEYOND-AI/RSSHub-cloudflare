import{art as e}from"./render-DE4LRFBD.js";import{__dirname as t}from"./esm-shims-BDPl6Msv.js";import n from"node:path";const r=`https://pikabu.ru`,i=e=>{e.find(`.story-image__stretch`).remove(),e.find(`.story-image__image`).each((e,t)=>{t.attribs[`data-src`]&&t.attribs[`data-large-image`]&&(t.attribs.src=t.attribs[`data-large-image`],delete t.attribs[`data-src`],delete t.attribs[`data-large-image`])})},a=r=>{let i=r.find(`.player__preview`).attr(`style`).match(/url\((.+)\);/)[1],a=r.attr(`data-type`),o=``;if(a===`video`){let i=r.attr(`data-source`).match(/\/embed\/(.+)$/)[1];o=e(n.join(t,`templates/video-ddca285d.art`),{videoId:i})}else if(a===`video-file`){let a=r.find(`.player__svg-stretch`).attr(`width`),s=`${r.attr(`data-source`)}.mp4`,c=r.attr(`data-webm`);o=e(n.join(t,`templates/video-ddca285d.art`),{preview:i,width:a,mp4:s,webm:c})}else throw Error(`Unknown video type: ${a}`);r.replaceWith(o)};export{r as baseUrl,i as fixImage,a as fixVideo};
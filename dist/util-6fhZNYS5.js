import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";import{load as a}from"cheerio";const o=`https://www.safe.gov.cn`,s={ywzx:`www/busines/businessQuery?siteid=`,tsjy:`www/complaint/complaintQuery?siteid=`},c=async(c=`beijing`,l=`ywzx`,u=`3`)=>{let d=new URL(`${s[l]}${c}`,o).href,f=new URL(`${c}/${l}/index.html`,o).href,{data:p}=await r(d),m=a(p),h=m(`#complaint`).slice(0,u).toArray().map(r=>{r=m(r);let a=r.find(`span[objid]`),o={author:a.first().text().replace(/:$/,``),content:a.eq(1).text(),date:a.eq(2).text()},s={author:a.eq(3).text().replace(/:$/,``),content:a.eq(4).text(),date:a.eq(5).text()};return{title:`${o.author}: ${o.content}`,link:f,description:e(i.join(n,`templates/message-3c8daa05.art`),{message:o,reply:s}),author:`${o.author}/${s.author}`,guid:`${f}#${o.author}(${o.date})/${s.author}(${s.date})`,pubDate:t(o.date),updated:t(s.date)}}),{data:g}=await r(f),_=a(g),v=_(`meta[name="ColumnName"]`).prop(`content`),y=_(`meta[name="ColumnType"]`).prop(`content`),b=`safe/templateresource/372b1dfdab204181b9b4f943a8e926a6`,x=new URL(`${b}/logo_06.png`,o).href,S=new URL(`${b}/safe.ico`,o).href;return{item:h,title:`${v} - ${y}`,link:f,description:_(`meta[name="ColumnDescription"]`).prop(`content`),language:`zh`,image:x,icon:S,logo:S,subtitle:y,author:v,allowEmpty:!0}};export{c as processZxfkItems};
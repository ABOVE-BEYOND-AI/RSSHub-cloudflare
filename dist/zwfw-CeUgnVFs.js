import"./config-HRWLmo66.js";import{logger_default as e}from"./logger-DHpG8Bim.js";import"./proxy-BQXcrhTu.js";import"./helpers-LVq640iW.js";import{cache_default as t}from"./cache-C3AIQtoX.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{ofetch_default as i}from"./ofetch-DRl42yaJ.js";import{__dirname as a}from"./esm-shims-BDPl6Msv.js";import{got_default as o}from"./got-BaOFZRd4.js";import{timezone as s}from"./timezone-BrxBCotj.js";import{puppeteer_default as c}from"./puppeteer-BAoY_Fpy.js";import l from"node:path";import{load as u}from"cheerio";async function d(t,n){try{let e=``,r=await n.newPage();return await r.setRequestInterception(!0),r.on(`request`,e=>{let t=e.resourceType();[`document`,`script`,`stylesheet`,`xhr`].includes(t)?e.continue():e.abort()}),await r.goto(t.link,{waitUntil:`networkidle0`,timeout:29e3}),await r.evaluate(e=>document.querySelector(e).click(),`.item-left .item .title .button`),await r.waitForSelector(`.item-left .item .bg_box div:nth-child(16)`,{timeout:5e3}),e=await r.content(),e||``}catch(t){return e.error(`Error when visiting /gov/hangzhou/zwfw:`,t),``}}function f(e){return{serviceInfo:{serviceTarget:e.find(`.row:nth(1)>div:nth(1)`).find(`.inner`).children().first().attr(`content`),processingMethods:e.find(`.row:nth(1)>div:nth(3)`).find(`.inner`).text(),processingLocation:e.find(`.row:nth(2)>div:nth(1)`).find(`.inner`).text(),processingTime:e.find(`.row:nth(3)>div:nth(1)`).find(`.inner`).text()},applicationInfo:{acceptanceConditions:e.find(`.row:nth(5)>div:nth(1)`).find(`.inner`).text(),prohibitedRequirements:e.find(`.row:nth(6)>div:nth(1)`).find(`.inner`).text(),quantityRestrictions:e.find(`.row:nth(7)>div:nth(1)`).find(`.inner`).text()},resultInfo:{approvalResult:e.find(`.row:nth(9)>div:nth(1)`).find(`.inner`).text(),approvalSample:e.find(`.row:nth(10)>div:nth(1)`).find(`.inner`).html(),approvalResultType:e.find(`.row:nth(10)>div:nth(3)`).find(`.inner`).text()},feeInfo:{isThereAFee:e.find(`.row:nth(12)>div:nth(1)`).find(`.inner`).text(),isOnlinePaymentSupported:e.find(`.row:nth(12)>div:nth(3)`).find(`.inner`).text()},approvalInfo:{authoritySource:e.find(`.row:nth(14)>div:nth(1)`).find(`.inner`).text(),exerciseLevel:e.find(`.row:nth(15)>div:nth(1)`).find(`.inner`).text(),implementingEntity:e.find(`.row:nth(15)>div:nth(3)`).find(`.inner`).text()},deliveryInfo:{isLogisticsSupported:e.find(`.row:nth(17)>div:nth(1)`).find(`.inner`).text(),deliveryTimeframe:e.find(`.row:nth(17)>div:nth(3)`).find(`.inner`).text(),deliveryMethods:e.find(`.row:nth(18)>div:nth(1)`).find(`.inner`).text()},agentService:e.find(`.row:nth(20)>div:nth(1)`).find(`.inner`).text(),otherInfo:{departmentName:e.find(`.row:nth(22)>div:nth(1)`).find(`.inner`).text(),matterType:e.find(`.row:nth(22)>div:nth(3)`).find(`.inner`).text(),acceptingInstitution:e.find(`.row:nth(23)>div:nth(1)`).find(`.inner`).text(),basicCode:e.find(`.row:nth(24)>div:nth(1)`).find(`.inner`).text(),implementationCode:e.find(`.row:nth(24)>div:nth(3)`).find(`.inner`).text(),scopeOfGeneralHandling:e.find(`.row:nth(25)>div:nth(1)`).find(`.inner`).text(),documentType:e.find(`.row:nth(25)>div:nth(3)`).find(`.inner`).text(),decisionMakingAuthority:e.find(`.row:nth(26)>div:nth(1)`).find(`.inner`).text(),delegatedDepartment:e.find(`.row:nth(26)>div:nth(3)`).find(`.inner`).text(),onlineProcessingDepth:e.find(`.row:nth(27)>div:nth(1)`).find(`.inner`).text(),reviewType:e.find(`.row:nth(27)>div:nth(3)`).find(`.inner`).text(),isItAvailableInTheGovernmentServiceHall:e.find(`.row:nth(28)>div:nth(1)`).find(`.inner`).text(),isSelfServiceTerminalProcessingSupported:e.find(`.row:nth(28)>div:nth(3)`).find(`.inner`).text(),isACommitmentSystemImplemented:e.find(`.row:nth(29)>div:nth(1)`).find(`.inner`).text(),authorityAttribute:e.find(`.row:nth(29)>div:nth(3)`).find(`.inner`).text(),isAppointmentBookingSupported:e.find(`.row:nth(30)>div:nth(1)`).find(`.inner`).text(),isOnlineProcessingAvailable:e.find(`.row:nth(30)>div:nth(3)`).find(`.inner`).text(),naturalPersonThemeClassification:e.find(`.row:nth(31)>div:nth(1)`).find(`.inner`).text(),legalPersonThemeClassification:e.find(`.row:nth(31)>div:nth(3)`).find(`.inner`).text(),rightsAndObligationsOfAdministrativeCounterparties:e.find(`.row:nth(32)>div:nth(1)`).find(`.inner`).text(),applicableObjectDescription:e.find(`.row:nth(33)>div:nth(1)`).find(`.inner`).text(),contentInvolved:e.find(`.row:nth(34)>div:nth(1)`).find(`.inner`).text()}}}const p={path:`/hangzhou/zwfw`,categories:[`government`],example:`/gov/hangzhou/zwfw`,features:{requireConfig:!1,requirePuppeteer:!0,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`hangzhou.gov.cn/col/col1256349/index.html`]}],name:`政务服务公开`,maintainers:[`flynncao`],handler:m,url:`hangzhou.gov.cn/col/col1256349/index.html`};async function m(){let e=`https://www.hangzhou.gov.cn/col/col1256349/index.html`,p=await i(e),m=await c(),h=p.replace(`<script type="text/xml">`,``).replace(`<\/script>`,``).replaceAll(`<recordset>`,``).replaceAll(`</recordset>`,``).replaceAll(`<record>`,``).replaceAll(`</record>`,``).replaceAll(`<![CDATA[`,``).replaceAll(`]]>`,``),g=u(h),_=g(`li.clearfix`).toArray().map(t=>{t=g(t);let n=t.find(`a`).first().text(),i=s(r(t.find(`span`).first().text(),`YYYY-MM-DD`),8),a=t.find(`a`).first().attr(`href`),o=new URL(a,e).href;return{title:n,link:o,pubDate:i}}).filter(e=>!e.title.includes(`置顶`)),v=await Promise.all(_.map(e=>t.tryGet(e.link,async()=>{let t=new URL(e.link).hostname;if(t===`www.zjzwfw.gov.cn`){let t=await d(e,m),r=u(t);e.description=n(l.resolve(a,`templates/jbxx-81ef584c.art`),f(r(`.item-left .item .bg_box`))),e.author=`浙江政务服务网`,e.category=r(`meta[name="ColumnType"]`).attr(`content`)}else{let n=await o(e.link),r=u(n.data);t===`police.hangzhou.gov.cn`?(e.description=r(`.art-content .wz_con_content`).html(),e.author=r(`meta[name="ContentSource"]`).attr(`content`),e.category=r(`meta[name="ColumnType"]`).attr(`content`)):(e.description=r(`.article`).html(),e.author=r(`meta[name="ContentSource"]`).attr(`content`),e.category=r(`meta[name="ColumnType"]`).attr(`content`))}return e.pubDate=g(`meta[name="PubDate"]`).length?s(r(g(`meta[name="PubDate"]`).attr(`content`),`YYYY-MM-DD HH:mm`),8):e.pubDate,e})));return await m.close(),{allowEmpty:!0,title:`杭州市人民政府-政务服务公开`,link:`https://www.hangzhou.gov.cn/col/col1256349/index.html`,item:v}}export{p as route};
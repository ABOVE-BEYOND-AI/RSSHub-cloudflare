import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import{timezone as a}from"./timezone-BrxBCotj.js";import o from"node:path";import{load as s}from"cheerio";import c from"markdown-it";const l=c({html:!0,linkify:!0}),u=(e,t)=>t(e,async()=>{let t=await i({method:`get`,url:e}),n={},r=[],a=t.data;if(a?.result?.boards)for(let e of a.result.boards){let t=e.name;if(n[t]===void 0&&(n[t]=[]),e.schematic?.documents)for(let r of e.schematic.documents)r.thumb&&n[t].push(r.thumb);e.pcb_info?.thumb&&n[t].push(e.pcb_info.thumb),e.pcb_info?.boms?.boms&&r.push(...JSON.parse(e.pcb_info.boms.boms))}return{images:n,boms:r}}),d={path:`/:sortType?`,categories:[`other`],example:`/oshwhub`,parameters:{sortType:`sortType`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`OpenSource Square`,maintainers:[`tylinux`],handler:f};async function f(c){let d=`https://oshwhub.com`,f=c.req.param(`sortType`)??`updatedTime`,p=`${d}/explore?projectSort=${f}`,m=await i({method:`get`,url:p}),h=m.data,g=s(h),_=g(`title`).text(),v=g(`a[class="project-link"]`),y=await Promise.all(v.map((c,f)=>{let p=`${d}${f.attribs.href}`;return e.tryGet(p,async()=>{let c=await i({method:`get`,url:p}),f=c.data,m=s(f),h=m(`div[class="projects-left-top"]`),g=m(h).find(`span[class="title"]`).text(),_=m(h).find(`div[class="member-items"] > ul > li > a > span`).first().text().trim(),v=m(h).find(`div[class="establish-time"] > span`).text(),y=a(n(v.trim().split(`
`)[1].trim(),`YYYY/MM/DD HH:mm:ss`),0),b=m(h).find(`div[class="img-cover"] > img`).attr(`src`)?.trim(),x=m(h).find(`p[class="introduction"]`).text().trim(),S=m(h).find(`div[class*="html-content"]`).attr(`data-markdown`),C=m(`div[class="projects-detail"]`).attr()[`data-uuid`],{images:w,boms:T}=await u(`${d}/api/project/${C}/pro_images`,e.tryGet),E=t(o.join(r,`templates/description-ee8ccf17.art`),{title:g,author:_,publishTime:v,coverImg:b,introduction:x,content:l.render(S)||`No Content`,images:w,boms:T}),D={title:g,description:E,pubDate:y,link:p,author:_};return D})}));return{title:_,link:p,description:_,item:y}}export{d as route};
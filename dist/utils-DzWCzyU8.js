import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import r from"node:path";import{load as i}from"cheerio";const a=`https://www.science.org`,o=(t,a,o)=>Promise.all(t.map(t=>o(t.link,async()=>{let o=await a.newPage();await o.setRequestInterception(!0),o.on(`request`,e=>{e.resourceType()===`document`||e.resourceType()===`script`?e.continue():e.abort()}),await o.goto(t.link,{waitUntil:`domcontentloaded`}),await o.waitForSelector(`section#bodymatter, .news-article-content, .news-article-content--featured`);let s=await o.evaluate(()=>document.documentElement.innerHTML);await o.close();let c=i(s),l=c(`div#abstracts`).html(),u=c(`.news-article-content--featured`).length?c(`.news-article-content--featured`).html():c(`.news-article-content`).length?c(`.news-article-content`).html():c(`.info-panel__formats a.btn__request-access`).length||c(`.info-panel__formats a.btn--access`).length?``:c(`section#bodymatter`).html();return t.description=e(r.join(n,`templates/article-581213b2.art`),{abs:l,content:u}),t}))),s=(e,n)=>(e=n(e),{title:e.find(`.article-title a`).attr(`title`),link:`${a}${e.find(`.article-title a`).attr(`href`)}`,doi:e.find(`.article-title a`).attr(`href`).replace(`/doi/`,``),pubDate:t(e.find(`.card-meta__item time`).text()),author:e.find(`.card-meta ul[title="list of authors"] li`).toArray().map(e=>n(e).text()).join(`, `)});export{a as baseUrl,o as fetchDesc,s as getItem};
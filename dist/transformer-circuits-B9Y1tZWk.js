import"./config-HRWLmo66.js";import{logger_default as e}from"./logger-DHpG8Bim.js";import{cache_default as t}from"./cache-C3AIQtoX.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{ofetch_default as i}from"./ofetch-DRl42yaJ.js";import{__dirname as a}from"./esm-shims-BDPl6Msv.js";import o from"node:path";import{load as s}from"cheerio";const c={path:`/`,categories:[`programming`],example:`/transformer-circuits`,parameters:{},radar:[{source:[`transformer-circuits.pub/`],target:`/`}],name:`Articles`,maintainers:[`shinmohuang`],handler:l};async function l(){let e=`https://transformer-circuits.pub`,n=await i(e),a=s(n),o=a(`.toc a`).toArray().map(n=>{let i=a(n),o=i,s=i.prevAll(`.date`).first(),c=s.text().trim();if(o.hasClass(`paper`)||o.hasClass(`note`)){let n=o.hasClass(`paper`)?`Paper`:`Note`,i=o.find(`h3`).text().trim(),a=``,s=o.find(`.byline`);s.length&&(a=s.text().trim());let l=o.find(`.description`).text().trim(),d=o.attr(`href`),f=d?d.startsWith(`http`)?d:`${e}/${d}`:e;return t.tryGet(f,async()=>{let e=await u(f);return{title:i,link:f,pubDate:r(c,`MMMM YYYY`),author:a,description:e||`${n}: ${l}`,category:[`AI`,`Machine Learning`,`Anthropic`,`Transformer Circuits`]}})}return null}),c=(await Promise.all(o)).filter(Boolean);return{title:`Transformer Circuits Thread`,link:e,item:c,description:`Research on reverse engineering transformer language models into human-understandable programs`}}async function u(t){try{let r=await i(t),c=s(r);c(`.article-header, .tooltip, modal, script, style, d-front-matter, .visual-toc`).remove();let l=c(`d-article`).html();return l||(l=c(`main article, .article-content, .post-content, .content-area`).html()||c(`.content, .article, .post`).html()||c(`main`).html(),l||(e.warn(`No suitable content container found for ${t}`),l=`<p>Could not extract content. Please visit <a href="${t}">the original page</a>.</p>`)),n(o.join(a,`templates/article-9b611c47.art`),{content:l,link:t})}catch(n){let r=n instanceof Error?n.message:String(n);return e.error(`Error fetching article content from ${t}: ${r}`),null}}export{c as route};
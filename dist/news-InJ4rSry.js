import{rand_user_agent_default as e}from"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as t}from"./cache-C3AIQtoX.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{ofetch_default as i}from"./ofetch-DRl42yaJ.js";import{__dirname as a}from"./esm-shims-BDPl6Msv.js";import o from"node:path";import{load as s}from"cheerio";const c=e({browser:`chrome`,os:`android`,device:`mobile`}),l=async e=>{let l=await Promise.all(e.map(e=>t.tryGet(e.link,async()=>{let t=e.link,l=await i(t,{headers:{"User-Agent":c}}),u=s(l),d=JSON.parse(u(`script#__NEXT_DATA__`).text()),f=d.props.pageProps.urqlState,p=Object.keys(f).filter(e=>f[e].data.includes(`content`));d=JSON.parse(f[p].data).article,e.title=d.shareTitle,e.category=d.categories.map(e=>e.slug);for(let t of d.channels)e.category.push(t.slug);return e.content=d.content.filter(e=>e.innerHtml!==void 0&&e.innerHtml!==``),e.caption=d.dek,d.leadArt&&(e.imgUrl=d.leadArt.image?.url,e.imgAlt=d.leadArt.image?.altText,e.imgCaption=d.leadArt.image?.attributionText),e.description=n(o.join(a,`templates/article-description-c1053caf.art`),{item:e}),{title:e.title,pubDate:r(e.pubDate),link:e.link,description:e.description}})));return l},u={path:`/:category`,categories:[`traditional-media`],example:`/theatlantic/latest`,parameters:{category:`category, see below`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.theatlantic.com/:category`]}],name:`News`,maintainers:[`EthanWng97`,`pseudoyu`],handler:d,description:`| Popular      | Latest | Politics | Technology | Business |
| ------------ | ------ | -------- | ---------- | -------- |
| most-popular | latest | politics | technology | business |

  More categories (except photo) can be found within the navigation bar at [https://www.theatlantic.com](https://www.theatlantic.com)`};async function d(e){let t=e.req.param(`category`),n=`https://www.theatlantic.com/${t}/`,r=await i(n),a=s(r),o=JSON.parse(a(`script#__NEXT_DATA__`).text()).props.pageProps.urqlState,c=Object.keys(o).filter(e=>o[e].data.includes(t)),u=JSON.parse(o[c].data),d=Object.values(u)[0].river.edges;d=d.filter(e=>!e.node.url.startsWith(`https://www.theatlantic.com/photo`)),d=d.map(e=>{let t={};return t.link=e.node.url,t.pubDate=e.node.datePublished,t});let f=await l(d);return{title:`The Atlantic - ${t.toUpperCase()}`,link:n,description:`The Atlantic - ${t.toUpperCase()}`,item:f}}export{u as route};
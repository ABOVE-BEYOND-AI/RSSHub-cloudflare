import{config as e}from"./config-HRWLmo66.js";import{cache_default as t}from"./cache-C3AIQtoX.js";import{art as n}from"./render-DE4LRFBD.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{got_default as a}from"./got-BaOFZRd4.js";import o from"node:path";import{load as s}from"cheerio";const c=new URL(`https://openai.com`),l=async e=>{let t=await r(e),n=s(t),i=n(`#main article`),a=n(`h1`).prev().find(`a[href]`).toArray().map(e=>n(e).text());return n(i.find(`h1`).parents().get(4)).remove(),i.children().last().remove(),i.find(`#citations`).remove(),{content:i.html()??void 0,categories:a,image:n(`meta[property="og:image"]`).attr(`content`)}},u=async n=>{let i=await r(`https://openai.com/news/rss.xml`,{responseType:`text`,headers:{"User-Agent":e.ua}}),a=s(i,{xml:!0});return Promise.all(a(`item`).toArray().slice(0,n).map(e=>{let n=a(e).find(`guid`).text();return t.tryGet(`openai:news:${n}`,async()=>{let t=a(e).find(`title`).text(),r=a(e).find(`pubDate`).text(),i=a(e).find(`link`).text(),{content:o,categories:s}=await l(i);return{guid:n,title:t,link:i,pubDate:r,description:o,category:s}})}))},d=async()=>{let e=await a({method:`get`,url:`https://openai.com/blog`}),t=e.data.toString().match(/(?<=TWILL_API_BASE:").+?(?=")/)[0].replaceAll(String.raw`\u002F`,`/`);return new URL(t)},f=(e,r,c)=>t.tryGet(c.slug,async()=>{let e=`${r}/${c.slug}`,t=await a({method:`get`,url:e}),l=s(t.data),u=l(`[aria-labelledby="metaAuthorsHeading"] > li > a > span > span`).toArray().map(e=>l(e).text()).join(`, `),d=l(`*`).contents().filter(function(){return this.nodeType===8});d.remove(),l=l(`#content`);let f=c.seo.ogImageSrc,p=c.seo.ogImageAlt,m=n(o.join(i,`templates/article-88d59063.art`),{content:l,imageSrc:f,imageAlt:p});return c.tags=c.tags||[],{title:c.title,author:u,description:m,pubDate:c.createdAt,category:c.tags.map(e=>e.title),link:e}});export{c as BASE_URL,u as fetchArticles,d as getApiUrl,f as parseArticle};
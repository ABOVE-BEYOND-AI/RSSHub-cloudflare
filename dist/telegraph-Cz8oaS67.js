import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import{getSearchParams as i,rootUrl as a}from"./utils-C_M_Hqf8.js";import o from"node:path";const s={watch:`看盘`,announcement:`公司`,explain:`解读`,red:`加红`,jpush:`推送`,remind:`提醒`,fund:`基金`,hk:`港股`},c={path:`/telegraph/:category?`,categories:[`finance`],example:`/cls/telegraph`,parameters:{category:`分类，见下表，默认为全部`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cls.cn/telegraph`,`cls.cn/`],target:`/telegraph`}],name:`电报`,maintainers:[`nczitzk`],handler:l,url:`cls.cn/telegraph`,description:`| 看盘  | 公司         | 解读    | 加红 | 推送  | 提醒   | 基金 | 港股 |
| ----- | ------------ | ------- | ---- | ----- | ------ | ---- | ---- |
| watch | announcement | explain | red  | jpush | remind | fund | hk   |`};async function l(c){let l=c.req.param(`category`)??``,u=c.req.query(`limit`)?Number.parseInt(c.req.query(`limit`)):50,d=`${a}/nodeapi/updateTelegraphList`;l&&(d=`${a}/v1/roll/get_roll_list`);let f=`${a}/telegraph`,p=await r({method:`get`,url:d,searchParams:i({category:l,hasFirstVipArticle:1})}),m=p.data.data.roll_data.slice(0,u).map(r=>({title:r.title||r.content,link:r.shareurl,description:e(o.join(n,`templates/telegraph-f8ba0f7b.art`),{item:r}),pubDate:t(r.ctime*1e3),category:r.subjects?.map(e=>e.subject_name)}));return{title:`财联社 - 电报${l===``?``:` - ${s[l]}`}`,link:f,item:m}}export{c as route};
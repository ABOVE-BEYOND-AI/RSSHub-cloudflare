import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as t}from"./esm-shims-BDPl6Msv.js";import{got_default as n}from"./got-BaOFZRd4.js";import r from"node:path";import{load as i}from"cheerio";const a={new:`index_discount.html`,hot:`index_popular.html`,hot_chinese:`index_popular_cn.html`,low:`index_low.html`,low_chinese:`index_low_cn.html`},o={path:`/:type`,categories:[`game`],example:`/yxdzqb/popular_cn`,parameters:{type:`折扣类型`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`yxdzqb.com/`]}],name:`游戏折扣`,maintainers:[`LogicJake`,`nczitzk`],handler:s,url:`yxdzqb.com/`,description:`| Steam 最新折扣 | Steam 热门游戏折扣 | Steam 热门中文游戏折扣 | Steam 历史低价 | Steam 中文游戏历史低价 |
| -------------- | ------------------ | ---------------------- | -------------- | ---------------------- |
| discount       | popular            | popular_cn            | low            | low_cn                |`};async function s(o){let s=o.req.param(`type`),c=`https://www.yxdzqb.com/${Object.hasOwn(a,s)?a[s]:`index_${s}.html`}`,l=await n.get(c),u=i(l.data),d=u(`.btn-primary b`).text()||u(`.btn-danger b`).text()||u(`.btn-info b`).text(),f=u(`tr.bg-none`),p=f.toArray().map(n=>{n=u(n);let i=n.find(`div table:nth-child(1) tr td:nth-child(1)`).text(),a=e(r.join(t,`templates/description-994b84e5.art`),{src:n.find(`table.cell_tabs > tbody > tr > td:nth-child(1) > img`).attr(`src`),description:n.find(`div.collapse`).html()}),o=n.find(`div.collapse table.cell_tabs > tbody > tr > td:nth-child(1) > a`).attr(`href`),s=o+n.find(`div.cell_price span:nth-child(2)`).text(),c={title:i,description:a,link:o,guid:s};return c});return{title:`${d}-游戏打折情报`,link:c,item:p}}export{o as route};
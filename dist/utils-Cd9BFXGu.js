import{art as e}from"./render-DE4LRFBD.js";import{__dirname as t}from"./esm-shims-BDPl6Msv.js";import{got_default as n}from"./got-BaOFZRd4.js";import r from"node:path";import{load as i}from"cheerio";const a=(a,o)=>o(a.link,async()=>{let o=await n(a.link,{responseType:`buffer`}),s=i(o.data);s(`.post_main img`).each((e,t)=>{if(!t.attribs.src)return;let n=new URL(t.attribs.src);n.host===`nimg.ws.126.net`&&(t.attribs.src=n.searchParams.get(`url`))});let c=a.imgsrc?new URL(a.imgsrc).searchParams.get(`url`):!1;return a.description=e(r.join(t,`templates/dy-b6e04c69.art`),{imgsrc:c,postBody:s(`.post_body`).html()}),a.feedLink=s(`.post_wemedia_name a`).attr(`href`),a.feedDescription=s(`.post_wemedia_title`).text(),a.feedImage=s(`.post_wemedia_avatar img`).attr(`src`),a});export{a as parseDyArticle};
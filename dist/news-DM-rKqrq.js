import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{timezone as a}from"./timezone-BrxBCotj.js";import{ViewType as o}from"./types-D9T3SQ-7.js";import s from"node:path";import{load as c}from"cheerio";const l=async o=>{let{category:l=`new`}=o.req.param(),u=Number.parseInt(o.req.query(`limit`)??`30`,10),d=`https://www.ali213.net`,f=new URL(`news/${l.endsWith(`/`)?l:`${l}/`}`,d).href,p=await r(f),m=c(p),h=m(`html`).prop(`lang`)??`zh-CN`,g=m(`div.n_lone`).slice(0,u).toArray().map(e=>{let r=m(e),a=r.find(`h2.lone_t a`),o=a.prop(`title`)||a.text(),c=a.prop(`href`),l=r.find(`img`),u=l?.prop(`src`),d=l?.prop(`alt`),f=r.find(`div.lone_f_r_t`).text(),p=t(s.join(i,`templates/description-881baa33.art`),{images:l?[{src:u,alt:d}]:void 0,intro:f}),g=r.find(`div.lone_f_r_f span`).last().text().split(/：/).pop();return{title:o,description:p,pubDate:n(r.find(`div.lone_f_r_f span`).first().text()),link:c,author:g,content:{html:p,text:r.find(`div.lone_f_r_t`).text()},image:u,banner:u,language:h}});g=(await Promise.all(g.map(o=>!o.link&&typeof o.link!=`string`?o:e.tryGet(o.link,async()=>{try{let e=await r(o.link),l=c(e),u=l(`h1.newstit`).text(),d=l(`div#Content img`).first().prop(`src`),f=l(`div#Content p span img`),p={};f.length&&f.each((e,n)=>{let r=l(n),a=r.closest(`p`),o=r.prop(`src`),c=o?.split(/\./).pop();c&&o&&(p[c]={url:o},a.replaceWith(t(s.join(i,`templates/description-881baa33.art`),{images:[{src:o}]})))});let m=t(s.join(i,`templates/description-881baa33.art`),{description:l(`div#Content`).html()??``}),g=l(`div.extend_read ul li a`).toArray().map(e=>{let t=l(e);return{url:t.prop(`href`),type:`related`,content_html:t.prop(`title`)||t.text()}}).filter(e=>!0);return{...o,title:u,description:m,pubDate:a(n(l(`div.newstag_l`).text().split(/\s/)[0]),8),content:{html:m,text:l(`div#Content`).html()??``},image:d,banner:d,language:h,media:Object.keys(p).length>0?p:void 0,_extra:{links:g.length>0?g:void 0}}}catch{return o}})))).filter(e=>!0);let _=`游侠网`,v=m(`div.news-list-title`).text(),y=new URL(`news/images/ali213_app_big.png`,d).href;return{title:`${_} - ${v}`,description:v,link:f,item:g,allowEmpty:!0,image:y,author:_,language:h,id:f}},u={path:`/news/:category?`,name:`资讯`,url:`www.ali213.net`,maintainers:[`nczitzk`],handler:l,example:`/ali213/news/new`,parameters:{category:"分类，默认为 `new`，即最新资讯，可在对应分类页 URL 中找到"},description:`::: tip
若订阅 [游戏资讯](https://www.ali213.net/news/game/)，网址为 \`https://www.ali213.net/news/game/\`，请截取 \`https://www.ali213.net/news/\` 到末尾 \`/\` 的部分 \`game\` 作为 \`category\` 参数填入，此时目标路由为 [\`/ali213/news/game\`](https://rsshub.app/ali213/news/game)。
:::

| 分类名称 | 分类 ID |
| -------- | ------- |
| 最新资讯 | new     |
| 评测     | pingce  |
| 游戏     | game    |
| 动漫     | comic   |
| 影视     | movie   |
| 科技     | tech    |
| 电竞     | esports |
| 娱乐     | amuse   |
| 手游     | mobile  |
`,categories:[`game`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.ali213.net/news/:category`],target:e=>{let t=e.category;return`/news/${t?`/${t}`:``}`}},{title:`最新资讯`,source:[`www.ali213.net/news/new`],target:`/news/new`},{title:`评测`,source:[`www.ali213.net/news/pingce`],target:`/news/pingce`},{title:`游戏`,source:[`www.ali213.net/news/game`],target:`/news/game`},{title:`动漫`,source:[`www.ali213.net/news/comic`],target:`/news/comic`},{title:`影视`,source:[`www.ali213.net/news/movie`],target:`/news/movie`},{title:`科技`,source:[`www.ali213.net/news/tech`],target:`/news/tech`},{title:`电竞`,source:[`www.ali213.net/news/esports`],target:`/news/esports`},{title:`娱乐`,source:[`www.ali213.net/news/amuse`],target:`/news/amuse`},{title:`手游`,source:[`www.ali213.net/news/mobile`],target:`/news/mobile`}],view:o.Articles};export{l as handler,u as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{ViewType as a}from"./types-D9T3SQ-7.js";import o from"node:path";import{load as s}from"cheerio";const c=async a=>{let{category:c=`newly`}=a.req.param(),l=Number.parseInt(a.req.query(`limit`)??`30`,10),u=`https://www.199it.com`,d=new URL(c,u).href,f=await r(d),p=s(f),m=p(`html`).attr(`lang`)??`zh-CN`,h=[];h=p(`article.newsplus`).slice(0,l).toArray().map(e=>{let t=p(e),r=t.find(`h2.entry-title`).text(),i=t.find(`time.entry-date`).attr(`datetime`),a=t.find(`h2.entry-title a`).attr(`href`),o=t.find(`ul.post-categories li:not(submenu-parent)`).toArray(),s=[...new Set(o.map(e=>p(e).text()).filter(Boolean))],c=t.find(`img.attachment-post-thumbnail`).attr(`src`),l=i,d={title:r,pubDate:i?n(i):void 0,link:a?new URL(a,u).href:void 0,category:s,image:c,banner:c,updated:l?n(l):void 0,language:m};return d}),h=(await Promise.all(h.map(a=>a.link?e.tryGet(a.link,async()=>{let e=await r(a.link),c=s(e);c(`div.entry-content img.alignnone`).each((e,n)=>{let r=c(n);r.replaceWith(t(o.join(i,`templates/description-97150e54.art`),{images:r.attr(`src`)?[{src:r.attr(`src`),width:r.attr(`width`),height:r.attr(`height`)}]:void 0}))});let l=c(`h1.entry-title`).text(),u=c(`time.entry-date`).attr(`datetime`),d=c(`ul.post-categories li`).toArray(),f=[...new Set(d.map(e=>c(e).text()).filter(Boolean))],p=u,h={title:l,pubDate:u?n(u):a.pubDate,category:f,updated:p?n(p):a.updated,language:m},g=c(`ul.related_post li a`).toArray(),_=g.map(e=>{let t=c(e);return{url:t.attr(`href`),type:`related`,content_html:t.text()}}).filter(e=>!0);_&&(h={...h,_extra:{links:_}}),c(`ul.related_post`).parent().remove();let v=c(`div.entry-content`).html();return h={...h,description:v,content:{html:v,text:v}},{...a,...h}}):a))).filter(e=>!0);let g=p(`title`).text();return{title:g,description:p(`meta[name="description"]`).attr(`content`),link:d,item:h,allowEmpty:!0,image:p(`h3.site-title img`).attr(`src`),author:g.split(/-/).pop()?.trim(),language:m,id:d}},l={path:`/:category{.+}?`,name:`资讯`,url:`199it.com`,maintainers:[`nczitzk`],handler:c,example:`/199it/newly`,parameters:{category:{description:"分类，默认为 `newly`，即最新，可在对应分类页 URL 中找到",options:[{label:`最新`,value:`newly`},{label:`报告`,value:`archives/category/report`},{label:`新兴产业`,value:`archives/category/emerging`},{label:`金融科技`,value:`archives/category/fintech`},{label:`共享经济`,value:`archives/category/sharingeconomy`},{label:`移动互联网`,value:`archives/category/mobile-internet`},{label:`电子商务`,value:`archives/category/electronic-commerce`},{label:`社交网络`,value:`archives/category/social-network`},{label:`网络广告`,value:`archives/category/advertising`},{label:`投资&amp;经济，互联网金融`,value:`archives/category/economic-data`},{label:`服务`,value:`archives/category/service`},{label:`网络服务行业`,value:`archives/category/dataindustry`},{label:`用户研究`,value:`archives/category/internet-users`}]}},description:`:::tip
若订阅 [研究报告](https://www.199it.com/archives/category/report)，网址为 \`https://www.199it.com/archives/category/report\`，请截取 \`https://www.199it.com/archives/category/report\` 到末尾的部分 \`archives/category/report\` 作为 \`category\` 参数填入，此时目标路由为 [\`/199it/archives/category/report\`](https://rsshub.app/199it/archives/category/report)。
:::

<details>
  <summary>更多分类</summary>

| 分类                                                                              | ID                                                                                                      |
| --------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| [报告](http://www.199it.com/archives/category/report)                             | [archives/category/report](https://rsshub.app/199it/archives/category/report)                           |
| [新兴产业](http://www.199it.com/archives/category/emerging)                       | [archives/category/emerging](https://rsshub.app/199it/archives/category/emerging)                       |
| [金融科技](http://www.199it.com/archives/category/fintech)                        | [archives/category/fintech](https://rsshub.app/199it/archives/category/fintech)                         |
| [共享经济](http://www.199it.com/archives/category/sharingeconomy)                 | [archives/category/sharingeconomy](https://rsshub.app/199it/archives/category/sharingeconomy)           |
| [移动互联网](http://www.199it.com/archives/category/mobile-internet)              | [archives/category/mobile-internet](https://rsshub.app/199it/archives/category/mobile-internet)         |
| [电子商务](http://www.199it.com/archives/category/electronic-commerce)            | [archives/category/electronic-commerce](https://rsshub.app/199it/archives/category/electronic-commerce) |
| [社交网络](http://www.199it.com/archives/category/social-network)                 | [archives/category/social-network](https://rsshub.app/199it/archives/category/social-network)           |
| [网络广告](http://www.199it.com/archives/category/advertising)                    | [archives/category/advertising](https://rsshub.app/199it/archives/category/advertising)                 |
| [投资&amp;经济，互联网金融](http://www.199it.com/archives/category/economic-data) | [archives/category/economic-data](https://rsshub.app/199it/archives/category/economic-data)             |
| [服务](http://www.199it.com/archives/category/service)                            | [archives/category/service](https://rsshub.app/199it/archives/category/service)                         |
| [网络服务行业](http://www.199it.com/archives/category/dataindustry)               | [archives/category/dataindustry](https://rsshub.app/199it/archives/category/dataindustry)               |
| [用户研究](http://www.199it.com/archives/category/internet-users)                 | [archives/category/internet-users](https://rsshub.app/199it/archives/category/internet-users)           |

</details>
`,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.199it.com/:category`],target:e=>{let t=e.category;return`/199it${t?`/${t}`:``}`}},{title:`最新`,source:[`www.199it.com/newly`],target:`/newly`},{title:`报告`,source:[`www.199it.com/archives/category/report`],target:`/archives/category/report`},{title:`新兴产业`,source:[`www.199it.com/archives/category/emerging`],target:`/archives/category/emerging`},{title:`金融科技`,source:[`www.199it.com/archives/category/fintech`],target:`/archives/category/fintech`},{title:`共享经济`,source:[`www.199it.com/archives/category/sharingeconomy`],target:`/archives/category/sharingeconomy`},{title:`移动互联网`,source:[`www.199it.com/archives/category/mobile-internet`],target:`/archives/category/mobile-internet`},{title:`电子商务`,source:[`www.199it.com/archives/category/electronic-commerce`],target:`/archives/category/electronic-commerce`},{title:`社交网络`,source:[`www.199it.com/archives/category/social-network`],target:`/archives/category/social-network`},{title:`网络广告`,source:[`www.199it.com/archives/category/advertising`],target:`/archives/category/advertising`},{title:`投资&amp;经济，互联网金融`,source:[`www.199it.com/archives/category/economic-data`],target:`/archives/category/economic-data`},{title:`服务`,source:[`www.199it.com/archives/category/service`],target:`/archives/category/service`},{title:`网络服务行业`,source:[`www.199it.com/archives/category/dataindustry`],target:`/archives/category/dataindustry`},{title:`用户研究`,source:[`www.199it.com/archives/category/internet-users`],target:`/archives/category/internet-users`}],view:a.Articles};export{c as handler,l as route};
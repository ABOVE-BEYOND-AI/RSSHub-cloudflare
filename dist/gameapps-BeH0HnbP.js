import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{rss_parser_default as a}from"./rss-parser-Dx7FersL.js";import o from"node:path";import{load as s}from"cheerio";const c={path:`/`,example:`/gameapps`,radar:[{source:[`gameapps.hk/`]}],name:`最新消息`,maintainers:[`TonyRL`],handler:l,url:`gameapps.hk/`};async function l(){let c=`https://www.gameapps.hk`,l=await a.parseURL(`${c}/rss`),u=await Promise.all(l.items.map(a=>e.tryGet(a.link,async()=>{let e=await r(a.link,{headers:{Referer:c}}),l=s(e);a.title=l(`meta[property="og:title"]`).attr(`content`)??l(`.news-title h1`).text();let u=l(`.pagination li`).not(`.disabled`).not(`.active`).find(`a`).toArray().map(e=>`${c}${e.attribs.href}`);l(`.pages`).remove();let d=l(`.news-content`);if(delete a.content,delete a.contentSnippet,delete a.isoDate,u.length){let e=await Promise.all(u.map(async e=>{let t=await r(e,{headers:{referer:a.link}}),n=s(t);return n(`.pages`).remove(),n(`.news-content`).html()}));d.append(e)}return a.description=t(o.join(i,`templates/description-0048aaa9.art`),{intro:l(`div.introduction.media.news-intro div.media-body`).html()?.trim(),desc:d.html()?.trim()}),a.guid=a.guid.slice(0,a.link.lastIndexOf(`/`)),a.pubDate=n(a.pubDate),a.enclosure_url=l(`div.introduction.media.news-intro div.media-left`).find(`img`).attr(`src`),a.enclosure_type=`image/jpeg`,a})));return{title:l.title,link:l.link,description:l.description,image:`${c}/static/favicon/apple-touch-icon.png`,item:u,language:l.language}}export{c as route};
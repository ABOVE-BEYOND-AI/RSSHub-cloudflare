import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n,parseRelativeDate as r}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{got_default as a}from"./got-BaOFZRd4.js";import{timezone as o}from"./timezone-BrxBCotj.js";import s from"node:path";import{load as c}from"cheerio";import{CookieJar as l}from"tough-cookie";const u=new l,d={index:{name:``,link:`/instantnews/`,title:`即時香港中國 國際金融 股市經濟新聞`,description:`全天候即時港股、香港財經、國際金融和經濟新聞、中國經濟新聞資訊和分析`},stock:{name:`港股直擊`,link:`/instantnews/stock`,title:`即時香港股市 股份板塊 攻略分析`,description:`全天候即時港股追蹤和直擊分析，股份異動、大行報告、沽空、速評`},hongkong:{name:`香港財經`,link:`/instantnews/hongkong`,title:`即時香港經濟 中港經濟融合追蹤分析`,description:`香港經濟和焦點行業 中港融合和商機的分析`},china:{name:`中國財經`,link:`/instantnews/china`,title:`即時中國經濟 國策焦點 中港融合追蹤分析`,description:`香港經濟和焦點行業 中港融合和商機的分析`},international:{name:`國際財經`,link:`/instantnews/international`,title:`即時國際財經 股市匯市 央行政策`,description:`國際財經 金融股市 央行政策的新聞和分析`},property:{name:`地產新聞`,link:`/property/news`,title:`地產投資`,description:`即時地產新聞, 新盤資訊, 樓市分析, 藍籌屋苑數據及室內設計鑑賞`},current:{name:`時事脈搏`,link:`/instantnews/current`,title:`即時香港中國 國際金融 股市經濟新聞`,description:`全天候即時香港股市、金融、經濟新聞資訊和分析，致力與讀者一起剖釋香港、關注兩岸、放眼全球政經格局`}},f={path:`/:category?`,categories:[`traditional-media`],example:`/hkej/index`,parameters:{category:`分类，默认为全部新闻`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`hkej.com/`]}],name:`即时新闻`,maintainers:[`TonyRL`],handler:p,url:`hkej.com/`,description:`| index    | stock    | hongkong | china    | international | property | current  |
| -------- | -------- | -------- | -------- | ------------- | -------- | -------- |
| 全部新闻 | 港股直击 | 香港财经 | 中国财经 | 国际财经      | 地产新闻 | 时事脉搏 |`};async function p(l){let f=l.req.param(`category`)??`index`,p=d[f],m=`https://www2.hkej.com`,h=await a({method:`get`,url:m+p.link,headers:{Referer:m},cookieJar:u}),g=c(h.data),_=g(`h3.in_news_u_t a, h4.hkej_hl-news_topic_2014 a, div.hkej_toc_listingAll_news2_2014 h3 a, div.hkej_toc_cat_top_detail h3 a, div.allNews div.news h1 a, div#div_listingAll div.news2 h3 a`).toArray().map(e=>(e=g(e),{title:e.text().trim(),link:m+e.attr(`href`).slice(0,e.attr(`href`).lastIndexOf(`/`))})),v=e=>t(s.join(i,`templates/articleImg-cbd9e08e.art`),{pics:e}),y=(e,n)=>t(s.join(i,`templates/description-d7fb5ed6.art`),{pics:v(e),desc:n}),b=await Promise.all(_&&_.map(t=>e.tryGet(t.link,async()=>{let e=await a({method:`get`,url:t.link,headers:{Referer:p.link},cookieJar:u}),i=c(e.data);i(`#ad_popup`).remove(),i(`[class^=ad-]`).remove(),i(`[id^=ad-]`).remove(),i(`[id^=div-gpt-ad-]`).remove(),i(`.hkej_sub_ex_article_nonsubscriber_ad_2014`).remove();let s=(i(`div.hkej_detail_thumb_2014 td a`).length?i(`div.hkej_detail_thumb_2014 td a`):i(`div.thumb td a`)).toArray().map(e=>(e=g(e),{href:e.attr(`href`),title:e.attr(`title`)})),l=i(`p.info span.date`).text().trim();return t.category=i(`p.info span.cate a`).toArray().map(e=>i(e).text().trim()),t.description=y(s,i(`div#article-content`).html()),t.pubDate=o(/(今|昨)/.test(l)?r(l):n(l,`YYYY M D`),8),t}))),x={title:`信報網站 - ${p.title} - 信報網站 hkej.com`,link:m+p.link,description:`信報網站(www.hkej.com)即時新聞${p.name}，提供${p.description}。`,item:b,language:`zh-hk`};return l.set(`json`,{...x,cookieJar:u}),x}export{f as route};
import{config as e}from"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as t}from"./cache-C3AIQtoX.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{got_default as a}from"./got-BaOFZRd4.js";import o from"node:path";import{load as s}from"cheerio";const c=(e,t)=>n(o.join(i,`templates/description-7ea94b3d.art`),{description:e,images:t}),l={path:`/search/:keyword`,categories:[`other`],example:`/sogou/search/rss`,parameters:{keyword:`搜索关键词`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`搜索`,maintainers:[`CaoMeiYouRen`],handler:u};async function u(n){let i=n.req.param(`keyword`),o=`https://www.sogou.com/web?query=${encodeURIComponent(i)}`,l=`sogou-search:${o}`,u=await t.tryGet(l,async()=>{let e=(await a(o)).data,t=s(e),n=t(`#main`);return n.find(`.vrwrap`).toArray().map(e=>{let n=t(e),i=n.find(`img`).toArray().map(e=>t(e).attr(`src`)),a=n.find(`h3 a`).first().attr(`href`),o=n.find(`h3`).first().text(),s=n.find(`.text-layout`).first().text()||n.find(`.space-txt`).first().text()||n.find(`[class^="translate"]`).first().text(),l=n.find(`.citeurl span`).first().text()||``,u=r(n.find(`.citeurl .cite-date`).first().text().trim());return{link:a,title:o,description:c(s,i),author:l,pubDate:u}}).filter(e=>e?.link)},e.cache.routeExpire,!1);return{title:`${i} - 搜狗搜索`,description:`${i} - 搜狗搜索`,link:o,item:u}}export{l as route};
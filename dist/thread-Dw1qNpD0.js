import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import{countReplies as i,viewThread as a}from"./query-CQPKTgz4.js";import o from"node:path";const s={path:`/thread/:id`,radar:[{source:[`lkong.com/thread/:id`,`lkong.com/`]}],name:`Unknown`,maintainers:[`nczitzk`,`ma6254`],handler:c};async function c(s){let c=s.req.param(`id`),l=`https://www.lkong.com`,u=`https://api.lkong.com/api`,d=`${l}/thread/${c}`,f=await r({method:`post`,url:u,json:i(c)});if(f.data.errors)throw Error(f.data.errors[0].message);let p=await r({method:`post`,url:u,json:a(c,Math.ceil(f.data.data.thread.replies/20))}),m=p.data.data.posts.map(r=>({guid:r.pid,author:r.user.name,title:`#${r.lou} ${r.user.name}`,link:`${l}/thread/${c}?pid=${r.pid}`,pubDate:t(r.dateline),description:(r.quote?e(o.join(n,`templates/quote-0d63bb36.art`),{target:`${l}/thread/${c}?pid=${r.quote.pid}`,author:r.quote.author.name,content:e(o.join(n,`templates/content-b0aebebb.art`),{content:JSON.parse(r.quote.content)})}):``)+e(o.join(n,`templates/content-b0aebebb.art`),{content:JSON.parse(r.content)})}));return{title:`${p.data.data.thread.title} - 龙空`,link:d,item:m}}export{s as route};
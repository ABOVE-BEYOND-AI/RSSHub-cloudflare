import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{ofetch_default as n}from"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import i from"node:path";async function a(a){let o=`https://go-api.twreporter.org/v2/posts/${a}?full=true`,s=await n(o),c=s.data,l=c.published_date,u=``;c.writers&&(u=c.writers.map(e=>e.job_title?e.job_title+` / `+e.name:`文字 / `+e.name).join(`，`));let d=``;c.photographers&&(d=c.photographers.map(e=>{let t=`攝影 / `;return e.job_title&&(t=e.job_title+` / `),t+e.name}).join(`，`),u+=`；`+d);let f=c.hero_image.resized_targets.desktop.url,p=c.leading_image_description,m=c.hero_image.description,h=c.og_description,g=e(i.join(r,`templates/image-51014ea7.art`),{image:f,description:m,caption:p});function _(t,n){let a=``;if(n!==``&&t!==`embeddedcode`)switch(t){case`image`:case`slideshow`:a=n.map(t=>e(i.join(r,`templates/image-51014ea7.art`),{image:t.desktop.url,description:t.description,caption:t.description})).join(`<br>`);break;case`blockquote`:a=`<blockquote>${n}</blockquote>`;break;case`header-one`:a=`<h1>${n}</h1>`;break;case`header-two`:a=`<h2>${n}</h2>`;break;case`infobox`:{let e=n[0];a=`<h2>${e.title}</h2>${e.body}`;break}case`youtube`:{let t=n[0].youtubeId,o=t.split(`?`)[0];a=e(i.join(r,`templates/youtube-b2c9673c.art`),{video:o});break}case`quoteby`:{let e=n[0];a=`<blockquote>${e.quote}</blockquote><p>${e.quoteBy}</p>`;break}default:a=`${n}<br>`}return a}let v=c.content.api_data.map(e=>{let t=e.content,n=e.type;return _(n,t)}).filter(Boolean).join(`<br>`),y=[g,h,v].filter(Boolean).join(`<br><br>`);return{author:u,description:y,link:`https://www.twreporter.org/a/${a}`,guid:`https://www.twreporter.org/a/${a}`,pubDate:t(l,`YYYY-MM-DDTHH:mm:ssZ`)}}export{a as fetch};
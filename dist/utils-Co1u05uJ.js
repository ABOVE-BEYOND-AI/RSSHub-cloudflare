import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";const a=`otobanana.com`,o=`https://api.${a}`,s=`https://${a}`,c=(e,t)=>t(`otobanana:user:${e}`,async()=>{let{data:t}=await r(`${o}/users/${e}/`);return t}),l=r=>({title:r.title,description:e(i.join(n,`templates/description-161b5c63.art`),{cast:r}),pubDate:t(r.created_at),link:`https://otobanana.com/cast/${r.id}`,author:`${r.user.name} (@${r.user.username})`,itunes_item_image:r.thumbnail_url,itunes_duration:r.duration_time,enclosure_url:r.audio_url,enclosure_type:`audio/x-m4a`,upvotes:r.like_count,comments:r.comment_count}),u=e=>({title:e.title,description:e.is_open?`配信中のライブ`:`終了しました`,pubDate:t(e.created_at),link:e.room_url,guid:`${e.room_url}#${e.id}`,author:`${e.user.name} (@${e.user.username})`,upvotes:e.like_count,comments:e.comment_count}),d=({id:e,type_label:n,cast:r,message:i})=>{switch(n){case`cast`:return l(r);case`message`:return{title:i.text.split(`
`)[0],description:i.text.replaceAll(`
`,`<br>`),pubDate:t(i.created_at),link:`https://otobanana.com/${n}/${e}`,author:`${i.user.name} (@${i.user.username})`,upvotes:i.like_count,comments:i.comment_count};default:throw Error(`Unknown post type: ${n}`)}};export{o as apiBase,s as baseUrl,c as getUserInfo,l as renderCast,u as renderLive,d as renderPost};
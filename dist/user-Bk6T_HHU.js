import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";const a={0:`动态`,7:`书评`,12:`视频`},o={path:`/user/:id/:type?`,categories:[`new-media`],example:`/dedao/user/VkA5OqLX4RyGxmZRNBMlwBrDaJQ9og`,parameters:{id:`用户 id，可在对应用户主页 URL 中找到`,type:"类型，见下表，默认为`0`，即动态"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`用户主页`,maintainers:[`nczitzk`],handler:s,description:`| 动态 | 书评 | 视频 |
| ---- | ---- | ---- |
| 0    | 7    | 12   |`};async function s(o){let s=o.req.param(`id`)??``,c=o.req.param(`type`)?Number.parseInt(o.req.param(`type`)):0,l=o.req.query(`limit`)?Number.parseInt(o.req.query(`limit`)):100,u=`https://m.igetget.com`,d=`${u}/native/mine/account#/user/detail?enId=${s}`,f=`${u}/native/api/homePage/topicNote`,p=`${u}/native/api/homePage/userInfo`,m=await r({method:`post`,url:p,json:{hazy:s}}),h=m.data,g=h.c.nickname,_=h.c.avatar,v=`${h.c.v_info}: ${h.c.slogan}`,y=await r({method:`post`,url:f,json:{uid:null,max_id_str:`0`,count:l,max_createtime:0,is_only_repost:0,load_chain:!0,load_tag:1,source:0,note_type:c,only_origin:!1,with_highlight:!0,hazy:s}}),b=y.data.c.list.map(r=>({author:g,title:r.content||r.note||r.extra.title,link:r.share_url,pubDate:t(r.create_time*1e3),description:e(i.join(n,`templates/user-7264910a.art`),{rootUrl:u,name:r.origin_notes_owner.name,vinfo:r.origin_notes_owner.Vinfo,content:r.content,note:r.note,extra:r.extra,video:r.video.video_cover})}));return{title:`${g}的得到主页 - ${a[c]}`,link:d,item:b,image:_,description:v,allowEmpty:!0}}export{o as route};
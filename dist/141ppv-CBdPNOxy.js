import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{getSubPath as n}from"./common-utils-C27Jp3s6.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s={path:`/:type/:keyword{.*}?`,categories:[`multimedia`],name:`通用`,maintainers:[`cgkings`,`nczitzk`],parameters:{type:`类型，可查看下表的类型说明`,keyword:`关键词，可查看下表的关键词说明`},handler:c,description:"**类型**\n\n| 最新 | 热门    | 随机   | 指定演员 | 指定标签 | 日期 |\n| ---- | ------- | ------ | -------- | -------- | ---- |\n| new  | popular | random | actress  | tag      | date |\n\n**关键词**\n\n| 空 | 日期范围    | 演员名       | 标签名         | 年月日     |\n| -- | ----------- | ------------ | -------------- | ---------- |\n|    | 7 / 30 / 60 | Yua%20Mikami | Adult%20Awards | 2020/07/30 |\n\n**示例说明**\n\n-  `/141ppv/new`\n\n      仅当类型为 `new` `popular` 或 `random` 时关键词为 **空**\n\n-  `/141ppv/popular/30`\n\n      `popular` `random` 类型的关键词可填写 `7` `30` 或 `60` 三个 **日期范围** 之一，分别对应 **7 天**、**30 天** 或 **60 天内**\n\n-  `/141ppv/actress/Yua%20Mikami`\n\n      `actress` 类型的关键词必须填写 **演员名** ，可在 [此处](https://141ppv.com/actress/) 演员单页链接中获取\n\n-  `/141ppv/tag/Adult%20Awards`\n\n      `tag` 类型的关键词必须填写 **标签名** 且标签中的 `/` 必须替换为 `%2F` ，可在 [此处](https://141ppv.com/tag/) 标签单页链接中获取\n\n-  `/141ppv/date/2020/07/30`\n\n      `date` 类型的关键词必须填写 **日期(年/月/日)**",features:{nsfw:!0}};async function c(s){let c=`https://www.141ppv.com`,l=s.req.param(`type`),u=s.req.param(`keyword`)??``,d=`${c}/${l}${u?`/${u}`:``}`,f=await i({method:`get`,url:d}),p=o(f.data);if(n(s)===`/`){s.set(`redirect`,`/141ppv${p(`.overview`).first().attr(`href`)}`);return}let m=p(`.columns`).toArray().map(n=>{n=p(n);let i=n.find(`.title a`).text(),o=n.find(`.title span`).text(),s=n.find(`.subtitle a`).attr(`href`).split(`/date/`).pop(),l=n.find(`.has-text-grey-dark`).text(),u=n.find(`.panel-block`).toArray().map(e=>p(e).text().trim()),d=n.find(`.tag`).toArray().map(e=>p(e).text().trim()),f=n.find(`a[title="Magnet torrent"]`).attr(`href`),m=n.find(`a[title="Download .torrent"]`).attr(`href`),h=n.find(`.image`).attr(`onerror`),g=/this\.src='(.*?)'/,_=g.exec(h),v=_?_[1]:n.find(`.image`).attr(`src`);return{title:`${i} ${o}`,pubDate:t(s,`YYYY/MM/DD`),link:new URL(n.find(`a`).first().attr(`href`),c).href,description:e(a.join(r,`templates/description-bb12249e.art`),{image:v,id:i,size:o,pubDate:s,description:l,actresses:u,tags:d,magnet:f,link:m}),author:u.join(`, `),category:[...d,...u],enclosure_type:`application/x-bittorrent`,enclosure_url:f}});return{title:`141PPV - ${p(`title`).text().split(`-`)[0].trim()}`,link:d,item:m}}export{s as route};
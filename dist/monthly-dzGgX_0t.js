import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{ofetch_default as n}from"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{ViewType as i}from"./types-D9T3SQ-7.js";import a from"node:path";import{load as o}from"cheerio";const s=`https://bestofjs.org/rankings/monthly`,c={path:`/rankings/monthly`,categories:[`programming`],example:`/bestofjs/rankings/monthly`,view:i.Notifications,features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`bestofjs.org/rankings/monthly/:year/:month`],target:`/rankings/monthly`}],name:`Monthly Rankings`,maintainers:[`ztkuaikuai`],url:`bestofjs.org/rankings/monthly`,handler:async()=>{let e=l(),n=await Promise.all(e.map(e=>{let[t,n]=e.split(`-`);return u(t,n)})),i=n.flatMap((n,i)=>{let[o,c]=e[i].split(`-`),l=t(a.join(r,`templates/description-efeec4a1.art`),{items:n});return{title:`Best of JS Monthly Rankings - ${o}/${c}`,description:l,link:`${s}/${o}/${c}`,guid:`${s}/${o}/${c}`,author:`Best of JS`}});return{title:`Best of JS Monthly Rankings`,link:s,description:`Monthly rankings of the most popular JavaScript projects on Best of JS`,item:i,language:`en`}}},l=()=>{let e=new Date,t=e.getFullYear(),n=e.getMonth()+1;return Array.from({length:6},(e,r)=>{let i=n-(r+1),a=t;return i<=0&&(i+=12,--a),`${a}-${i}`})},u=(t,r)=>{let i=`${s}/${t}/${r}`;return e.tryGet(i,async()=>{let e=await n(i),t=o(e);return t(`table.w-full tbody tr[data-testid="project-card"]`).toArray().map(e=>{let n=t(e),r=n.find(`td:first img`).attr(`src`)?.replace(/.dark./,`.`)||``,i=n.find(`td:nth-child(2) a[href^="/projects/"]`).first(),a=i.text().trim(),o=n.find(`td:nth-child(2) a[href*="github.com"]`).attr(`href`)||``,s=n.find(`td:nth-child(2) a[href*="http"]:not([href*="github.com"])`).attr(`href`)||``,c=n.find(`td:nth-child(2) .font-serif`).text().trim(),l=n.find(`td:nth-child(2) [href*="/projects?tags="]`).toArray().map(e=>t(e).text().trim()),u=n.find(`td:nth-child(4) span:last`).text().trim()||n.find(`td:nth-child(2) .inline-flex span:last-child`).text().trim(),d=n.find(`td:nth-child(3) > div`).toArray().slice(1).map(e=>t(e).text().trim()).join(`; `);return{logo:r,projectName:a,githubLink:o,homepageLink:s,description:c,tags:l,starCount:u,additionalInfo:d}})})};export{c as route};
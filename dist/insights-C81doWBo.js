import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{invalid_parameter_default as a}from"./invalid-parameter-CfUmvEUg.js";import o from"node:path";import*as s from"cheerio";const c=`https://kpmg.com`,l={query:``,filters:{all:[{kpmg_tab_type:[`Insights`]},{kpmg_article_type:[`Article-General`]},{kpmg_template_type:[`article-details-template`,`insights-flexible-template`,`editable-flex-template`,`editable-campaign-template`]}]},result_fields:{kpmg_description:{raw:{}},kpmg_banner_flag:{raw:{}},kpmg_primary_tag:{raw:{}},kpmg_article_date:{raw:{}},kpmg_contact_job_ttl:{raw:{}},kpmg_title:{raw:{}},kpmg_contact_city:{raw:{}},kpmg_event_start_time:{raw:{}},kpmg_article_date_time:{raw:{}},kpmg_tab_type:{raw:{}},kpmg_short_desc:{raw:{}},kpmg_image_alt:{raw:{}},kpmg_url:{raw:{}},kpmg_template_type:{raw:{}},kpmg_image:{raw:{}},kpmg_non_decorative_alt_text:{raw:{}},kpmg_article_readtime:{raw:{}},kpmg_contact_fn:{raw:{}},kpmg_contact_ln:{raw:{}},kpmg_event_type:{raw:{}},kpmg_contact_country:{raw:{}},kpmg_is_rendition_optimized:{raw:{}},kpmg_article_primary_format:{raw:{}},kpmg_article_type:{raw:{}},kpmg_event_startdate:{raw:{}}},page:{size:20,current:1},sort:{kpmg_filter_date:`desc`}},u={en:{title:`Insights - KPMG `,link:`${c}/xx/en/home/insights.html`,api:`${c}/esearch/xx-en`},zh:{title:`洞察 - 毕马威`,link:`${c}/cn/zh/home/insights.html`,api:`${c}/esearch/cn-zh`}},d=e=>t(o.join(i,`templates/description-46570299.art`),e),f=async t=>{let{lang:i=`en`}=t.req.param(),o=u[i];if(!o)throw new a(`Invalid language`);let c=o.link,f=await r(o.api,{method:`POST`,body:l}),p=f.results.map(e=>({title:e.kpmg_title.raw,description:e.kpmg_description.raw,link:e.kpmg_url.raw,pubDate:n(e.kpmg_article_date_time.raw),image:e.kpmg_image.raw,imageAlt:e.kpmg_image_alt?.raw})),m=await Promise.all(p.map(t=>e.tryGet(t.link,async()=>{let e=await r(t.link),n=s.load(e),i=n(`.bodytext-data`).toArray().map(e=>{let t=n(e);return t.find(`.hidden-xs, .sr-only`).remove(),t.parent().html()}).join(``),a=n(`.pdfdetails`).parent().parent().parent();return a.find(`.hidden-xs, .sr-only`).remove(),t.description=d({image:t.image,alt:t.imageAlt,content:i,pdf:a.prop(`outerHTML`)}),t})));return{title:`KPMG Insights`,link:c,item:m}},p={path:`/insights/:lang?`,example:`/kpmg/insights`,parameters:{lang:"Language, either `en` or `zh`"},radar:[{source:[`kpmg.com/xx/en/home/insights.html`],target:`/insights/en`},{source:[`kpmg.com/cn/zh/home/insights.html`],target:`/insights/zh`}],name:`Insights`,maintainers:[`LogicJake`],handler:f,url:`kpmg.com/xx/en/home/insights.html`,zh:{name:`洞察`}};export{p as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{art as e}from"./render-DE4LRFBD.js";import{ofetch_default as t}from"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{ViewType as r}from"./types-D9T3SQ-7.js";import i from"node:path";import{load as a}from"cheerio";const o=async r=>{let{filter:o=`order=sell_desc`}=r.req.param(),s=Number.parseInt(r.req.query(`limit`)??`24`,10),c=`https://www.bookwalker.com.tw`,l=new URL(`search?${o}`,c).href,u=await t(l),d=a(u),f=d(`html`).attr(`lang`)??`zh-TW`,p=d(`div.bwbook_package`).slice(0,s).toArray().map(t=>{let r=d(t),a=r.find(`h4.bookname`).text(),o=r.find(`h5.bprice`).text(),s=r.find(`h5.booknamesub`).text().trim(),l=`${a} - ${s} ${o}`,u=r.find(`img`).attr(`data-src`)?.replace(/_\d+(\.\w+)$/,`$1`),p=e(i.join(n,`templates/description-463c9506.art`),{images:u?[{src:u,alt:a}]:void 0}),m=r.find(`div.bwbookitem a`).attr(`href`),h=s.split(/,/).map(e=>({name:e})),g={title:l,description:p,link:m?new URL(m,c).href:void 0,author:h,content:{html:p,text:p},image:u,banner:u,language:f};return g});return{title:d(`title`).text(),description:d(`meta[property="og:description"]`).attr(`content`),link:l,item:p,allowEmpty:!0,image:d(`meta[property="og:image"]`).attr(`content`),author:d(`meta[property="og:site_name"]`).attr(`content`),language:f,id:d(`meta[property="og:url"]`).attr(`content`)}},s={path:`/search/:filter?`,name:`搜尋`,url:`www.bookwalker.com.tw`,maintainers:[`nczitzk`],handler:o,example:`/bookwalker/search/order=sell_desc&s=34`,parameters:{filter:{description:"过滤器，默认为 `order=sell_desc`，即依發售日新至舊排序"}},description:":::tip\n订阅 [依發售日新至舊排序的文學小說](https://www.bookwalker.com.tw/search?order=sell_desc&s=34)，其源网址为 `https://www.bookwalker.com.tw/search?order=sell_desc&s=34`，请参考该 URL 指定部分构成参数，此时路由为 [`/bookwalker/search/order=sell_desc&s=34`](https://rsshub.app/bookwalker/search/order=sell_desc&s=34)。\n:::\n",categories:[`shopping`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.bookwalker.com.tw/search`],target:`/bookwalker/search`}],view:r.Articles};export{o as handler,s as route};
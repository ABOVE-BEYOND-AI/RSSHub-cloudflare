import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as t}from"./esm-shims-BDPl6Msv.js";import{got_default as n}from"./got-BaOFZRd4.js";import r from"node:path";import{load as i}from"cheerio";const a={path:`/new-arrivals/:query?`,categories:[`shopping`],example:`/zagg/new-arrivals/brand=164&cat=3038,3041`,parameters:{query:`query, search page querystring`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`New Arrivals`,maintainers:[`EthanWng97`],handler:o,description:"For instance, in `https://www.zagg.com/en_us/new-arrivals?brand=164&cat=3038%2C3041`, the query is `brand=164&cat=3038%2C3041`"};async function o(a){let o=a.req.param(`query`),s=new URLSearchParams(o),c=s.get(`brand`),l=s.get(`cat`),u=await n({headers:{"X-Requested-With":`XMLHttpRequest`},method:`post`,url:`https://www.zagg.com/en_us/new-arrivals`,searchParams:{cat:l,brand:c}}),d=u.data.products,f=i(d),p=f(`.item.product.product-item`).toArray().map(n=>{let i={},a=f(n).find(`.product.details-box`).html();i.link=f(n).find(`.product-item-link`).eq(0).attr(`href`),i.title=f(n).find(`.product-item-link`).text();let o=/(https.*?)\?/,s=f(n).find(`img`).eq(0).attr(`data-src`).match(o)[1],c=e(r.join(t,`templates/new-arrivals-5b741265.art`),{imgUrl:s});return i.description=a+c,i});return{title:`Zagg - New Arrivals`,link:u.url,description:`Zagg - New Arrivals`,item:p.map(e=>({title:e.title,description:e.description,link:e.link}))}}export{a as route};
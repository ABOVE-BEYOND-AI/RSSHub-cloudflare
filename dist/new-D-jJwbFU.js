import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./proxy-BQXcrhTu.js";import{art as e}from"./render-DE4LRFBD.js";import{__dirname as t}from"./esm-shims-BDPl6Msv.js";import{puppeteer_default as n}from"./puppeteer-BAoY_Fpy.js";import r from"node:path";import*as i from"cheerio";const a=`dm514/new`,o={path:`/new`,categories:[`multimedia`],example:`/missav/new`,features:{requireConfig:!1,requirePuppeteer:!0,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,nsfw:!0},radar:[{source:[`missav.ws/${a}`,`missav.ws/new`,`missav.ws/`]},{source:[`missav.ai/${a}`,`missav.ai/new`,`missav.ai/`]}],name:`最近更新`,maintainers:[`TonyRL`],handler:s,url:`missav.ws/dm397/new`};async function s(){let o=`https://missav.ws`,s=`${o}/${a}`,c=await n(),l=await c.newPage();await l.setRequestInterception(!0),l.on(`request`,e=>{e.resourceType()===`document`||e.resourceType()===`script`||e.resourceType()===`xhr`?e.continue():e.abort()}),await l.goto(s,{waitUntil:`domcontentloaded`});let u=await l.evaluate(()=>document.documentElement.innerHTML);await c.close();let d=i.load(u),f=d(`.grid .group`).toArray().map(n=>{let i=d(n),a=i.find(`.text-secondary`),o=new URL(i.find(`img`).data(`src`));o.searchParams.set(`class`,`normal`);let s=i.find(`video`).data(`src`);return{title:a.text().trim(),link:a.attr(`href`),description:e(r.join(t,`templates/preview-33dc747c.art`),{poster:o.href,video:s,type:s.split(`.`).pop()})}});return{title:d(`head title`).text(),description:d(`head meta[name="description"]`).attr(`content`),link:o,item:f}}export{o as route};
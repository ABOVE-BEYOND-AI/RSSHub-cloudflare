import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import o from"dayjs";import s from"dayjs/plugin/customParseFormat.js";o.extend(s);const c=e=>t(a.join(r,`templates/description-db72f51b.art`),e),l={path:`/pair/:source/:target`,categories:[`other`],example:`/wise/pair/GBP/USD`,parameters:{source:`Base currency abbreviation`,target:`Quote currency abbreviation`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`FX Pair Yesterday`,maintainers:[`HenryQW`],handler:u,description:`Refer to [the list of supported currencies](https://wise.com/tools/exchange-rate-alerts/).`};async function u(t){let r=o().subtract(1,`day`),a=r.subtract(1,`day`).format(`YYYY-MM-DD`);r=r.format(`YYYY-MM-DD`);let s=t.req.param(`source`).toUpperCase(),l=t.req.param(`target`).toUpperCase(),u=`https://wise.com/tools/exchange-rate-alerts/`,d=`wise:rates:${t.req.param(`source`)}-${t.req.param(`target`)}-${r}`,f=await e.tryGet(d,async()=>{let{data:e}=await i(`https://wise.com/rates/history`,{searchParams:{source:s,target:l,length:1,unit:`year`,resolution:`daily`},headers:{referer:u}}),t=e.at(-1),o=e.at(-2),f=t.value,p=o.value,m=f>p,h=(f-p)/f,g=(Math.abs(h)*100).toFixed(4);return{title:`${s}/${l} ${m?`ðŸ“ˆ`:`ðŸ“‰`} @${f} ${h>0?``:`-`}${g}%`,description:c({source:s,target:l,yesterday:r,yRate:f,dayBefore:a,byRate:p}),pubDate:n(t.time,`x`),guid:d,link:u}});return{title:`${s} to ${l} by Wise`,link:u,description:`Exchange Rate from Wise`,item:[f]}}export{l as route};
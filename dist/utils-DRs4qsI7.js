import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import a from"node:path";import{load as o}from"cheerio";const s=`https://dribbble.com`;async function c(e){let s=await r(e),c=o(s),l=JSON.parse(c(`script`).text().match(/shotData:\s({.+?}),\n/)?.[1]??`{}`),u=c(`.media-shot, .main-shot, .block-media-wrapper`).toArray().map(e=>{let t=c(e);return t.find(`span.cropped-indicator, button`).remove(),t.find(`video`).each((e,t)=>{t=c(t),!t.attr(`src`)&&t.data(`src`)&&(t.attr(`src`,t.data(`src`)),t.removeAttr(`data-src`),t.removeAttr(`data-video-small`),t.removeAttr(`data-video-medium`),t.removeAttr(`data-video-large`))}),t.find(`img`).each((e,t)=>{t=c(t),t.data(`animated-url`)&&(t.attr(`src`,t.data(`animated-url`)),t.removeAttr(`data-animated-url`),t.removeAttr(`srcset`)),!t.attr(`src`)&&t.data(`src`)&&(t.attr(`src`,t.data(`src`).split(`?`)[0]),t.removeAttr(`data-src`)),t.attr(`src`,t.attr(`src`).split(`?`)[0]),t.removeAttr(`srcset`),t.removeAttr(`data-srcset`)}),t.find(`a`).each((e,t)=>{t=c(t),t.removeAttr(`data-pswp-srcset`)}),t.html()}).join(``),d=c(`.shot-description-container`),f=`${l.shotUser.name}${l.shotUser.team.length?` for ${l.shotUser.team.name}`:``}`,p=t(a.join(i,`templates/description-4f32d945.art`),{shotMedia:u,shotData:l,description:d}),m=n(l.postedOn);return{description:p,pubDate:m,author:f,category:l.tags}}function l(t){return Promise.all(t.map(t=>{let n=o(t),r=n(t).data(`thumbnail-id`),i=new URL(`/shots/${r}`,s).href,a=new URL(n(t).find(`.shot-thumbnail-link`).attr(`href`),s).href;return e.tryGet(i,async()=>{let{description:e,pubDate:t,author:r,category:o}=await c(a);return{title:n(`.shot-title`).text(),link:a,guid:i,description:e,pubDate:t,author:r,category:o}})}))}const u=async(e,t)=>{let n=await r(e),i=o(n),a=i(`ol.dribbbles.group > li`).toArray(),s=await l(a);return{title:t,link:e,description:i(`meta[name="description"]`).attr(`content`),item:s}};var d={getData:u};export{d as utils_default};
import{config as e}from"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./proxy-BQXcrhTu.js";import{cache_default as t}from"./cache-C3AIQtoX.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{puppeteer_default as a}from"./puppeteer-BAoY_Fpy.js";import o from"node:path";import{load as s}from"cheerio";const c={path:`/journal/:id`,radar:[{source:[`pubs.acs.org/journal/:id`,`pubs.acs.org/`]}],name:`Unknown`,maintainers:[`nczitzk`],handler:l};async function l(c){let l=c.req.param(`id`)??``,u=`https://pubs.acs.org`,d=`${u}/toc/${l}/0/0`,f=``,p=await a(),m=await t.tryGet(d,async()=>{let e=await p.newPage();await e.setRequestInterception(!0),e.on(`request`,e=>{e.resourceType()===`document`||e.resourceType()===`script`?e.continue():e.abort()}),await e.goto(d,{waitUntil:`domcontentloaded`}),await e.waitForSelector(`.toc`);let t=await e.evaluate(()=>document.documentElement.innerHTML);await e.close();let a=s(t);return f=a(`meta[property="og:title"]`).attr(`content`),a(`.issue-item`).toArray().map(e=>{e=a(e);let t=e.find(`.issue-item_title a`),s=e.find(`input[name="doi"]`).attr(`value`);return{doi:s,guid:s,title:t.text(),link:`${u}${t.attr(`href`)}`,pubDate:r(e.find(`.pub-date-value`).text(),`MMMM D, YYYY`),author:e.find(`.issue-item_loa li`).toArray().map(e=>a(e).text()).join(`, `),description:n(o.join(i,`templates/description-78b7ee2b.art`),{image:e.find(`.issue-item_img`).html(),description:e.find(`.hlFld-Abstract`).html()})}})},e.cache.routeExpire,!1);return await p.close(),{title:f,link:d,item:m}}export{c as route};
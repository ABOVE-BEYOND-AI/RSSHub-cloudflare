import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./cache-C3AIQtoX.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{API_HOST as r,CDN_HOST as i,HOST as a,customFetch as o,parseUserData as s}from"./utils-CTZpSrpl.js";import c from"node:path";const l={path:[`/timeline/:user`],categories:[`social-media`],example:`/cara/timeline/fengz`,parameters:{user:`username`},name:`Timeline`,maintainers:[`KarasuShin`],handler:u,radar:[{source:[`cara.app/:user`,`cara.app/:user/*`],target:`/timeline/:user`}]};async function u(l){let u=l.req.param(`user`),d=l.req.query(`limit`)?Number.parseInt(l.req.query(`limit`),10):15,f=await s(u),p=`${r}/posts/getAllByUser?slug=${f.slug}&take=${d}`,m=await o(p),h=m.data.map(r=>{let o=e(c.join(n,`templates/post-1d7f2a4f.art`),{content:r.content,images:r.images.filter(e=>!e.isCoverImg).map(e=>({...e,src:`${i}/${e.src}`}))});return{title:r.title||r.content,pubDate:t(r.createdAt),link:`${a}/post/${r.id}`,description:o}});return{title:`Timeline - ${f.name}`,link:`${a}/${u}/all`,image:`${i}/${f.photo}`,item:h}}export{l as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import"./got-BaOFZRd4.js";import{ViewType as i}from"./types-D9T3SQ-7.js";import{getFeed as a,getFeedGenerator as o,resolveHandle as s}from"./utils-yHcS4cTQ.js";import c from"node:path";const l={path:`/profile/:handle/feed/:space/:routeParams?`,categories:[`social-media`],view:i.SocialMedia,example:`/bsky.app/profile/jaz.bsky.social/feed/cv:cat`,parameters:{handle:`User handle, can be found in URL`,space:`Space ID, can be found in URL`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Feeds`,maintainers:[`FerrisChi`],handler:u};async function u(i){let l=i.req.param(`handle`),u=i.req.param(`space`),d=await s(l,e.tryGet),f=`at://${d}/app.bsky.feed.generator/${u}`,p=await o(f,e.tryGet),m=await a(f,e.tryGet),h=m.feed.map(({post:e})=>({title:e.record.text.split(`
`)[0],description:t(c.join(r,`templates/post-7b0043bb.art`),{text:e.record.text.replaceAll(`
`,`<br>`),embed:e.embed}),author:e.author.displayName,pubDate:n(e.record.createdAt),link:`https://bsky.app/profile/${e.author.handle}/post/${e.uri.split(`app.bsky.feed.post/`)[1]}`,upvotes:e.likeCount,comments:e.replyCount}));return i.set(`json`,{DID:d,profile:p,feeds:m}),{title:`${p.view.displayName} â€” Bluesky`,description:p.view.description?.replaceAll(`
`,` `),link:`https://bsky.app/profile/${l}/feed/${u}`,image:p.view.avatar,icon:p.view.avatar,logo:p.view.avatar,item:h,allowEmpty:!0}}export{l as route};
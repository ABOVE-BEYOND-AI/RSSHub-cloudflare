import{config as e}from"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import a from"node:path";const o={path:`/post/list/:sort?`,example:`/bc3ts/post/list`,parameters:{sort:"排序方式，`1` 為最新，`2` 為熱門，默认為 `1`"},features:{antiCrawler:!0},radar:[{source:[`web.bc3ts.net`]}],name:`動態`,maintainers:[`TonyRL`],handler:l},s=`https://web.bc3ts.net`,c=e=>t(a.join(i,`templates/media-50bba4a6.art`),{media:e});async function l(t){let{sort:i=`1`}=t.req.param(),a=t.req.query(`limit`)?Number.parseInt(t.req.query(`limit`),10):20,o=await r(`https://app.bc3ts.net/post/list/v2`,{headers:{apikey:`zlF+kaPfem%23we$2@90irpE*_RGjdw`,app_version:`3.0.28`,version:`2.0.0`,"User-Agent":e.trueUA},query:{limits:a,sort_type:i}}),l=o.data.map(e=>({title:e.title??e.content.split(`
`)[0],description:e.content.replaceAll(`
`,`<br>`)+(e.media.length&&c(e.media)),link:`${s}/post/${e.id}`,author:e.user.name,pubDate:n(e.created_time,`x`),category:e.group.name,upvotes:e.like_count,comments:e.comment_count}));return{title:`爆料公社${i===`1`?`最新`:`熱門`}動態`,link:s,language:`zh-TW`,image:`https://img.bc3ts.net/image/web/main/logo-white-new-2023.png`,icon:`https://img.bc3ts.net/image/web/main/logo/logo_icon_6th_2024_192x192.png`,item:l}}export{o as route};
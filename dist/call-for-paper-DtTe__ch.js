import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as t}from"./esm-shims-BDPl6Msv.js";import{got_default as n}from"./got-BaOFZRd4.js";import r from"node:path";import{load as i}from"cheerio";const a={path:`/call-for-paper/:subject`,categories:[`journal`],example:`/sciencedirect/call-for-paper/education`,parameters:{subject:`学科分类，例如“education”`},radar:[{source:[`sciencedirect.com`]}],name:`Call for Papers`,maintainers:[`etShaw-zh`],handler:o,url:`sciencedirect.com/browse/calls-for-papers`,description:"`sciencedirect.com/browse/calls-for-papers?subject=education` -> `/sciencedirect/call-for-paper/education`"};async function o(a){let{subject:o=``}=a.req.param(),s=`https://www.sciencedirect.com/browse/calls-for-papers?subject=${o}`,c={accept:`text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7`,"user-agent":`Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36`},l=await n(s,{headers:c}),u=i(l.body),d=u(`script[data-iso-key="_0"]`).text();if(!d)throw Error(`Cannot find the script with data-iso-key="_0"`);let f;try{f=JSON.parse(JSON.parse(d))}catch(e){throw Error(`Failed to parse embedded script JSON: ${e.message}`)}let p=f?.callsForPapers?.list||[];if(!p.length)throw Error(`No Calls for Papers found`);let m=p.map(n=>{let i=`https://www.sciencedirect.com/special-issue/${n.contentId}/${n.url}`,a=e(r.join(t,`templates/description-7826a6be.art`),{summary:n.summary,submissionDeadline:n.submissionDeadline,displayName:n.journal.displayName,impactFactor:n.journal.impactFactor,citeScore:n.journal.citeScore});return{title:n.title,author:`${n.journal.displayName} (IF: ${n.journal.impactFactor})`,link:i,description:a,pubDate:n.submissionDeadline||``}});return{title:`ScienceDirect Calls for Papers - ${o}`,link:s,description:`Calls for Papers on ScienceDirect for subject: ${o}`,item:m}}export{a as route};
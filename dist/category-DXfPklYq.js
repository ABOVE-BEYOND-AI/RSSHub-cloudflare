import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import{ViewType as a}from"./types-D9T3SQ-7.js";import o from"node:path";import{load as s}from"cheerio";const c={path:`/category/:category/:staffpicks?`,categories:[`social-media`],view:a.Videos,example:`/vimeo/category/documentary/staffpicks`,parameters:{category:"Category name can get from url like `documentary` in [https://vimeo.com/categories/documentary/videos](https://vimeo.com/categories/documentary/videos) ",staffpicks:"type `staffpicks` to sort with staffpicks"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Category`,maintainers:[`MisteryMonster`],handler:l};async function l(a){let{category:c,staffpicks:l}=a.req.param(),u=c,d=`&direction=desc&sort=date`,f=c;if(l&&l!==`staffpicks`)return;l&&(d+=`&filter=conditional_featured`,f+=`: ${c} staffpicks`);let p=`https://api.vimeo.com/categories/${u}/videos?page=1&per_page=18${d}`,m=await i({method:`get`,url:`https://vimeo.com/_rv/viewer`}),h=m.data.jwt,g=await i({method:`get`,url:p,headers:{Authorization:`jwt ${h}`}}),_=g.data.data,v=`https://vimeo.com/categories/${c}/videos/sort:latest`,y=`?staffpicked=true`,b=await e.tryGet(v+(l?y:``),async()=>{let e=await i({url:v+(l?y:``)}),t=s(e.data);return t(`meta[name="description"]`).attr(`content`)});return{title:`${f} | Vimeo category`,link:v+(l?y:``),description:b,item:_.map(e=>({title:e.name,description:t(o.join(r,`templates/description-f7979603.art`),{videoUrl:e.uri.replace(`/videos`,``),vdescription:e.description||``}),pubDate:n(e.created_time),link:e.link,author:e.user.name}))}}export{c as route};
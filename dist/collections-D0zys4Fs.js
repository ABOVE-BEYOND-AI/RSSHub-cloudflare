import{config as e}from"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{timezone as a}from"./timezone-BrxBCotj.js";import o from"node:path";const s=e=>{let t={1:`想看`,2:`看过`,3:`在看`,4:`搁置`,5:`抛弃`};switch(e){case`1`:return{1:`想读`,2:`读过`,3:`在读`,4:`搁置`,5:`抛弃`};case`2`:case`6`:return t;case`3`:return{1:`想听`,2:`听过`,3:`在听`,4:`搁置`,5:`抛弃`};case`4`:return{1:`想玩`,2:`玩过`,3:`在玩`,4:`搁置`,5:`抛弃`};default:return t}},c={path:`/user/collections/:id/:subjectType/:type`,categories:[`anime`],example:`/bangumi.tv/user/collections/sai/1/1`,parameters:{id:`用户 id, 在用户页面地址栏查看`,subjectType:{description:"全部类别: `空`、book: `1`、anime: `2`、music: `3`、game: `4`、real: `6`",options:[{value:`ALL`,label:`all`},{value:`book`,label:`1`},{value:`anime`,label:`2`},{value:`music`,label:`3`},{value:`game`,label:`4`},{value:`real`,label:`6`}]},type:{description:"全部类别: `空`、想看: `1`、看过: `2`、在看: `3`、搁置: `4`、抛弃: `5`",options:[{value:`ALL`,label:`all`},{value:`想看`,label:`1`},{value:`看过`,label:`2`},{value:`在看`,label:`3`},{value:`搁置`,label:`4`},{value:`抛弃`,label:`5`}]}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`bgm.tv/anime/list/:id`],target:`/bangumi.tv/user/collections/:id/all/all`},{source:[`bangumi.tv/anime/list/:id`],target:`/bangumi.tv/user/collections/:id/all/all`},{source:[`bgm.tv/anime/list/:id/wish`],target:`/bangumi.tv/user/collections/:id/2/1`},{source:[`bangumi.tv/anime/list/:id/wish`],target:`/bangumi.tv/user/collections/:id/2/1`}],name:`Bangumi 用户收藏列表`,maintainers:[`youyou-sudo`,`honue`],handler:l};async function l(c){let l=c.req.param(`id`),u=c.req.param(`subjectType`)||``,d=c.req.param(`type`)||``,f={1:`书籍`,2:`动画`,3:`音乐`,4:`游戏`,6:`三次元`},p=s(u),m=p[d]||``,h=f[u]||``,g=``;g=m&&h?`${m}的${h}列表`:m?`${m}的列表`:h?`收藏的${h}列表`:`的Bangumi收藏列表`;let _=`https://api.bgm.tv/v0/users/${l}`,v=await r(_,{headers:{"User-Agent":e.trueUA}}),y=`https://api.bgm.tv/v0/users/${l}/collections?${u&&u!==`all`?`subject_type=${u}`:``}${d&&d!==`all`?`&type=${d}`:``}`,b=await r(y,{headers:{"User-Agent":e.trueUA}}),x=v.nickname,S=b.data.map(e=>{let r=e.subject.name_cn||e.subject.name,c=e.updated_at,l=e.subject_id;return{title:`${d===`all`?`${s(e.subject_type)[e.type]}：`:``}${r}`,description:t(o.join(i,`templates/subject-b5a6d9b1.art`),{routeSubjectType:u,subjectTypeName:f[e.subject_type],subjectType:e.subject_type,subjectEps:e.subject.eps,epStatus:e.ep_status,score:e.subject.score,date:e.subject.date,picUrl:e.subject.images.large}),link:`https://bgm.tv/subject/${l}`,pubDate:a(n(c),0)}});return{title:`${x}${g}`,link:`https://bgm.tv/user/${l}/collections`,item:S,description:`${x}${g}`}}export{c as route};
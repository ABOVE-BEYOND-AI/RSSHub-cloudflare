import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";const o={path:`/:category?/:section?`,categories:[`traditional-media`],example:`/straitstimes/singapore`,parameters:{category:`Category, see below for more information`,section:`Section, see below for more information`},features:{requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1,requireConfig:!1},name:`News`,maintainers:[`quiniapiezoelectricity`],handler:s,description:"\n| Category               | `:category`               |\n| ---------------------- | --------------------------- |\n| Singapore              | `singapore`               |\n| Asia                   | `asia`                    |\n| World                  | `world`                   |\n| Opinion                | `opinion`                 |\n| Life                   | `life`                    |\n| Business               | `business`                |\n| Jobs                   | `jobs`                    |\n| Parenting & Education  | `parenting-and-education` |\n| Food                   | `food`                    |\n| Tech                   | `tech`                    |\n| Sport                  | `sport`                   |\n| Podcasts               | `podcasts`                |,\n\n| Section                | `:section`                |\n| ---------------------- | --------------------------- |\n| Top Stories            | `top-stories`             |\n| Latest                 | `latest`                  |",radar:[{source:[`www.straitstimes.com/:category`],target:`/:category`},{source:[`www.straitstimes.com`],target:`/`}]};async function s(o){let s=o.req.param(`category`)?o.req.param(`category`).toLowerCase():`singapore`,c=o.req.param(`section`)?o.req.param(`section`).toLowerCase():void 0,l=`T9XUJM9rAZoLOd2CAx2wCBSTrm3xoyPw`,u=`iosflex`,d,f=await i({method:`get`,url:`https://newsapi.sphdigital.com/v2/feed/section/st?page=1&platform=${u}&section=${s}/star&subscribed=false&version=4.0`,headers:{"x-api-key":l}});d=f.data.data;let p=new Set(d.filter(e=>e.items[0].itemType===`SectionFooter`).map(e=>e.items[0].sectionFooterData.link.id)),m=c&&p.has(`${s}-${c}-more/star`)?`${s}-${c}-more/star`:void 0;if(c===void 0){for(let e of[`latest`,`top-picks`,`top-stories`])if(p.has(`${s}-${e}-more/star`)){m=`${s}-${e}-more/star`;break}}if(m){let e=await i({method:`get`,url:`https://newsapi.sphdigital.com/v2/feed/section/st?page=1&platform=${u}&section=${m}&subscribed=false&version=4.0`,headers:{"x-api-key":l}});d=e.data.data}let h=d.filter(e=>e.items[0].itemType===`Article`),g=await Promise.all(h.map(o=>e.tryGet(o.items[0].articleData.url,async()=>{let e=o.items[0].articleData;e.authors&&(o.author=e.authors.map(e=>e.name).join(`, `)),e.keywords&&(o.category=e.keywords.map(e=>e.name)),o.title=e.headline,o.pubDate=n(e.publicationTime,`X`),o.updated=n(e.updatedTime,`X`),o.link=e.url;let s=e.teaser;if(e.documentId){let t=await i({method:`get`,url:`https://newsapi.sphdigital.com/v2/feed/article/st/${e.documentId}?platform=${u}&version=4.0`,headers:{"x-api-key":l}});s=t.data.data.body}return o.description=t(a.join(r,`templates/description-38cf9443.art`),{images:e.images??[],article:s}),o})));return{title:`The Strait Times - ${s.replaceAll(`-`,` `).toUpperCase()}`,link:`https://www.straitstimes.com/${s.toLowerCase()}`,item:g}}export{o as route};
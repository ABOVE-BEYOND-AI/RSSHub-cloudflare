import{config as e}from"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as t}from"./cache-C3AIQtoX.js";import{art as n}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s={path:`/:appId`,categories:[`program-update`],example:`/winstall/Mozilla.Firefox`,parameters:{appId:`Application ID`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`winstall.app/apps/:appId`]}],name:`Apps Update`,maintainers:[`TonyRL`],handler:c};async function c(s){let c=`https://winstall.app`,l=s.req.param(`appId`),u=await t.tryGet(`winget:buildId`,async()=>{let{data:e}=await i(c),t=o(e);return JSON.parse(t(`#__NEXT_DATA__`).text()).buildId},e.cache.routeExpire,!1),{data:d}=await i(`${c}/_next/data/${u}/apps/${l}.json`),{app:f}=d.pageProps,p=f.versions.map(e=>({title:`${f.name} ${e.version}`,description:n(a.join(r,`templates/desc-22b8f3f4.art`),{installers:e.installers}),author:f.publisher,category:f.tags,guid:`winstall:${l}:${e.version}`}));return{title:`${f.name} - winstall`,description:f.desc,link:`${c}/apps/${l}`,image:`https://api.winstall.app/icons/next/${l}.webp`,language:`en`,item:p}}export{s as route};
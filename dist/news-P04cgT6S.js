import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import{ViewType as a}from"./types-D9T3SQ-7.js";import o from"node:path";const s=`https://www3.nhk.or.jp`,c=`https://nwapi.nhk.jp`,l={path:`/news/:lang?`,categories:[`traditional-media`],view:a.Articles,example:`/nhk/news/en`,parameters:{lang:{description:`Language, see below`,options:[{value:`ar`,label:`العربية`},{value:`bn`,label:`বাংলা`},{value:`my`,label:`မြန်မာဘာသာစကား`},{value:`zh`,label:`中文（简体）`},{value:`zt`,label:`中文（繁體）`},{value:`en`,label:`English`},{value:`fr`,label:`Français`},{value:`hi`,label:`हिन्दी`},{value:`id`,label:`Bahasa Indonesia`},{value:`ko`,label:`코리언`},{value:`fa`,label:`فارسی`},{value:`pt`,label:`Português`},{value:`ru`,label:`Русский`},{value:`es`,label:`Español`},{value:`sw`,label:`Kiswahili`},{value:`th`,label:`ภาษาไทย`},{value:`tr`,label:`Türkçe`},{value:`uk`,label:`Українська`},{value:`ur`,label:`اردو`},{value:`vi`,label:`Tiếng Việt`}],default:`en`}},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www3.nhk.or.jp/nhkworld/:lang/news/list/`,`www3.nhk.or.jp/nhkworld/:lang/news/`],target:`/news/:lang`}],name:`WORLD-JAPAN - Top Stories`,maintainers:[`TonyRL`,`pseudoyu`,`cscnk52`],handler:u};async function u(a){let{lang:l=`en`}=a.req.param(),{data:u}=await i(`${c}/nhkworld/rdnewsweb/v7b/${l}/outline/list.json`),d=await i(`${s}/nhkworld/common/assets/news/config/${l}.json`),f=u.data.map(e=>({title:e.title,description:e.description,link:`${s}${e.page_url}`,pubDate:n(e.updated_at,`x`),id:e.id}));return f=await Promise.all(f.map(n=>e.tryGet(n.link,async()=>{let{data:e}=await i(`${c}/nhkworld/rdnewsweb/v6b/${l}/detail/${n.id}.json`);return n.category=Object.values(e.data.categories),n.description=t(o.join(r,`templates/news-cb748a69.art`),{img:e.data.thumbnails,description:e.data.detail.replaceAll(`

`,`<br><br>`)}),delete n.id,n}))),{title:`${Object.values(d.data.config.navigation.header).find(e=>e.keyname===`topstories`)?.name} | NHK WORLD-JAPAN News`,link:`${s}/nhkworld/${l}/news/list/`,item:f}}export{l as route};
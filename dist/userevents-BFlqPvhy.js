import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as t}from"./esm-shims-BDPl6Msv.js";import{got_default as n}from"./got-BaOFZRd4.js";import r from"node:path";const i=n=>e(r.join(t,`templates/userevents-a86ba626.art`),n),a={path:`/music/user/events/:id`,categories:[`multimedia`],name:`用户动态`,maintainers:[`Master-Hash`],handler:o};async function o(e){let t=e.req.param(`id`),r=await n(`https://music.163.com/api/event/get/${t}`,{headers:{Referer:`https://music.163.com/`}}),{data:a}=r,{nickname:o,signature:s,avatarUrl:c}=a.events[0].user;return{title:`${o}的云村动态`,link:`https://music.163.com/#/user/event?id=${t}`,description:`网易云音乐用户动态 - ${s}`,icon:c,image:c,item:a.events.map(e=>{let t=e.info.commentThread.resourceTitle,n=e.user.userId,r=JSON.parse(e.json).msg,a=e.pics.map(({originUrl:e})=>e),s=e.id;return{title:t,description:i({description:r,pics:a}),link:`https://music.163.com/#/event?id=${s}&uid=${n}`,pubDate:new Date(e.eventTime),published:new Date(e.eventTime),author:o,upvotes:e.info.likedCount,comments:e.info.commentCount}})}}export{a as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import{timezone as a}from"./timezone-BrxBCotj.js";import o from"node:path";import{load as s}from"cheerio";const c={path:`/`,radar:[{source:[`shuiguopai.com/`],target:``}],name:`Unknown`,maintainers:[`nczitzk`],handler:l,url:`shuiguopai.com/`};async function l(c){let l=`https://sgptv.vip`,u=`https://api.cbbee0.com`,d=`${u}/v1_2/homePage`,f=`${u}/v1_2/filmInfo`,p=c.req.query(`limit`)?Number.parseInt(c.req.query(`limit`)):50,m=await i({method:`post`,url:d,json:{device_id:``,hm:`008-api`,last_page:0,length:p,ltype:1,page:1,userToken:``}}),h=m.data.data.list.map(e=>({title:e.title,guid:e.library_id,link:`${l}/play-details/${e.library_id}`,pubDate:a(n(e.show_time_origin,`YYYY-MM-DD HH:mm:ss`),8),category:e.tags.map(e=>e.tag_title)}));return h=await Promise.all(h.map(n=>e.tryGet(n.link,async()=>{let e=await i({method:`get`,url:n.link}),a=s(e.data);a(`iframe`).remove();let c,l=e.data.match(/film_id:"([\d,]+)",/)?.[1];if(l){let e=await i({method:`post`,url:f,json:{device_id:``,film_id:l,hm:`008-api`,userToken:``}}),t=e.data.data;c=t.map(e=>e.download_url),n.category=t.flatMap(e=>e.tags.map(e=>e.tag_title)),n.author=t.map(e=>e.actor).join(` `)}return n.description=t(o.join(r,`templates/description-3864cae2.art`),{videos:c,description:a(`.content`).html()}),n}))),{title:`水果派`,link:l,item:h}}export{c as route};
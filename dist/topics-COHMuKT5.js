import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{ofetch_default as n}from"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{ViewType as i}from"./types-D9T3SQ-7.js";import a from"node:path";import{load as o}from"cheerio";const s=async i=>{let{id:s=`hotspot`}=i.req.param(),c=Number.parseInt(i.req.query(`limit`)??`30`,10),l=`https://www.wainao.me`,u=new URL(`topics/${s}`,l).href,d=new URL(`pf/api/v3/content/fetch/story-feed-sections`,l).href,f=await n(d,{query:{query:JSON.stringify({feedOffset:0,feedSize:c,includeSections:`/topics/${s}`}),d:81,_website:`wainao`}}),p=await n(u),m=o(p),h=m(`html`).attr(`lang`)??`zh-CN`,g=[];return g=f.content_elements.slice(0,c).map(n=>{let i=n.headlines.basic,o=e(a.join(r,`templates/description-2b521c43.art`),{elements:n.content_elements}),s=n.publish_date,c=n.website_url,u=[n.taxonomy?.primary_section?.name].filter(Boolean),d=n.credits?.by?.map(e=>({name:e.name}))??[],f=n.website_url,p=n.promo_items.basic.url,m=n.last_updated_date,g={title:i,description:o,pubDate:s?t(s):void 0,link:c?new URL(c,l).href:void 0,category:u,author:d,guid:f,id:f,content:{html:o,text:o},image:p,banner:p,updated:m?t(m):void 0,language:h};return g}).filter(e=>!0),{title:m(`title`).text(),description:m(`meta[property="og:title"]`).attr(`content`),link:u,item:g,allowEmpty:!0,image:m(`meta[property="og:image"]`).attr(`content`),author:m(`meta[property="og:site_name"]`).attr(`content`),language:h,id:u}},c={path:`/topics/:id?`,name:`主题`,url:`wainao.me`,maintainers:[`nczitzk`],handler:s,example:`/wainao/topics/hotspot`,parameters:{id:{description:"主题 id，默认为 `hotspot`，即热点，可在对应主题页 URL 中找到",options:[{label:`热点`,value:`hotspot`},{label:`人物`,value:`people`},{label:`身份`,value:`identity`},{label:`政治`,value:`politics`},{label:`社会`,value:`society`},{label:`文化`,value:`culture`},{label:`经济`,value:`economics`},{label:`环境`,value:`environment`},{label:`FUN`,value:`fun`}]}},description:":::tip\n若订阅 [人物](https://www.wainao.me/topics/people)，网址为 `https://www.wainao.me/topics/people`，请截取 `https://www.wainao.me/topics/` 到末尾的部分 `people` 作为 `id` 参数填入，此时目标路由为 [`/wainao/topics/people`](https://rsshub.app/wainao/topics/people)。\n:::\n\n| [热点](https://www.wainao.me/topics/hotspot)        | [人物](https://www.wainao.me/topics/people)       | [身份](https://www.wainao.me/topics/identity)         | [政治](https://www.wainao.me/topics/politics)         | [社会](https://www.wainao.me/topics/society)        | [文化](https://www.wainao.me/topics/culture)        | [经济](https://www.wainao.me/topics/economics)          | [环境](https://www.wainao.me/topics/environment)            | [FUN](https://www.wainao.me/topics/fun)     |\n| --------------------------------------------------- | ------------------------------------------------- | ----------------------------------------------------- | ----------------------------------------------------- | --------------------------------------------------- | --------------------------------------------------- | ------------------------------------------------------- | ----------------------------------------------------------- | ------------------------------------------- |\n| [hotspot](https://rsshub.app/wainao/topics/hotspot) | [people](https://rsshub.app/wainao/topics/people) | [identity](https://rsshub.app/wainao/topics/identity) | [politics](https://rsshub.app/wainao/topics/politics) | [society](https://rsshub.app/wainao/topics/society) | [culture](https://rsshub.app/wainao/topics/culture) | [economics](https://rsshub.app/wainao/topics/economics) | [environment](https://rsshub.app/wainao/topics/environment) | [fun](https://rsshub.app/wainao/topics/fun) |\n",categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.wainao.me/topics/:id`],target:`/topics/:id`},{title:`热点`,source:[`www.wainao.me/topics/hotspot`],target:`/topics/hotspot`},{title:`人物`,source:[`www.wainao.me/topics/people`],target:`/topics/people`},{title:`身份`,source:[`www.wainao.me/topics/identity`],target:`/topics/identity`},{title:`政治`,source:[`www.wainao.me/topics/politics`],target:`/topics/politics`},{title:`社会`,source:[`www.wainao.me/topics/society`],target:`/topics/society`},{title:`文化`,source:[`www.wainao.me/topics/culture`],target:`/topics/culture`},{title:`经济`,source:[`www.wainao.me/topics/economics`],target:`/topics/economics`},{title:`环境`,source:[`www.wainao.me/topics/environment`],target:`/topics/environment`},{title:`FUN`,source:[`www.wainao.me/topics/fun`],target:`/topics/fun`}],view:i.Articles};export{s as handler,c as route};
import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import{invalid_parameter_default as i}from"./invalid-parameter-CfUmvEUg.js";import a from"node:path";const o=`https://apiv3.fansly.com`,s=`https://fansly.com`,c=`${s}/assets/images/icons/apple-touch-icon.png`,l=(e,t)=>{let n=t.find(t=>t.id===e);return{displayName:n.displayName,username:n.username}},u=t=>e.tryGet(`fansly:account:${t.toLowerCase()}`,async()=>{let{data:e}=await r(`${o}/api/v1/account`,{searchParams:{usernames:t,"ngsw-bypass":!0}});if(!e.response.length)throw new i(`This profile or page does not exist.`);return e.response[0]}),d=async e=>{let{data:t}=await r(`${o}/api/v1/timelinenew/${e}`,{searchParams:{before:0,after:0,wallId:``,contentSearch:``,"ngsw-bypass":!0}});return t.response},f=t=>e.tryGet(`fansly:tag:${t.toLowerCase()}`,async()=>{let{data:e}=await r(`${o}/api/v1/contentdiscovery/media/tag`,{searchParams:{tag:t,"ngsw-bypass":!0}});if(!e.response.mediaOfferSuggestionTag)throw Error(`Couldn't find this hashtag.`);return e.response.mediaOfferSuggestionTag.id}),p=async e=>{let{data:t}=await r(`${o}/api/v1/contentdiscovery/media/suggestionsnew`,{searchParams:{before:0,after:0,tagIds:e,limit:25,offset:0,"ngsw-bypass":!0}});return t.response},m=(e,t)=>e.content.replaceAll(`
`,`<br>`)+`<br>`+h(e.attachments,t),h=(e,t)=>e.map(e=>{switch(e.contentType){case 1:return g(e.contentId,t.accountMedia);case 2:{let n=``,r=t.accountMediaBundles.find(t=>t.id===e.contentId);for(let e of r.accountMediaIds)n+=g(e,t.accountMedia);return n}case 8:{let n=`<br><br>`,r=t.aggregatedPosts.find(t=>t.id===e.contentId)||t.posts.find(t=>t.id===e.contentId);return n+=m(r,t),n}case 7100:return y(e.contentId,t.tipGoals);case 32001:return``;case 42001:return v(e.contentId,t.polls);default:throw Error(`Unhandled attachment type: ${e.contentType} for post ${e.postId}`)}}).join(``),g=(e,t)=>{let n=t.find(t=>t.id===e);return n?_(n.preview??n.media):``},_=e=>{switch(e.mimetype){case`image/gif`:case`image/jpeg`:case`image/png`:case`video/mp4`:case`audio/mp4`:return t(a.join(n,`templates/media-e8ba56ad.art`),{poster:e.mimetype===`video/mp4`?e.variants[0].locations[0]:null,src:e.locations[0]});default:throw Error(`Unhandled media type: ${e.mimetype}`)}},v=(e,r)=>{let i=r.find(t=>t.id===e);return t(a.join(n,`templates/poll-cab99125.art`),{title:i.question,options:i.options,version:i.version})},y=(e,r)=>{let i=r.find(t=>t.id===e);return t(a.join(n,`templates/tip-goal-0ea3f03a.art`),{label:i.label,description:i.description,currentAmount:i.currentAmount,goalAmount:i.goalAmount,currentPercentage:i.currentPercentage})};export{s as baseUrl,l as findAccountById,u as getAccountByUsername,f as getTagId,p as getTagSuggestion,d as getTimelineByAccountId,c as icon,m as parseDescription};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s=e=>JSON.parse(e(`script`).text().match(/\['__natgeo__']=({.*?});/)[1]),c={path:`/latest-stories`,categories:[`travel`],example:`/nationalgeographic/latest-stories`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.nationalgeographic.com/pages/topic/latest-stories`]}],name:`Latest Stories`,maintainers:[`miles170`],handler:l,url:`www.nationalgeographic.com/pages/topic/latest-stories`};async function l(){let c=`https://www.nationalgeographic.com/pages/topic/latest-stories`,l=await i(c),u=o(l.data),d=await Promise.all(s(u).page.content.hub.frms.flatMap(e=>e.mods).flatMap(e=>e.tiles?.filter(e=>e.ctas[0]?.text===`natgeo.ctaText.read`)).filter(Boolean).map(e=>({title:e.title,link:e.ctas[0].url,category:e.tags.map(e=>e.name)})).map(c=>e.tryGet(c.link,async()=>{let e=await i(c.link),l=o(e.data),u=s(l).page.content.prismarticle.frms.find(e=>e.cmsType===`ArticleBodyFrame`).mods,d=u.find(e=>e.edgs[0].cmsType===`ArticleBodyTile`).edgs[0];return c.author=d.cntrbGrp.flatMap(e=>e.contributors).map(e=>e.displayName).join(`, `),c.description=t(a.join(r,`templates/stories-ce453fa9.art`),{ldMda:d.ldMda,description:d.dscrptn,body:d.bdy}),c.pubDate=n(d.pbDt),c})));return{title:u(`meta[property="og:title"]`).attr(`content`),link:c,item:d.filter(e=>e!==null)}}export{c as route};
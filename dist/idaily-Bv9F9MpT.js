import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";import{load as a}from"cheerio";const o={path:[`/:language?`],name:`每日环球视野`,example:`/idaily`,maintainers:[`zphw`,`nczitzk`],parameters:{language:`语言，见下表，默认为简体中文`},radar:[{source:[`idai.ly/`]}],handler:s,description:`| 简体中文 | 繁体中文 |
| -------- | -------- |
| zh-hans  | zh-hant  |`};async function s(o){let{language:s=`zh-hans`}=o.req.param(),c=o.req.query(`limit`)?Number.parseInt(o.req.query(`limit`),10):100,l=new URL(`api/list/v3/iphone/${s}`,`https://idaily-cdn.idailycdn.com`).href,u=`https://idai.ly`,{data:d}=await r(l),f=d.filter(e=>e.ui_sets?.caption_subtitle).slice(0,c).map(r=>{let a=r.ui_sets?.cover_landscape_hd_4k??r.cover_landscape_hd;return{title:`${r.ui_sets?.caption_subtitle} - ${r.title}`,link:r.link_share,description:e(i.join(n,`templates/description-2f40bb93.art`),{images:a?[{src:a,alt:r.ui_sets?.caption_subtitle??r.title}]:void 0,intro:r.content}),author:r.location,category:r.tags?.map(e=>e.name),guid:`idaily-${r.guid}`,pubDate:t(r.pubdate_timestamp,`X`),updated:t(r.lastupdate_timestamp,`X`),enclosure_url:a,enclosure_type:`image/${a.split(/\./).pop()}`}}),{data:p}=await r(u),m=a(p),h=m(`title`).text(),g=new URL(`img/idaily/logo_2x.png`,u).href;return{item:f,title:h,link:u,description:m(`meta[name="description"]`).prop(`content`),language:`zh`,image:g,subtitle:m(`meta[name="keywords"]`).prop(`content`),author:h.split(/\s/)[0],allowEmpty:!0}}export{o as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import{apiTopicUrl as a,processItems as o,rootUrl as s}from"./util-CLXHYaxt.js";import c from"node:path";import{load as l}from"cheerio";const u={path:`/:category?`,categories:[`new-media`],example:`/readhub`,parameters:{category:`分类，见下表，默认为热门话题`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`分类`,maintainers:[`WhiteWorld`,`nczitzk`,`Fatpandac`],handler:d,description:`| 热门话题 | 科技动态 | 医疗产业 | 财经快讯           |
| -------- | -------- | -------- | ------------------ |
|          | news     | medical  | financial_express |`};async function d(u){let{category:d=``}=u.req.param(),f=u.req.query(`limit`)?Number.parseInt(u.req.query(`limit`),10):30,p=new URL(d??``,s).href,{data:m}=await i(p),h=m.match(/\[\\"type\\",\\"(\d+)\\",\\"d\\"]/)?.[1]??`1`,{data:g}=await i(a,{searchParams:{type:h,page:1,size:f}}),_=g.data.items.slice(0,f).map(e=>({title:e.title,link:e.url??new URL(`topic/${e.uid}`,s).href,description:t(c.join(r,`templates/description-71daa88b.art`),{description:e.summary,news:e.newsAggList,timeline:e.timeline}),author:e.siteNameDisplay,category:[...e.entityList.map(e=>e.name)??[],...e.tagList.map(e=>e.name)??[]],guid:e.uid,pubDate:n(e.publishDate)}));_=await o(_,e.tryGet);let v=l(m),y=v(`meta[property="og:site_name"]`).prop(`content`),b=v(`a[data-path="/${d}"]`).text(),x=v(`link[rel="preload"][as="image"]`).prop(`href`),S=v(`meta[property="og:image"]`).prop(`content`);return{item:_,title:`${y} - ${b}`,link:p,description:v(`meta[property="og:description"]`).prop(`content`),language:`zh`,image:x,icon:S,logo:S,subtitle:b,author:y,allowEmpty:!0}}export{u as route};
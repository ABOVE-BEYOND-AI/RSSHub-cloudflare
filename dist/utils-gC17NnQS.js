import{config as e}from"./config-HRWLmo66.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s=`https://api.followin.io`,c=`https://followin.io`,l=`${c}/favicon.ico`,u=e=>({a:`web`,b:``,c:e,d:0,e:``,f:``,g:``,h:`0.1.0`,i:`official`}),d=t=>t(`followin:buildId`,async()=>{let{data:e}=await i(c),t=o(e),{buildId:n}=JSON.parse(t(`script#__NEXT_DATA__`).text());return n},e.cache.routeExpire,!1),f=e=>e(`followin:gtoken`,async()=>{let{data:e}=await i.post(`${s}/user/gtoken`);return e.data.gtoken}),p=(e,t,r)=>e.map(e=>({title:e.translated_title||e.title,description:e.translated_content||e.content,link:`${c}/${t===`en`?``:`${t}/`}feed/${e.id}`,pubDate:n(e.publish_time,`x`),category:e.tags.map(e=>e.name),author:e.nickname,nextData:`${c}/_next/data/${r}/${t}/feed/${e.id}.json`})),m=(e,o)=>o(e.link,async()=>{let{data:o}=await i(e.nextData),{queries:s}=o.pageProps.dehydratedState,c=s.find(e=>e.queryKey[0]===`/feed/info`).state,l=s.find(e=>e.queryKey[0]===`/feed/thread`);return e.description=l?t(a.join(r,`templates/thread-1c70519d.art`),{list:l.state.data.list}):c.data.translated_full_content||c.data.full_content,e.updated=n(c.dataUpdatedAt,`x`),e.category=[...new Set([...e.category,...c.data.tags.map(e=>e.name)])],e});export{s as apiUrl,c as baseUrl,l as favicon,u as getBParam,d as getBuildId,f as getGToken,m as parseItem,p as parseList};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import{timezone as i}from"./timezone-BrxBCotj.js";import a from"node:path";import{load as o}from"cheerio";import s from"iconv-lite";const c={path:`/author/:id?`,categories:[`reading`],example:`/jjwxc/author/4364484`,parameters:{id:`作者 id，可在对应作者页中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`作者最新作品`,maintainers:[`nczitzk`],handler:l};async function l(c){let l=c.req.param(`id`),u=`https://www.jjwxc.net`,d=new URL(`oneauthor.php?authorid=${l}`,u).href,{data:f}=await r(d,{responseType:`buffer`}),p=o(s.decode(f,`gbk`)),m=p(`font a`).first(),h=m.parent(),g=m.text(),_=new URL(m.prop(`href`),u).href,v=h.find(`font`).first().text(),y=h.find(`font`).eq(1).text(),b=h.parent().contents().last().text().trim(),x=_.split(/=/).pop(),S=`${g}(${v}/${y}/${b})`,C=p(`span[itemprop="name"]`).text(),w=[{title:S,link:_,description:e(a.join(n,`templates/author-377436fc.art`),{bookName:g,bookUrl:_,bookStatus:v,bookWords:y,bookUpdatedTime:b}),author:C,category:[v],guid:`jjwxc-${l}-${x}#${y}`,pubDate:i(t(b),8)}],T=p(`div.logo a img`),E=`https:${T.prop(`src`)}`,D=new URL(`favicon.ico`,u).href;return{item:w,title:`${T.prop(`alt`).replace(/logo/,``)} | ${C} - 最近更新`,link:d,description:p(`span[itemprop="description"]`).text(),language:`zh`,image:E,icon:D,logo:D,subtitle:p(`meta[name="Description"]`).prop(`content`),author:C}}export{c as route};
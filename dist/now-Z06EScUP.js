import{config as e}from"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as t}from"./cache-C3AIQtoX.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{got_default as a}from"./got-BaOFZRd4.js";import{config_not_found_default as o}from"./config-not-found-B7nOMdXp.js";import s from"node:path";const c={path:`/now/:location`,categories:[`forecast`],example:`/qweather/now/广州`,parameters:{location:`N`},features:{requireConfig:[{name:`HEFENG_KEY`,description:"访问 `https://www.qweather.com/` 注册开发 API Key。"}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`实时天气`,maintainers:[`Rein-Ou`],handler:l};async function l(c){if(!e.hefeng.key)throw new o(`QWeather RSS is disabled due to the lack of <a href="https://docs.rsshub.app/zh/install/config#%E5%92%8C%E9%A3%8E%E5%A4%A9%E6%B0%94">relevant config</a>`);let l=await t.tryGet(`qweather:`+c.req.param(`location`)+`:id`,async()=>{let t=await a(`https://geoapi.qweather.com/v2/city/lookup?location=${c.req.param(`location`)}&key=${e.hefeng.key}`),n=t.data.location.map(e=>e);return n[0].id}),u=`https://devapi.qweather.com/v7/weather/now?key=`+e.hefeng.key+`&location=`+l,d=await t.tryGet(`qweather:`+c.req.param(`location`)+`:now`,async()=>{let e=await a(u);return e.data},3600,!1),f=[d.now],p=r(d.updateTime),m=p.toLocaleString();return{title:c.req.param(`location`)+`实时天气`,description:c.req.param(`location`)+`实时天气状况`,item:f.map(e=>({title:`观测时间：`+m,description:n(s.join(i,`templates/now-edaf8eec.art`),{item:e}),pubDate:p,guid:`位置:`+c.req.param(`location`)+`--时间：`+m,link:d.fxLink})),link:d.fxLink}}export{c as route};
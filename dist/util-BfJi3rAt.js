import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";import a from"node:zlib";const o={labelHot:`热门`,labelImportant:`重要消息`,defaultType:`article`},s={article:`article`,event:`timeline`,news:`news`},c=`https://foresightnews.pro`,l=`https://api.foresightnews.pro`,u=new URL(`foresight.ico`,c).href,d=new URL(`vertical_logo.png`,`https://img.foresightnews.pro`).href,f=async(l,u,...d)=>{let f={size:u};for(let e of d)f={...f,...e};let p={column:``},{data:m}=await r(l,{searchParams:f}),h=JSON.parse(String(a.inflateSync(Buffer.from(m.data?.list??m.data,`base64`))));return h=(h?.list??h).slice(0,u).map(r=>{let a=r.source_type??(r.source_link?r.column?.title?`article`:`news`:r.event_type?`event`:o.defaultType);r=r.source_type?r[r.source_type]:r;let l=r.column?.title;p.column=p.column||l;let u=[l,r.event_type,r.is_hot?o.labelHot:void 0,r.is_important?r.important_tag?.name??o.labelImportant:``,r.label,...r.tags?.map(e=>e.name)??[]].filter((e,t,n)=>e&&n.indexOf(e)===t),d=new URL(`${s[a]}/detail/${r.id}`,c).href;return{title:r.title,link:d,description:e(i.join(n,`templates/description-d0fddedb.art`),{image:r.img.split(`?`)[0],description:r.content??r.brief,source:r.source_link}),author:r.column?.title??r.author?.username??void 0,category:u,guid:`foresightnews-${a}#${r.id}`,pubDate:r.published_at?t(r.published_at*1e3):void 0,updated:r.last_update_at?t(r.last_update_at*1e3):void 0}}),{items:h,info:p}};export{l as apiRootUrl,u as icon,d as image,f as processItems,c as rootUrl};
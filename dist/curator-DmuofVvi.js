import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{ofetch_default as n}from"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import i from"node:path";import{load as a}from"cheerio";const o={path:`/curator/:id/:routeParams?`,categories:[`game`],example:`/steam/curator/34646096-80-Days`,parameters:{id:`Steam curator id. It usually consists of a series of numbers and the curator's name.`,routeParams:{description:"Extra parameters to filter the reviews. The following parameters are supported:\n| Key             | Description                                                                                   | Accepts                                    | Defaults to |\n| --------------- | --------------------------------------------------------------------------------------------- | ------------------------------------------ | ----------- |\n| `curations`   | Review type to filter by. `0`: Recommended, `1`: Not Recommended, `2`: Informational    | `0`/`1`/`2`/`0,1`/`0,2`/`1,2`  |             |\n| `tagids`      | Tag to filter by. Details are provided below.                                                 | use comma to separate multiple tagid       |             |\n\nNote: There is a [‘Popular Tags’](https://store.steampowered.com/tag/browse) page where you can find many but not all of the tags. The tag’s ID is in the `data-tagid` attribute of the element.Steam does not currently provide a page that comprehensively lists all tags, and you may need to explore alternative ways to find them.\n\nExamples:\n* `/steam/curator/34646096-80-Days/curations=&tagids=`\n* `/steam/curator/34646096-80-Days/curations=0&tagids=19`\n* `/steam/curator/34646096-80-Days/curations=0,2&tagids=19,21`\n"}},radar:[{title:`Latest Curator Reviews`,source:[`store.steampowered.com/curator/:id`],target:`/curator/:id`}],description:`The Latest reviews from a Steam Curator.`,name:`Latest Curator Reviews`,maintainers:[`naremloa`,`fenxer`],handler:async o=>{let{id:s,routeParams:c}=o.req.param(),l=new URLSearchParams(c),u=new URL(`https://store.steampowered.com/curator/${s}/ajaxgetfilteredrecommendations/?query&start=0&count=10&dynamic_data=&sort=recent&app_types=&reset=false&curations=&tagids=`);for(let[e,t]of l)[`curations`,`tagids`].includes(e)&&u.searchParams.set(e,t||``);let d=await n(u.toString()),f=a(d.results_html??``),p=f(`.recommendation`).toArray().map(n=>{let a=f(n),o=a.find(`a.store_capsule img`),s=o.attr(`alt`),c=o.attr(`src`)??``,l=a.find(`.recommendation_link`).first().attr(`href`),u=a.find(`.recommendation_desc`).text().trim(),d=a.find(`.curator_review_date`).text().trim(),p=/,\s\b\d{4}\b$/,m=p.test(d)?t(d):t(`${d}, ${new Date().getFullYear()}`),h=e(i.join(r,`templates/curator-description-b79402f1.art`),{image:c,description:u});return{title:s,link:l,description:h,pubDate:m,media:{content:{url:c,medium:`image`}}}});return{title:`Steam Curator ${s} Reviews`,link:u.toString(),item:p}}};export{o as route};
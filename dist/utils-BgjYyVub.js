import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";import{load as a}from"cheerio";const o=`https://www.javlibrary.com`,s=`1`,c=`amjq`,l=`arlq`,u=`ja`,d=async(s,c,l)=>{let u=await r({method:`get`,url:c}),d=a(u.data);d(`.toolbar, .info, .videoinfo`).remove();let f=d(`.videotextlist, #video_comments`).find(`a`).toArray().filter(e=>d(e).parent().hasClass(`video`)||d(e).parent().get(0).tagName===`strong`).map(e=>{e=d(e);let n=e.parentsUntil(`table`),r=`${o}/${s}/${e.attr(`href`).replace(/^\.\//,``)}`;return{link:r,url:r.replace(/video.*\.php/,``),title:e.text(),description:n.find(`textarea`).text(),pubDate:t(n.find(`.date`).text())}});return f=await Promise.all(f.map(o=>l(o.url,async()=>{let s=await r({method:`get`,url:o.url}),c=a(s.data);return c(`.icn_edit, .btn_videoplayer, a[rel="bookmark"]`).remove(),c(`span`).each(function(){c(this).attr(`class`)?.startsWith(`icn_`)&&c(this).remove()}),o.author=c(`.star`).toArray().map(e=>c(e).text()).filter(e=>e!==``).join(`,`),o.category=c(`a[rel]`).toArray().map(e=>c(e).text()).filter(e=>e!==``),o.description=e(i.join(n,`templates/description-bc841822.art`),{cover:c(`#video_jacket_img`).attr(`src`),info:c(`#video_info`).html().replaceAll(`span><span`,`span>,&nbsp;<span`),comment:o.description?.replace(/\[img]/g,`<img src="`)?.replace(/\[\/img]/g,`"/>`),thumbs:c(`.previewthumbs img`).toArray().map(e=>c(e).attr(`src`).replaceAll(`-`,`jp-`)),videos:[...new Set(s.data.match(/(http[^"[\]]+\.mp4)/g))]}),o.pubDate=o.pubDate.toString()===`Invalid Date`?t(c(`#video_date`).find(`.text`).text()):o.pubDate,delete o.url,o}))),{title:d(`title`).text(),link:c,item:f,allowEmpty:!0}};export{d as ProcessItems,c as defaultGenre,u as defaultLanguage,l as defaultMaker,s as defaultMode,o as rootUrl};
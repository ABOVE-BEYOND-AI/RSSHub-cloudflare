import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s={path:[`/sh/wgj/:page?`,`/shanghai/wgj/:page?`],categories:[`government`],example:`/gov/sh/wgj`,parameters:{page:`页数，默认第 1 页`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`wsbs.wgj.sh.gov.cn/`],target:`/sh/wgj`}],name:`上海市文旅局审批公告`,maintainers:[`gideonsenku`],handler:c,url:`wsbs.wgj.sh.gov.cn/`};async function c(s){let c=`http://wsbs.wgj.sh.gov.cn`,l=`${c}/shwgj_ywtb/core/web/welcome/index!toResultNotice.action`,u=s.req.param(`page`)??1,d={flag:1,"pageDoc.pageNo":u},f=await i({method:`post`,url:l,searchParams:d}),p=o(f.data),m=p(`#div_md > table > tbody > tr > td:nth-child(1) > a`).toArray().map(e=>(e=p(e),{title:e.prop(`innerText`).replaceAll(/\s/g,``),link:e.attr(`href`)})),h=await Promise.all(m.map(s=>e.tryGet(s.link,async()=>{let e=await i({method:`get`,url:c+s.link}),l=o(e.data),u=l(`div[align="right"][style*="padding: 10px"]`).last(),d=u.text().trim(),f=l(`td:contains("举办单位：")`).next().text().trim(),p=l(`td:contains("许可证号：")`).next().text().trim(),m=l(`td:contains("演出名称:")`).next().text().trim(),h=l(`td:contains("演出日期：")`).next().text().trim(),g=l(`td:contains("演出场所：")`).next().text().trim(),_=l(`td:contains("主要演员：")`).next().text().trim(),v=l(`td:contains("演员人数：")`).next().text().trim(),y=l(`td:contains("场次：")`).next().text().trim();return s.description=t(a.join(r,`templates/wgj-5a172aec.art`),{hostingUnit:f,licenseNumber:p,performanceName:m,performanceDate:h,performanceVenue:g,mainActors:_,actorCount:v,showCount:y}),s.pubDate=n(d),s})));return{title:p(`title`).text(),link:l,item:h}}export{s as route};
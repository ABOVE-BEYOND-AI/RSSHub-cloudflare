import{config as e}from"./config-HRWLmo66.js";import{cache_default as t}from"./cache-C3AIQtoX.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{getSubPath as i}from"./common-utils-C27Jp3s6.js";import{ofetch_default as a}from"./ofetch-DRl42yaJ.js";import{__dirname as o}from"./esm-shims-BDPl6Msv.js";import s from"node:path";import{load as c}from"cheerio";async function l(e){let t=await a(e);return t.results}async function u(u){let d=`https://www.nber.org/api/v1/working_page_listing/contentType/working_paper/_/_/search`,f=await t.tryGet(d,()=>l(d),e.cache.routeExpire,!1),p=await Promise.all(f.filter(e=>i(u)===`/papers`||e.newthisweek).map(e=>{let i=`https://www.nber.org${e.url}`;return t.tryGet(i,async()=>{let t=await a(i),l=c(t),u=l(`meta[name="citation_pdf_url"]`).attr(`content`),d=l(`.page-header__intro-inner`).html();return{title:e.title,author:l(`meta[name="dcterms.creator"]`).attr(`content`),pubDate:r(l(`meta[name="citation_publication_date"]`).attr(`content`),`YYYY/MM/DD`),link:i,doi:l(`meta[name="citation_doi"]`).attr(`content`),description:n(s.join(o,`templates/description-9c2e727f.art`),{fullAbstract:d,downloadLink:u})}})}));return{title:`NBER Working Paper`,link:`https://www.nber.org/papers`,item:p,description:`National Bureau of Economic Research Working Papers articles`}}export{u as handler};
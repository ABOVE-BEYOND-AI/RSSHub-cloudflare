import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import{ofetch_default as n}from"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{timezone as i}from"./timezone-BrxBCotj.js";import a from"node:path";const o={m3u8:`x-mpegURL`,mp3:`mpeg`,mp4:`mp4`,m4a:`mp4`},s={path:`/album/:id`,categories:[`multimedia`],example:`/radio/album/15682090498666`,parameters:{id:`专辑 id，可在对应专辑页面的 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!0,supportScihub:!1},name:`专辑`,maintainers:[`nczitzk`],handler:c,description:"如果订阅 [中国相声榜](https://www.radio.cn/pc-portal/sanji/detail.html?columnId=15682090498666)，其 URL 为 `https://www.radio.cn/pc-portal/sanji/detail.html?columnId=15682090498666`，可以得到 `columnId` 为 `15682090498666`\n\n  所以对应路由为 [`/radio/album/15682090498666`](https://rsshub.app/radio/album/15682090498666)\n\n::: tip\n  部分专辑不适用该路由，此时可以尝试 [节目](#yun-ting-jie-mu) 路由\n:::"};async function c(s){let c=s.req.param(`id`),l=`https://ytweb.radio.cn`,u=`${l}/share/albumDetail?columnId=${c}`,d=await n(`https://ytapi.radio.cn/ytsrv/srv/wifimusicbox/demand/detail`,{method:`POST`,headers:{accept:`application/json, text/plain, */*`,"content-type":`application/x-www-form-urlencoded`,equipmentSource:`WEB`,equipmentType:`3`,platformCode:`H5`,productId:`1605403829833195520`,providerCode:`25010`,referer:`https://ytweb.radio.cn/`,timestamp:String(Date.now()),version:`4.0.0`},body:new URLSearchParams({pageIndex:`0`,sortType:``,mobileId:``,providerCode:`25010`,pid:c,paySongFlag:`1`,richText:`1`,h5flag:`1`}),parseResponse:JSON.parse}),f=d.con.map(n=>{let s=n.playUrlHigh??n.playUrlMedium??n.playUrlLow??n.playUrl;s=/\.m3u8$/.test(s)?n.downloadUrl:s;let u=new URL(s).pathname.split(`.`).pop(),d=u?`audio/${o[u]}`:``;return{guid:n.id,title:n.name,link:`${l}/share/albumPlay?correlateId=${n.id}&columnId=${c}`,description:e(a.join(r,`templates/description-2b297c34.art`),{enclosure_url:s,enclosure_type:d}),pubDate:i(t(n.createTime),8),enclosure_url:s,enclosure_type:d,enclosure_length:n.fileSize,itunes_duration:n.duration,itunes_item_image:n.logoUrl}});return{title:`云听 - ${d.columnName}`,link:u,item:f,image:d.posterInfo.imgUrl,logo:d.logoUrl,description:d.descriptions??d.descriptionSimple,itunes_author:d.ownerNickName||`radio.cn`}}export{s as route};
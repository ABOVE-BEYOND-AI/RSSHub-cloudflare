import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";const a={path:`/:kind?`,categories:[`program-update`],example:`/gofans`,parameters:{kind:"Platform, either `macos` or `ios`, empty means both (default)"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`最新限免 / 促销应用`,maintainers:[`HenryQW`],handler:o};async function o(a){let{kind:o=``}=a.req.param(),s=`https://gofans.cn`,{data:c}=await r(`https://api.gofans.cn/v1/web/app_records`,{headers:{origin:s},searchParams:{limit:20,kind:o&&(o===`macos`?1:2),page:1}}),l=c.data.map(r=>({title:`「${r.price===`0.00`?`免费`:`降价`}」-「${r.kind===1?`macOS`:`iOS`}」${r.name}`,description:e(i.join(n,`templates/description-d95c3846.art`),{icon:r.icon,originalPrice:r.original_price,price:r.price,kind:r.kind,description:r.description.replaceAll(`
`,`<br>`)}),pubDate:t(r.updated_at,`X`),link:new URL(`/app/${r.uuid}`,s).href,category:r.primary_genre_name}));return{title:`最新限免 / 促销应用`,link:s,description:`GoFans：最新限免 / 促销应用`,item:l}}export{a as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";import{load as o}from"cheerio";const s={path:`/:category{.+}?`,radar:[{source:[`asiantolick.com/`],target:``}],name:`Unknown`,maintainers:[],handler:c,url:`asiantolick.com/`};async function c(s){let c=s.req.param(`category`),l=s.req.query(`limit`)?Number.parseInt(s.req.query(`limit`),10):24,u=`https://asiantolick.com`,d=new URL(`ajax/buscar_posts.php`,u).href,f=new URL(c?.replace(/^(tag|category)?\/(\d+)/,`$1-$2`)??``,u).href,p={},m=c?.match(/^(tag|category|search|page)?[/-]?(\w+)/)??void 0;if(m){let e=m[1]===`category`?`cat`:m[1],t=m[2];p[e]=t}else c&&(p.page=`news`);let{data:h}=await i(d,{searchParams:p}),g=o(h),_=g(`a.miniatura`).slice(0,l).toArray().map(e=>{e=g(e);let n=e.find(`div.background_miniatura img`);return{title:e.find(`div.base_tt`).text(),link:e.prop(`href`),description:t(a.join(r,`templates/description-659ed52a.art`),{images:n?[{src:n.prop(`data-src`).split(/\?/)[0],alt:n.prop(`alt`)}]:void 0}),author:e.find(`.author`).text(),category:e.find(`.category`).toArray().map(e=>g(e).text()),guid:n?n.prop(`post-id`):e.link.match(/\/(\d+)/)[1]}});_=await Promise.all(_.map(s=>e.tryGet(s.link,async()=>{let{data:e}=await i(s.link),c=o(e);return s.title=c(`h1`).first().text(),s.description=t(a.join(r,`templates/description-659ed52a.art`),{description:c(`#metadata_qrcode`).html(),images:c(`div.miniatura`).toArray().map(e=>({src:c(e).prop(`data-src`),alt:c(e).find(`img`).prop(`alt`)}))}),s.author=c(`.author`).text(),s.category=c(`#categoria_tags_post a`).toArray().map(e=>c(e).text().trim().replace(/^#/,``)),s.pubDate=n(e.match(/"pubDate":\s"((?!http)[^"]*)"/)[1]),s.updated=n(e.match(/"upDate":\s"((?!http)[^"]*)"/)[1]),s.enclosure_url=new URL(`ajax/download_post.php?ver=3&dir=/down/new_${s.guid}&post_id=${s.guid}&post_name=${e.match(/"title":\s"((?!http)[^"]*)"/)[1]}`,u).href,s.guid=`asiantolick-${s.guid}`,s})));let{data:v}=await i(f);g=o(v);let y=g(`title`).text().split(/-/)[0].trim(),b=g(`link[rel="icon"]`).first().prop(`href`);return{item:_,title:y===`Asian To Lick`?y:`Asian To Lick - ${y}`,link:f,description:g(`meta[property="og:description"]`).prop(`content`),language:g(`html`).prop(`lang`),image:g(`meta[name="msapplication-TileImage"]`).prop(`content`),icon:b,logo:b,subtitle:y,allowEmpty:!0}}export{s as route};
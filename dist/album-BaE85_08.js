import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import"./parse-date-DHsdom8D.js";import"./md5-15Cn4YyR.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import"./got-BaOFZRd4.js";import"./config-not-found-B7nOMdXp.js";import{defaultDomain as r,getApiUrl as i,getRootUrl as a,processApiItems as o}from"./utils-Ca3v7XQt.js";import s from"node:path";const c={path:`/album/:id`,categories:[`anime`],example:`/18comic/album/292282`,parameters:{id:`专辑 id，可在专辑页 URL 中找到`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`jmcomic.group/`]}],name:`专辑`,maintainers:[`nczitzk`],handler:l,url:`jmcomic.group/`,description:`::: tip
  专辑 id 不包括 URL 中标题的部分。
:::`};async function l(c){let l=c.req.param(`id`),{domain:u=r}=c.req.query(),d=a(u),f=`${d}/album/${l}`,p=`${i()}/album?id=${l}`,m=await o(p),h=m.tags,g=m.author.join(`, `),_=m.description,v=m.addtime,y=[];return m.series.length===0?y.push({title:m.name,link:`${d}/photo/${l}`,guid:`${d}/photo/${l}`,updated:new Date(v*1e3),pubDate:new Date(v*1e3),category:h,author:g,description:t(s.join(n,`templates/description-afe7e434.art`),{introduction:_,images:[`https://cdn-msp3.${u}/media/albums/${l}_3x4.jpg`],cover:`https://cdn-msp3.${u}/media/albums/${l}_3x4.jpg`,category:h})}):(y=await Promise.all(m.series.map((r,a)=>e.tryGet(`18comic:album:${r.id}`,async()=>{let e=`${i()}/chapter?id=${r.id}`,c=await o(e),l={},f=a+1;return l.title=`第${String(f)}話 ${r.name===``?`${String(f)}`:r.name}`,l.link=`${d}/photo/${r.id}`,l.guid=`${d}/photo/${r.id}`,l.updated=new Date(c.addtime*1e3),l.pubDate=v,l.category=h,l.author=g,l.description=t(s.join(n,`templates/description-afe7e434.art`),{introduction:_,images:[`https://cdn-msp3.${u}/media/albums/${r.id}_3x4.jpg`],cover:`https://cdn-msp3.${u}/media/albums/${r.id}_3x4.jpg`,category:h}),l}))),y=y.toReversed()),{title:`${m.name} - 禁漫天堂`,link:f.replace(/\?$/,``),item:y,allowEmpty:!0,description:_}}export{c as route};
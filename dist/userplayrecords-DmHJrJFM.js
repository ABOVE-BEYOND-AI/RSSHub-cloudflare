import{config as e}from"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as t}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";const a={cookie:e.ncm.cookies,Referer:`https://music.163.com/`};function o(e){return!e||e.length===0?[{title:`暂无听歌排行`}]:e.map((e,r)=>{let a=e.song,o=a.ar.map(e=>e.name).join(`/`),s=t(i.join(n,`templates/userplayrecords-c3ae0a67.art`),{index:r,record:e,song:a});return{title:`[${r+1}] ${a.name} - ${o}`,link:`http://music.163.com/song?id=${a.id}`,author:o,description:s}})}const s={path:`/music/user/playrecords/:uid/:type?`,categories:[`multimedia`],example:`/163/music/user/playrecords/45441555/1`,parameters:{uid:`用户 uid, 可在用户主页 URL 中找到`,type:`排行榜类型，0所有时间(默认)，1最近一周`},features:{requireConfig:[{name:`NCM_COOKIES`,optional:!0,description:"网易云音乐登陆后的 cookie 值，可在浏览器控制台通过`document.cookie`获取。"}],requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`用户听歌排行`,maintainers:[`alfredcai`],handler:c};async function c(e){let t=e.req.param(`uid`),n=Number.parseInt(e.req.param(`type`))||0,i=`https://music.163.com/api/v1/play/record?uid=${t}&type=${n}`,s=await r(i,{headers:a}),c=n===1?s.data.weekData:s.data.allData;return{title:`${n===1?`听歌榜单（最近一周）`:`听歌榜单（所有时间}`} - ${t}}`,link:`https://music.163.com/user/home?id=${t}`,updated:s.headers.date,item:o(c)}}export{s as route};
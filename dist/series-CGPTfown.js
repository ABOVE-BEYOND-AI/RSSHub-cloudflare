import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{timezone as a}from"./timezone-BrxBCotj.js";import o from"node:path";import*as s from"cheerio";const c=e=>t(o.join(i,`templates/series-6e2b9a1d.art`),e),l={path:`/series/:name`,example:`/yenpress/series/alya-sometimes-hides-her-feelings-in-russian`,parameters:{name:`Series name`},name:`Series`,maintainers:[`TonyRL`],handler:u,radar:[{source:[`yenpress.com/series/:name`],target:`/series/:name`}]};async function u(t){let{name:i}=t.req.param(),o=`https://yenpress.com/series/${i}`,l=await r(o),u=s.load(l),d=u(`.show-more-container .inline_block`).toArray().map(e=>{let t=u(e);return{title:t.find(`span`).text().trim(),link:new URL(t.find(`a`).attr(`href`),`https://yenpress.com`).href}}),f=await Promise.all(d.map(t=>e.tryGet(t.link,async()=>{let e=await r(t.link),i=s.load(e);t.category=i(`.detail-labels.mobile-only`).eq(0).find(`a`).toArray().map(e=>i(e).text().trim()),i(`svg, .social-share, .desktop-only, .detail-labels`).remove();let o=i(`.book-info`).find(`.book-cover-img`).html(),l=i(`.buy-info .deliver`).toArray().map((e,t)=>({deliver:i(e).text().trim(),price:i(`.book-price`).eq(t).text().trim(),from:i(`.services`).eq(t).find(`.service`).toArray().map(e=>{let t=i(e).find(`a`);return{name:t.text().trim(),link:t.attr(`href`)}}),detail:i(`.detail-info`).eq(t).find(`div span`).toArray().map(e=>{let t=i(e);return{key:t.text().trim(),value:t.next().text().trim()}})})),u=i(`.book-info`);return u.find(`.buy-info, .series-cover`).remove(),t.description=c({cover:o+u.html(),bookInfo:l}),t.pubDate=a(n(l[0].detail.find(e=>e.key===`Release Date`).value),0),t})));return{title:u(`head title`).text().trim(),description:u(`.social-share p`).text().trim(),link:o,item:f}}export{l as route};
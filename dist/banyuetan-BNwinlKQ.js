import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{timezone as a}from"./timezone-BrxBCotj.js";import{ViewType as o}from"./types-D9T3SQ-7.js";import s from"node:path";import{load as c}from"cheerio";const l=async o=>{let{id:l=`jinritan`}=o.req.param(),u=Number.parseInt(o.req.query(`limit`)??`30`,10),d=`http://www.banyuetan.org`,f=new URL(`byt/${l}/index.html`,d).href,p=await r(f),m=c(p),h=m(`html`).attr(`lang`)??`zh`,g=[];g=m(`div.bty_tbtj_list ul.clearFix li`).slice(0,u).toArray().map(e=>{let r=m(e),a=r.find(`h3 a`),o=a.text(),c=r.find(`img`).attr(`src`),l=t(s.join(i,`templates/description-881baa33.art`),{images:c?[{src:c,alt:o}]:void 0,intro:r.find(`p`).text()}),u=r.find(`span.tag3`).text(),d=a.attr(`href`),f=u,p={title:o,description:l,pubDate:u?n(u):void 0,link:d,content:{html:l,text:l},image:c,banner:c,updated:f?n(f):void 0,language:h};return p}),g=await Promise.all(g.map(o=>o.link?e.tryGet(o.link,async()=>{let e=await r(o.link),l=c(e),u=l(`div.detail_tit h1`).text(),d=o.description+t(s.join(i,`templates/description-881baa33.art`),{description:l(`div#detail_content`).html()}),f=l(`meta[property="og:release_date"]`).attr(`content`),p=l(`META[name="keywords"]`).attr(`content`)?.split(/,/)??[],m=[...l(`META[name="author"]`).toArray(),...l(`META[name="source"]`).toArray()],g=m.map(e=>{let t=l(e);return{name:t.attr(`content`),url:void 0,avatar:void 0}}),_=l(`meta[property="og:image"]`).attr(`content`),v=f,y={title:u,description:d,pubDate:f?a(n(f),8):o.pubDate,category:p,author:g,content:{html:d,text:d},image:_,banner:_,updated:v?a(n(v),8):o.updated,language:h};return{...o,...y}}):o));let _=m(`title`).text();return{title:_,description:_,link:f,item:g,allowEmpty:!0,image:new URL(`static/v1/image/logo.png`,d).href,author:_.split(/—/).pop(),language:h,id:f}},u={path:`/:id?`,name:`栏目`,url:`www.banyuetan.org`,maintainers:[`nczitzk`],handler:l,example:`/banyuetan/jinritan`,parameters:{id:{description:"栏目 ID，默认为 `jinritan`，即今日谈，可在对应分类页 URL 中找到",options:[{label:`今日谈`,value:`jinritan`},{label:`时政讲解`,value:`shizhengjiangjie`},{label:`评论`,value:`banyuetanpinglun`},{label:`基层治理`,value:`jicengzhili`},{label:`文化`,value:`wenhua`},{label:`教育`,value:`jiaoyu`}]}},description:`:::tip
订阅 [今日谈](http://www.banyuetan.org/byt/jinritan/)，其源网址为 \`http://www.banyuetan.org/byt/jinritan/\`，请参考该 URL 指定部分构成参数，此时路由为 [\`/banyuetan/jinritan\`](https://rsshub.app/banyuetan/jinritan)。
:::

| 栏目                                                                 | ID                                                                |
| -------------------------------------------------------------------- | ----------------------------------------------------------------- |
| [今日谈](http://www.banyuetan.org/byt/jinritan/index.html)           | [jinritan](https://rsshub.app/banyuetan/jinritan)                 |
| [时政讲解](http://www.banyuetan.org/byt/shizhengjiangjie/index.html) | [shizhengjiangjie](https://rsshub.app/banyuetan/shizhengjiangjie) |
| [评论](http://www.banyuetan.org/byt/banyuetanpinglun/index.html)     | [banyuetanpinglun](https://rsshub.app/banyuetan/banyuetanpinglun) |
| [基层治理](http://www.banyuetan.org/byt/jicengzhili/index.html)      | [jicengzhili](https://rsshub.app/banyuetan/jicengzhili)           |
| [文化](http://www.banyuetan.org/byt/wenhua/index.html)               | [wenhua](https://rsshub.app/banyuetan/wenhua)                     |
| [教育](http://www.banyuetan.org/byt/jiaoyu/index.html)               | [jiaoyu](https://rsshub.app/banyuetan/jiaoyu)                     |

`,categories:[`traditional-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.banyuetan.org/byt/:id`],target:`/:id`},{title:`今日谈`,source:[`www.banyuetan.org/byt/jinritan/index.html`],target:`/jinritan`},{title:`时政讲解`,source:[`www.banyuetan.org/byt/shizhengjiangjie/index.html`],target:`/shizhengjiangjie`},{title:`评论`,source:[`www.banyuetan.org/byt/banyuetanpinglun/index.html`],target:`/banyuetanpinglun`},{title:`基层治理`,source:[`www.banyuetan.org/byt/jicengzhili/index.html`],target:`/jicengzhili`},{title:`文化`,source:[`www.banyuetan.org/byt/wenhua/index.html`],target:`/wenhua`},{title:`教育`,source:[`www.banyuetan.org/byt/jiaoyu/index.html`],target:`/jiaoyu`}],view:o.Articles};export{l as handler,u as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import{rss_parser_default as a}from"./rss-parser-Dx7FersL.js";import o from"node:path";import{load as s}from"cheerio";const c=e=>{let n=e(`figure.mainPhoto`),i=n.find(`img`),a=n.find(`span.copyright`),s=n.find(`span.imageDescription`);return t(o.join(r,`templates/image-230aff8e.art`),{url:i.attr(`src`),alt:i.attr(`alt`)?.trim(),author:a.text()?.trim(),caption:s.text()?.trim()})},l=e=>{let n=e(`[itemprop="articleBody"]`);return e(`*`).contents().filter(function(){return this.nodeType===8}).remove(),n.find(`aside`).remove(),n.find(`.videoPlayerContainer`).remove(),n.find(`.pulsevideo`).remove(),n.find(`.adsContainer`).remove(),n.find(`.placeholder`).remove(),n.find(`.contentPremium`).removeAttr(`style`),n.find(`div.image`).each((n,i)=>{let a=e(i).find(`img`),s=e(i).find(`span.author`),c=e(i).find(`span.caption`),l=t(o.join(r,`templates/image-230aff8e.art`),{url:a.attr(`src`),alt:a.attr(`alt`)?.trim(),caption:c.text()?.trim(),author:s.text()?.trim()});e(i).replaceWith(l)}),n},u={path:`/news`,categories:[`new-media`],example:`/onet/news`,parameters:{},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`wiadomosci.onet.pl/`]}],name:`News`,maintainers:[`Vegann`],handler:d,url:`wiadomosci.onet.pl/`,description:"This route provides a better reading experience (full text articles) over the official one for `https://wiadomosci.onet.pl`."};async function d(){let u=await a.parseURL(`https://wiadomosci.onet.pl/.feed`),d=await Promise.all(u.items.map(async a=>{let{description:u,author:d,category:f}=await e.tryGet(a.link,async()=>{let{data:e}=await i(a.link,{headers:{referer:`https://www.onet.pl/`}}),n=s(e),u=l(n),d=c(n),f=t(o.join(r,`templates/article-fc2b2fbf.art`),{mainImage:d,lead:n(`#lead`).text()?.trim(),content:u.html()?.trim()}),p=n(`.authorNameWrapper span[itemprop="name"]`).text()?.trim(),m=n(`span.relatedTopic`).text()?.trim();return{description:f,author:p,category:m}});return{title:a.title,link:a.link,description:u,author:d,category:f,pubDate:n(a.pubDate),guid:a.id}}));return{title:u.title,link:u.link,description:u.title,item:d,language:`pl`,image:`https://ocdn.eu/wiadomosciucs/static/logo2017/onet2017big_dark.png`}}export{u as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as t}from"./esm-shims-BDPl6Msv.js";import{got_default as n}from"./got-BaOFZRd4.js";import r from"node:path";import{load as i}from"cheerio";const a=`https://www.patagonia.com`,o={mens:[`mens-new`,`mens-new-arrivals`],womens:[`womens-new`,`womens-new-arrivals`],kids:[`kids-new-arrivals`,`kids-baby-new-arrivals`],luggage:[`luggage-new-arrivals`,`luggage-new-arrivals`]};function s(e){let t=new URL(e),n=t.searchParams.get(`sfrm`);return t.search=new URLSearchParams({sfrm:n}).toString(),t.toString()}const c={path:`/new-arrivals/:category`,categories:[`shopping`],example:`/patagonia/new-arrivals/mens`,parameters:{category:`category, see below`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`New Arrivals`,maintainers:[],handler:l,description:`| Men's | Women's | Kids' & Baby | Packs & Gear |
| ----- | ------- | ------------ | ------------ |
| mens  | womens  | kids         | luggage      |`};async function l(c){let l=c.req.param(`category`),u=`${a}/on/demandware.store/Sites-patagonia-us-Site/en_US/Search-LazyGrid`,d=await n({method:`get`,url:u,searchParams:{cgid:o[l][0],isLazyGrid:!0}}),f=d.data,p=i(f),m=p(`.product`).toArray().map(n=>{let i={};i.title=p(n).find(`.product-tile`).data(`tealium`).product_name[0];let o=new URL(p(n).find(`[itemprop="image"]`).attr(`content`));o=s(o);let c=p(n).find(`[itemprop="price"]`).eq(0).text();return i.link=a+`/`+p(n).find(`[itemprop="url"]`).attr(`href`),i.description=c+e(r.join(t,`templates/product-description-5678e430.art`),{imgUrl:o}),i.category=p(n).find(`[itemprop="category"]`).attr(`content`),i});return{title:`Patagonia - New Arrivals - ${l.toUpperCase()}`,link:`${a}/shop/${o[l][1]}`,description:`Patagonia - New Arrivals - ${l.toUpperCase()}`,item:m}}export{c as route};
import{config as e}from"./config-HRWLmo66.js";import{cache_default as t}from"./cache-C3AIQtoX.js";import{art as n}from"./render-DE4LRFBD.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import a from"node:path";const o=`https://skeb.jp`;function s(e){if(!e||typeof e!=`object`||e.private===!0)return null;let t=e.thumbnail_image_urls?.srcset?.split(`,`).pop()?.trim().split(` `)[0]||``,r=e.body||``,s=e.genre===`music`||e.genre===`voice`?e.preview_url:null,c=n(a.join(i,`templates/work-99aa5c91.art`),{imageUrl:t,body:r,audioUrl:s});return{title:e.path||``,link:`${o}${e.path||``}`,description:c}}const c={art:`Illust`,voice:`Voice`,novel:`Novel`,video:`Video`,music:`Music`,correction:`Advice`,comic:`Comic`};function l(e){if(!e||typeof e!=`object`)return null;let t=e.avatar_url||``,r;if(e.creator){let o=e.acceptable?`Yes`:`No`,s=e.nsfw_acceptable?`Yes`:`No`,l=``;Array.isArray(e.skills)&&e.skills.length>0&&(l=e.skills.map(e=>c[e.genre]||e.genre).filter(Boolean).join(`, `)),r=n(a.join(i,`templates/creator-f3fb4f56.art`),{avatarUrl:t,acceptingCommissions:o,nsfwAcceptable:s,skills:l})}return{title:e.name||``,link:`${o}/@${e.screen_name||``}`,description:r}}async function u(n,i){let a=`${o}/api/users/${n.replace(`@`,``)}/followings`,c=await t.tryGet(`skeb:followings_data:${n}`,async()=>{let t=await r(a,{headers:{Authorization:`Bearer ${e.skeb.bearerToken}`}});return t},e.cache.routeExpire,!1);if(!c||typeof c!=`object`)throw Error(`Failed to fetch followings data`);return i===`following_creators`?c[i].map(e=>l(e)).filter(Boolean):c[i].map(e=>s(e)).filter(Boolean)}export{o as baseUrl,u as getFollowingsItems,l as processCreator,s as processWork};
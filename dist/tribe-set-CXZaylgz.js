import{config as e}from"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as t}from"./cache-C3AIQtoX.js";import{art as n}from"./render-DE4LRFBD.js";import{parseDate as r}from"./parse-date-DHsdom8D.js";import{ofetch_default as i}from"./ofetch-DRl42yaJ.js";import{__dirname as a}from"./esm-shims-BDPl6Msv.js";import{ViewType as o}from"./types-D9T3SQ-7.js";import s from"node:path";import{load as c}from"cheerio";const l=`https://500px.com.cn`,u={"x-500px-client-info":`eyJhbm9ueW1vdXNJZCI6IiIsImxhdGl0dWRlIjpudWxsLCJsb25naXR1ZGUiOm51bGwsIm1hbnVmYWN0dXJlciI6IiIsInByb3ZpbmNlIjoiIiwiYXJlYSI6IiIsImNpdHkiOiIifQ==`,"X-Tingyun-Id":`Fm3hXcTiLT8;r=${Date.now()%1e8}`},d=n=>t.tryGet(`500px:tribeDetail:${n}`,async()=>{let e=await i(`${l}/community/tribe/tribeDetail`,{headers:{...u},query:{tribeId:n}});return e.data},e.cache.routeExpire,!1),f=(n,r)=>t.tryGet(`500px:tribeSets:${n}`,async()=>{let e=await i(`${l}/community/tribe/getTribeSetsV2`,{headers:{...u},query:{tribeId:n,privacy:1,page:1,size:r,type:`json`}});return e.data},e.cache.routeExpire,!1),p={path:`/tribe/set/:id`,categories:[`picture`],view:o.Pictures,example:`/500px/tribe/set/f5de0b8aa6d54ec486f5e79616418001`,parameters:{id:`部落 ID`},name:`部落影集`,maintainers:[`TonyRL`],handler:m};async function m(e){let t=e.req.param(`id`),i=Number.parseInt(e.req.query(`limit`))||100,{tribe:o}=await d(t),c=await f(t,i),u=c.map(e=>({title:e.title,description:n(s.join(a,`templates/tribeSet-3e687c05.art`),{item:e}),author:e.uploaderInfo.nickName,pubDate:r(e.createdTime,`x`),link:`${l}/community/set/${e.id}/details`}));return{title:o.name,description:`${o.watchword} - ${o.introduce}`,link:`${l}/page/tribe/detail?tribeId=${t}&pagev=set`,image:o.avatar.a1,item:u}}export{p as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import"./timezone-BrxBCotj.js";import{notesUrl as i,ssoUrl as a}from"./utils-B6ORIvNV.js";import o from"node:path";import{load as s}from"cheerio";const c={path:`/notes/:lang?/note/:id`,categories:[`anime`],example:`/qoo-app/notes/en/note/2329113`,parameters:{lang:"Language, see the table above, empty means `中文`",id:`Note ID, can be found in URL`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Note Comments`,maintainers:[`TonyRL`],handler:l};async function l(c){let l=c.req.param(`id`),u=`${a}/api/v1/comments`,d=`${i}/note/${l}`,{data:f}=await r(d),p=s(f),{data:m}=await r(u,{searchParams:{sort:`newest`,for:`web`,limit:c.req.query(`limit`)?Number.parseInt(c.req.query(`limit`)):100,type:`note`,object_id:l}}),h=m.data.map(r=>({title:r.content,description:e(o.join(n,`templates/note-4d6e8c65.art`),{content:r.content,picture:r.picture}),pubDate:t(r.created_timestamp),author:r.user.name,guid:`qoo-app:notes:note:${l}:${r.id}`}));return{title:p(`head title`).text(),link:d,language:p(`html`).attr(`lang`),item:h}}export{c as route};
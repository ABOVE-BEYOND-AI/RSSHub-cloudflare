import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";import a from"aes-js";const o={path:`/search/:wd`,categories:[`shopping`],example:`/duozhuayu/search/JavaScript`,parameters:{wd:`搜索关键词`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`duozhuayu.com/search/book/:wd`]}],name:`搜索结果`,maintainers:[`fengkx`],handler:s};async function s(o){let s=o.req.param(`wd`),c=`https://www.duozhuayu.com`,l=`book`,u=`${c}/search/${l}/${s}`,d=[...`DkOliWvFNR7C4WvR`].map(e=>e.charCodeAt()),f=[...`GQWKUE2CVGOOBKXU`].map(e=>e.charCodeAt()),p=new a.ModeOfOperation.cfb(d,f),m=e=>{let t=a.utils.utf8.toBytes(e),n=p.encrypt(t);return a.utils.hex.fromBytes(n)},h=()=>{let e=Date.now(),t=Math.floor(1e8*Math.random()),n=m([e,0,t].join(`:`)),r=[0,e,Math.round(1e5*Math.random())].join(`-`);return{"x-api-version":`0.0.48`,"x-refer-request-id":r,"x-request-id":r,"x-request-misc":`{"platform":"browser","originSource":"search","originFrom":"normal","webVersion":"1.2.201774"}`,"x-request-token":n,"x-security-key":t,"x-timestamp":e,"x-user-id":0}},g=await r({method:`get`,url:`${c}/api/search/book`,searchParams:{type:`normal`,q:s},headers:h()}),_=g.data.data.filter(e=>e.type===l).map(({[l]:r})=>({title:r.title,link:`${c}/books/${r.id}`,pubDate:t(r.updated),description:e(i.join(n,`templates/book-97e9ed1e.art`),{item:r})}));return{title:`多抓鱼搜索-${s}`,link:u,description:`多抓鱼搜索-${s}`,item:_}}export{o as route};
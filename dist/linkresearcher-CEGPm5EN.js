import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{ViewType as a}from"./types-D9T3SQ-7.js";import{invalid_parameter_default as o}from"./invalid-parameter-CfUmvEUg.js";import s from"node:path";import c from"node:crypto";const l=s.join(i,`templates/bilingual-537f83c2.art`),u=`https://www.linkresearcher.com`,d=`${u}/api`,f={name:`Articles`,path:`/:params`,example:`/linkresearcher/category=theses&columns=Nature%20导读&subject=生物`,maintainers:[`y9c`,`KarasuShin`],handler:p,view:a.Articles,categories:[`journal`],parameters:{params:{description:"search parameters, support `category`, `subject`, `columns`, `query`"}},zh:{name:`文章`},"zh-TW":{name:`文章`}};async function p(i){let a={theses:`论文`,information:`新闻`,careers:`职业`},s=i.req.param(`params`),f=new URLSearchParams(s),p=f.get(`subject`),m=f.get(`columns`),h=f.get(`query`)??``,g=f.get(`category`)??`theses`;if(!(g in a))throw new o(`Invalid category`);let _=a[g],v=c.randomUUID(),y={filters:{status:!0}};p&&(y.filters.subject=p,_=`${_}「${p}」`),m&&(y.filters.columns=m,_=`${_}「${m}」`);let b=`${u}/api/${g===`careers`?`articles`:g}/search`,x=await r(b,{method:`POST`,headers:{"content-type":`application/json; charset=UTF-8`,"x-xsrf-token":v,cookie:`XSRF-TOKEN=${v}`},params:{from:0,size:20,type:g===`careers`?`CAREER`:`SEARCH`},body:{...y,query:h}}),S=await Promise.all(x.hits.map(i=>{let a=`${u}/${g}/${i.id}`;return e.tryGet(a,async()=>{let e=await r(`${d}/${g===`theses`?`theses`:`information`}/${i.id}`,{responseType:`json`}),o={title:e.title,pubDate:n(e.onlineTime),link:a,image:e.cover};if(o.description=`zhTextList`in e&&`enTextList`in e?t(l,{zh:e.zhTextList,en:e.enTextList}):e.content,`paperList`in e){let{doi:t,authors:n}=e.paperList[0];o.doi=t,o.author=n.map(e=>({name:e}))}return o})}));return{title:`领研 | ${_}`,description:`领研是链接华人学者的人才及成果平台。领研为国内外高校、科研机构及科技企业提供科研人才招聘服务，也是青年研究者的职业发展指导及线上培训平台；研究者还可将自己的研究论文上传至领研，与超过五十万华人学者分享工作的最新进展。`,image:`${u}/assets/images/logo-app.png`,link:u,item:S}}export{f as route};
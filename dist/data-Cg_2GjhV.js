import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import"./got-BaOFZRd4.js";import{invalid_parameter_default as r}from"./invalid-parameter-CfUmvEUg.js";import{getData as i}from"./utils-MnQpO9vb.js";import a from"node:path";const o={path:`/news/coronavirus/data/:province?/:city?`,name:`Unknown`,maintainers:[`CaoMeiYouRen`],handler:s};async function s(o){let s=o.req.param(`province`)||``,c=o.req.param(`city`)||``,l=`https://news.qq.com/zt2020/page/feiyan.htm#/`,u=[],d=(await i([`diseaseh5Shelf`]))?.data?.diseaseh5Shelf||{},{lastUpdateTime:f,areaTree:p}=d,m=p?.[0],h=m?.children,g=0,_=0,v=0,y=0,b={},x=``;if(!s||s===`中国`||s===`全国`?(b=m,x=`中国`):(b=h?.find(e=>e.name===s),x=s,c&&(b=b?.children?.find(e=>e.name===c),b&&(x=`${s}-${c}`))),!b)throw new r(`未找到 ${x} 的疫情数据，请检查输入的省市名称是否正确`);g=b.today?.confirm,_=b.total?.nowConfirm,v=b.total?.confirm,y=b.total?.dead;let S=t(b.total?.mtime||f),C=`${x} - 腾讯新闻 - 新型冠状病毒肺炎疫情实时追踪`,w={title:`${x} - 疫情数据`,description:e(a.join(n,`templates/data-1fa59e84.art`),{todayConfirm:g,totalNowConfirm:_,totalConfirm:v,totalDead:y}),pubDate:S,guid:`${l}${x}?pubDate=${S.toISOString()}`};return u.push(w),{title:C,link:l,item:u}}export{o as route};
import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";import{load as a}from"cheerio";import o from"iconv-lite";const s=`https://www.cartoonmad.com`,c=(e,{chapter:r,pages:a})=>{let o=``;for(let c=1;c<=a;c++){let a=`${s}/5e585/${e}/${r}/${String(c).padStart(3,`0`)}.jpg`;o+=t(i.join(n,`templates/chapter-d81f608f.art`),{url:a})}return o},l=(e,t,n)=>Promise.all(t.map(t=>n(t.link,()=>(t.description=c(e,t),t)))),u={path:`/comic/:id`,categories:[`anime`],example:`/cartoonmad/comic/5827`,parameters:{id:`漫画ID`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`cartoonmad.com/comic/:id`]}],name:`漫画更新`,maintainers:[`KellyHwong`],handler:d};async function d(t){let n=t.req.param(`id`),i=`${s}/comic/${n}`,{data:c}=await r(i,{responseType:`buffer`,headers:{Referer:`https://www.cartoonmad.com/`}}),u=o.decode(c,`big5`),d=a(u),f=d(`#info`).eq(0).find(`td`).text().trim(),p=d(`#info`).eq(1).find(`a`).toArray().map(e=>(e=d(e),{title:e.text(),link:`${s}${e.attr(`href`)}`,chapter:e.text().match(/\d+/)[0],pages:e.next(`font`).text().match(/\d+/)[0]})).toReversed(),m=await l(n,p,e.tryGet);return{title:d(`head title`).text(),link:i,description:f,item:m}}export{u as route};
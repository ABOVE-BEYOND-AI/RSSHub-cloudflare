import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import{ofetch_default as r}from"./ofetch-DRl42yaJ.js";import{__dirname as i}from"./esm-shims-BDPl6Msv.js";import{ViewType as a}from"./types-D9T3SQ-7.js";import o from"node:path";import{load as s}from"cheerio";const c=async a=>{let{id:c=`all`}=a.req.param(),l=Number.parseInt(a.req.query(`limit`)??`50`,10),u=`https://www.cbndata.com`,d=new URL(`information?tag_id=${c}`,u).href,f=new URL(`api/v3/informations`,u).href,p=await r(d),m=s(p),h=m(`html`).attr(`lang`)??`zh`,g=await r(f,{query:{page:1,per_page:l}}),_=[];_=g.data.slice(0,l).map(e=>{let r=e.title,a=e.image,s=t(o.join(i,`templates/description-16be3a2a.art`),{images:a?[{src:a,alt:r}]:void 0}),c=e.date,l=e.id?`information/${e.id}`:void 0,d=e.tags,f=`cbndata-information-${e.id}`,p=c,m={title:r,description:s,pubDate:c?n(c):void 0,link:l?new URL(l,u).href:void 0,category:d,guid:f,id:f,content:{html:s,text:s},image:a,banner:a,updated:p?n(p):void 0,language:h};return m}),_=await Promise.all(_.map(a=>a.link?e.tryGet(a.link,async()=>{let e=await r(a.link),s=e.match(/<script>window\.__INITIAL_STATE__=(.*?);<\/script>/)?.[1];if(!s)return a;let c=JSON.parse(s)?.data;if(!c)return a;let l=c.title,d=a.description+t(o.join(i,`templates/description-16be3a2a.art`),{description:c.content}),f=c.date,p=c.id?`information/${c.id}`:void 0,m=[...new Set((c.tags?.map(e=>e.name)??[]).filter(Boolean))],g=[{name:c.author,url:void 0,avatar:void 0}],_=`cbndata-information-${c.id}`,v=c.thumbnail_url,y=f,b={title:l,description:d,pubDate:f?n(f):void 0,link:p?new URL(p,u).href:void 0,category:m,author:g,guid:_,id:_,content:{html:d,text:d},image:v,banner:v,updated:y?n(y):void 0,language:h};return{...a,...b}}):a));let v=g.home_tags.find(e=>String(e.id)===c)?.name??``,y=`${v?`${v}-`:``}${m(`title`).text().trim()}`;return{title:y,description:m(`meta[name="description"]`).attr(`content`),link:d,item:_,allowEmpty:!0,image:m(`img.logo-logoImage`).attr(`src`),author:y.split(/\|/).pop(),language:h,id:d}},l={path:`/information/:id?`,name:`看点`,url:`www.cbndata.com`,maintainers:[`nczitzk`],handler:c,example:`/cbndata/information/all`,parameters:{id:{description:"分类，默认为 `all`，即全部，可在对应分类页 URL 中找到",options:[{label:`全部`,value:`all`},{label:`美妆个护`,value:`1`},{label:`服饰鞋包`,value:`2559`},{label:`宠物`,value:`2419`},{label:`营销`,value:`2484`}]}},description:`:::tip
订阅 [美妆个护](https://www.cbndata.com/information?tag_id=1)，其源网址为 \`https://www.cbndata.com/information?tag_id=1\`，请参考该 URL 指定部分构成参数，此时路由为 [\`/cbndata/information/1\`](https://rsshub.app/cbndata/information/1)。
:::

| 分类                                                        | ID                                                  |
| ----------------------------------------------------------- | --------------------------------------------------- |
| [全部](https://www.cbndata.com/information?tag_id=all)      | [all](https://rsshub.app/cbndata/information/all)   |
| [美妆个护](https://www.cbndata.com/information?tag_id=1)    | [1](https://rsshub.app/cbndata/information/1)       |
| [服饰鞋包](https://www.cbndata.com/information?tag_id=2559) | [2559](https://rsshub.app/cbndata/information/2559) |
| [宠物](https://www.cbndata.com/information?tag_id=2419)     | [2419](https://rsshub.app/cbndata/information/2419) |
| [营销](https://www.cbndata.com/information?tag_id=2484)     | [2484](https://rsshub.app/cbndata/information/2484) |
`,categories:[`new-media`],features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportRadar:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`www.cbndata.com/information`],target:(e,t)=>{let n=new URL(t),r=n.searchParams.get(`tag_id`)??void 0;return`/information${r?`/${r}`:``}`}},{title:`全部`,source:[`www.cbndata.com/information`],target:`/information/all`},{title:`美妆个护`,source:[`www.cbndata.com/information`],target:`/information/1`},{title:`服饰鞋包`,source:[`www.cbndata.com/information`],target:`/information/2559`},{title:`宠物`,source:[`www.cbndata.com/information`],target:`/information/2419`},{title:`营销`,source:[`www.cbndata.com/information`],target:`/information/2484`}],view:a.Articles};export{c as handler,l as route};
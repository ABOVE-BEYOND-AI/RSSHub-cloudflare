import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{art as e}from"./render-DE4LRFBD.js";import{parseDate as t}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import{ViewType as i}from"./types-D9T3SQ-7.js";import a from"node:path";import{load as o}from"cheerio";const s={path:`/news/:language`,categories:[`design`],view:i.Pictures,example:`/jimmyspa/news/tw`,parameters:{language:{description:`语言`,options:[{value:`tw`,label:`臺灣正體`},{value:`en`,label:`English`},{value:`jp`,label:`日本語`}]}},radar:[{source:[`www.jimmyspa.com/:language/News`]}],name:`News`,description:`
| language | Description |
| ---   | ---   |
| tw | 臺灣正體 |
| en | English |
| jp | 日本語 |
    `,maintainers:[`Cedaric`],handler:c};async function c(t){let i=t.req.param(`language`),s=`https://www.jimmyspa.com`,c=new URL(`/${i}/News/Ajax/changeList?year=&keyword=&categoryId=0&page=1`,s).href,u=await r(c),d=o(u.data.view),f=d(`ul#appendNews li.card_block`).toArray().map(t=>{let r=o(t),i=r(`a.news_card .info_wrap h3`).text(),s=r(`a.news_card .card_img img`).prop(`src`)||``,c=r(`a.news_card`).prop(`data-route`),u=r(`a.news_card div.date`).html()||``,d=l(u.toString()),f=e(a.join(n,`templates/description-16be3a2a.art`),{images:s?[{src:s,alt:i}]:void 0,description:r(`a.news_card .info_wrap p`).text()});return{title:i,link:c,description:f,pubDate:d,content:{html:f,text:i}}});return{title:`幾米 - 最新消息(${i})`,link:`${s}/${i}/News`,allowEmpty:!0,item:f}}function l(e){let n=/<p>(\d{1,2})<\/p>\s*<p>(\d{1,2})\s*\.\s*([A-Za-z]{3})<\/p>/,r=e.match(n);if(r){let e=Number.parseInt(r[1])+1,n=r[2],i=r[3],a={Jan:`01`,Feb:`02`,Mar:`03`,Apr:`04`,May:`05`,Jun:`06`,Jul:`07`,Aug:`08`,Sep:`09`,Oct:`10`,Nov:`11`,Dec:`12`},o=a[i]||``;return t(`20${n}-${o}-${e}`)}}export{s as route};
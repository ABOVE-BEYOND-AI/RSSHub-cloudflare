import{art as e}from"./render-DE4LRFBD.js";import{ofetch_default as t}from"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import r from"node:path";import{load as i}from"cheerio";const a=`https://www.app-sales.net`,o=(e,t,n)=>t?.trim()?`[${[e&&`${e}â†’`,t,n&&` ${n}`].filter(Boolean).join(``)}]`:``,s=(t,i)=>t(i).toArray().map(i=>{let a=t(i),s=a.find(`p.app-name`).text()?.trim(),c=a.find(`p.app-dev`).text()?.trim(),l=a.find(`p.app-dev`).next(`p`)?.text()?.trim()??``,u=a.find(`p.rating`).contents().last().text()?.trim(),d=a.find(`p.downloads`).contents().last().text()?.trim(),f=a.find(`p.bookmarks`).contents().last().text()?.trim(),p=a.find(`div.price-new`).text()?.trim(),m=a.find(`div.price-old`).text()?.trim(),h=a.find(`div.price-disco`).text()?.trim(),g=a.hasClass(`sale-hot`),_=p?.toLocaleUpperCase()===`FREE`,v=`${s} ${o(m,p,h)}`,y=a.find(`div.app-icon img`).attr(`src`),b=a.find(`div.sale-list-action a`).attr(`href`),x=e(r.join(n,`templates/description-4540098f.art`),{images:y?[{alt:`${s}-${c}`,src:y}]:void 0,appName:s,appDev:c,appNote:l,rating:u,downloads:d,bookmarks:f,priceNew:p,priceOld:m,priceDisco:h,linkUrl:b}),S=[g?`Hot`:void 0,_?`Free`:void 0].filter(Boolean),C=c,w=[s,c,u,d,f,p].filter(Boolean).join(`-`),T={title:v.trim(),description:x,link:b,category:S,author:C,guid:w,id:w,content:{html:x,text:x},image:y,banner:y};return T}),c=(e,t)=>e(`ul.pagination li.waves-effect a`).slice(0,-1).toArray().filter(t=>{let n=e(t);return n.attr(`href`)}).map(n=>{let r=e(n);return new URL(r.attr(`href`),t).href}),l=async(e,n,r,a,o)=>{let l=s(e,n);if(l.length>=o)return l.slice(0,o);let u=async(e,r)=>{if(r.length>=o||e.length===0)return r.slice(0,o);let[c,...l]=e;try{let e=await t(c,{headers:{Cookie:`countryId=${a};`}}),d=s(i(e),n),f=[...r,...d];return f.length>=o?f.slice(0,o):u(l,f)}catch{return u(l,r)}};return await u(c(e,r),l)};export{a as baseUrl,l as fetchItems};
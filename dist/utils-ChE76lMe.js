import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{ofetch_default as n}from"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import i from"node:path";import{load as a}from"cheerio";const o=(e=`zh_CN`)=>`X-UA=${encodeURIComponent(`V=1&PN=WebApp&VN=0.1.0&LANG=${e}&PLT=PC`)}`,s=(e=!1)=>e?`https://www.taptap.io`:`https://www.taptap.cn`,c=(t,r=`zh_CN`,i=!1)=>e.tryGet(`taptap:appDetail:${t}:${r}:${i}`,async()=>{let e=await n(`${s(i)}/webapiv2/group/v1/detail?app_id=${t}&${o(r)}`,{headers:{Referer:`${s(i)}/app/${t}`}});return e.data}),l=e=>t(i.join(r,`templates/imagePost-75c674ab.art`),{images:e}),u=async(e,t,r=`zh_CN`)=>{let i=await n(`${s(!1)}/webapiv2/topic/v1/detail?id=${t}&${o(r)}`,{headers:{Referer:`${s(!1)}/app/${e}`}}),c=a(i.data.first_post.contents.text,null,!1);return c(`img`).each((e,t)=>{let n=c(t);n.attr(`src`,n.attr(`data-origin-url`)),n.removeAttr(`data-origin-url`)}),c.html()},d=e=>t(i.join(r,`templates/videoPost-d7476920.art`),{previewUrl:e.thumbnail.original_url||e.thumbnail.url});export{o as X_UA,c as appDetail,s as getRootUrl,l as imagePost,u as topicPost,d as videoPost};
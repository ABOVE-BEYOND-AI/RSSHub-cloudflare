import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import{timezone as a}from"./timezone-BrxBCotj.js";import o from"node:path";import{load as s}from"cheerio";const c={ggtz:{url:`https://www.hafu.edu.cn/index/ggtz.htm`,root:`https://www.hafu.edu.cn/`,title:`河南财院 - 公告通知`,parseFn:m},jwc:{url:`https://jwc.hafu.edu.cn/tzgg.htm`,root:`https://jwc.hafu.edu.cn/`,title:`河南财院 教务处 - 公告通知`,parseFn:h},zsjyc:{url:`https://zsjyc.hafu.edu.cn/tztg.htm`,root:`https://zsjyc.hafu.edu.cn/`,title:`河南财院 招生就业处 - 公告通知`,parseFn:g}};let l=10;const u=async(e,t)=>{let n=c[t].url,r=c[t].title,a=await i(n),o=s(a.data);l=e.req.query(`limit`)||l;let u=await c[t].parseFn(e,o);return{title:r,link:n,resultList:u}};var d=u;async function f(e,n,a){let c=``,l=``;try{let e=await i(n);c=s(e.data);let u=c(`div[class=v_news_content]`).html();c(`[id^=nattach]`).length!==0&&(u=p(c,u,a)),l=t(o.join(r,`templates/hafu-458f12c2.art`),u)()}catch{l=e}return{articleData:c,description:l}}function p(e,t,n){return n===`ggtz`?e(`[id^=nattach]`).prev().map((n,r)=>{let i=e(r).attr(`href`).slice(1),a=c.ggtz.root+i,o=e(r).text();return t+=`<br/>`,t+=`<a href=${a}>${o}</a>`,null}):e(`[id^=nattach]`).parent().prev().map((r,i)=>{let a=e(i).find(`a`).attr(`href`).slice(1),o=c[n].root+a,s=e(i).find(`a`).find(`span`).text();return t+=`<br/>`,t+=`<a href=${o}> ${s} </a>`,null}),t}async function m(t,r){let i=r(`a[class=c269582]`).parent().slice(0,l),o=await Promise.all(i.toArray().map(async t=>{let i=r(t).find(`a[class=c269582]`).attr(`href`).slice(3),o=c.ggtz.root+i,s=r(t).find(`a[class=c269582]`).attr(`title`),l=await e.tryGet(o,async()=>{let{articleData:e,description:c}=await f(i,o,`ggtz`),l=``,u=``;if(typeof e==`function`){let t=e(`h1`).next().text(),r=t.indexOf(`日期`);l=t.slice(0,r-2)||``;let i=t.substring(r+3,r+19);u=n(i,`YYYY-MM-DD HH:mm`)}else{let e=r(t).find(`a[class=c269582_date]`).text();u=n(e,`YYYY-MM-DD`)}return{title:s,description:c,pubDate:a(u,8),link:o,author:l}});return l}));return o}async function h(t,r){let i=r(`a[class=c259713]`).parent().parent().slice(0,l),o=await Promise.all(i.toArray().map(async t=>{let i=r(t).find(`a[class=c259713]`).attr(`href`),o=c.jwc.root+i,s=r(t).find(`a[class=c259713]`).attr(`title`),l=r(t).find(`span[class=timestyle259713]`).text(),u=n(l,`YYYY/MM/DD`),d=await e.tryGet(o,async()=>{let{articleData:e,description:t}=await f(i,o,`jwc`),n=``;return typeof e==`function`&&(n=e(`span[class=authorstyle259690]`).text()),{title:s,description:t,pubDate:a(u,8),link:o,author:`供稿单位：`+n}});return d}));return o}async function g(t,r){let i=r(`a[class=c127701]`).parent().parent().slice(0,l),o=await Promise.all(i.toArray().map(async t=>{let i=r(t).find(`a[class=c127701]`).attr(`href`),o=c.zsjyc.root+i,s=r(t).find(`a[class=c127701]`).attr(`title`),l=await e.tryGet(o,async()=>{let{articleData:e,description:c}=await f(i,o,`zsjyc`),l=``;if(typeof e==`function`){let t=e(`span[class=timestyle127702]`).text();l=n(t,`YYYY-MM-DD HH:mm`)}else{let e=r(t).find(`a[class=c269582_date]`).text();l=n(e,`YYYY-MM-DD`)}return{title:s,description:c,pubDate:a(l,8),link:o,author:`供稿单位：招生就业处`}});return l}));return o}const _={path:`/news/:type?`,categories:[`university`],example:`/hafu/news/ggtz`,parameters:{type:"分类，见下表（默认为 `ggtz`)"},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!0,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`河南财政金融学院`,maintainers:[],handler:v,description:`| 校内公告通知 | 教务处公告通知 | 招生就业处公告通知 |
| ------------ | -------------- | ------------------ |
| ggtz         | jwc            | zsjyc              |`};async function v(e){let t=e.req.param(`type`)??`ggtz`,{link:n,title:r,resultList:i}=await d(e,t);return{title:r,link:n,description:`河南财政金融学院 - 公告通知`,item:i}}export{_ as route};
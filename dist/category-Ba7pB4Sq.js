import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import{parseDate as n}from"./parse-date-DHsdom8D.js";import"./ofetch-DRl42yaJ.js";import{__dirname as r}from"./esm-shims-BDPl6Msv.js";import{got_default as i}from"./got-BaOFZRd4.js";import a from"node:path";const o=`https://vcb-s.com`,s=`${o}/wp-json/wp/v2/categories`,c=`${o}/wp-json/wp/v2/posts`,l={path:`/category/:cate`,categories:[`anime`],example:`/vcb-s/category/works`,parameters:{cate:`分类`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},radar:[{source:[`vcb-s.com/archives/category/:cate`]}],name:`分类文章`,maintainers:[`cxfksword`],handler:u,url:`vcb-s.com/`,description:`| 作品项目 | 科普系列 | 计划与日志 |
| -------- | -------- | ---------- |
| works    | kb       | planlog    |`};async function u(l){let u=l.req.param(`cate`),d=l.req.query(`limit`)??7,f=`${s}?slug=${u}`,p=await e.tryGet(f,async()=>{let e=await i.get(f);return typeof e.data==`string`&&(e.data=JSON.parse(e.body.trim())),e.data[0]}),m=`${c}?categories=${p.id}&page=1&per_page=${d}&_embed`,h=await i.get(m);typeof h.data==`string`&&(h.data=JSON.parse(h.body.trim()));let g=h.data,_=g.map(e=>{let i=t(a.join(r,`templates/post-a0d5f24f.art`),{post:e.content.rendered.replaceAll(/<pre class="js-medie-info-detail.*?>(.*?)<\/pre>/gs,`<pre><code>$1</code></pre>`).replaceAll(/<div.+?dw-box-download.+?>(.*?)<\/div>/gs,`<pre>$1</pre>`),medias:e._embedded[`wp:featuredmedia`]});return{title:e.title.rendered,link:e.link,description:i,pubDate:n(e.date_gmt),author:e._embedded.author[0].name}});return{title:`${p.name} | VCB-Studio`,link:`${o}/archives/category/${p.slug}`,item:_}}export{l as route};
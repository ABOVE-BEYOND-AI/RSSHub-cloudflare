import"./config-HRWLmo66.js";import"./logger-DHpG8Bim.js";import"./helpers-LVq640iW.js";import{cache_default as e}from"./cache-C3AIQtoX.js";import{art as t}from"./render-DE4LRFBD.js";import"./ofetch-DRl42yaJ.js";import{__dirname as n}from"./esm-shims-BDPl6Msv.js";import{got_default as r}from"./got-BaOFZRd4.js";import i from"node:path";import{load as a}from"cheerio";async function o(e){let t=`article.g-main-video-article`,n=await r(e),i=a(n.data),o=[],s=[],c=[],l=[],u=`https://oreno3d.com`+i(`header > figure.video-figure > a `).find(`img`).attr(`src`),d=i(`header > h1.video-h1 `).text();i(t).find(`section:nth-child(4) > a > div.video-center`).each(function(e){s[e]=i(this).text(),s[e].replace(` `,``),s[e].trim()}),i(t).find(`section:nth-child(5) > a > div.video-center`).each(function(e){c[e]=i(this).text(),c[e].replace(` `,``),c[e].trim()}),i(t).find(`section:nth-child(6) > a > div.video-center`).each(function(e){l[e]=i(this).text(),l[e].replace(` `,``),l[e].trim()}),i(t).find(`section:nth-child(7) > ul > li > a div.tag-text`).each(function(e){o[e]=i(this).text(),o[e].replace(` `,``),o[e].trim()});let f=i(t).find(`section blockquote.video-information-comment`).text(),p=i(`header > figure.video-figure > a`).attr(`href`);return{raw_pic_link:u,video_name:d,authors:s.join(` `),origins:c.join(` `),characters:l.join(` `),tags:o.join(` `),desc:f,iwara_link:p,oreno3d_link:e}}var s=o;const c={favorites:`高評価`,hot:`急上昇`,latest:`新着`,popularity:`人気`};function l(e,t,n){let r=``;if(t.req.param(`keyword`)){let i=t.req.param(`keyword`);r=`${e}/search?sort=${n}&keyword=${i}`}else if(t.req.param(`characterid`)){let i=t.req.param(`characterid`);r=`${e}/characters/${i}?sort=${n}`}else if(t.req.param(`authorid`)){let i=t.req.param(`authorid`);r=`${e}/authors/${i}?sort=${n}`}else if(t.req.param(`tagid`)){let i=t.req.param(`tagid`);r=`${e}/tags/${i}?sort=${n}`}else if(t.req.param(`originid`)){let i=t.req.param(`originid`);r=`${e}/origins/${i}?sort=${n}`}return r}const u={path:[`/authors/:authorid/:sort/:pagelimit?`,`/characters/:characterid/:sort/:pagelimit?`,`/origins/:originid/:sort/:pagelimit?`,`/search/:keyword/:sort/:pagelimit?`,`/tags/:tagid/:sort/:pagelimit?`],categories:[`anime`],example:`/oreno3d/authors/3189/latest/1`,parameters:{authorid:`Author id, can be found in URL`,sort:`Sort method, see the table above`,pagelimit:`The maximum number of pages to be crawled, the default is 1`},features:{requireConfig:!1,requirePuppeteer:!1,antiCrawler:!1,supportBT:!1,supportPodcast:!1,supportScihub:!1},name:`Author Search`,maintainers:[`xueli_sherryli`],handler:d,description:`| favorites | hot | latest | popularity |
| --------- | --- | ------ | ---------- |
| favorites | hot | latest | popularity |`};async function d(o){function u(e){let t=a(e.data),n=t(`div.g-main-list`).find(`h1.main-h`).text(),r=t(`a.box`);return{title:n,list:r}}async function d(r){let o=a(r.data),c=u(r).title,l=u(r).list,d=await Promise.all(l.toArray().map(async r=>{let a=o(r).attr(`href`),c=await s(a),l=c.raw_pic_link,u=c.video_name,d=c.authors,f=c.origins,p=c.characters,m=c.tags,h=c.desc,g=c.iwara_link,_=c.oreno3d_link,v=t(i.join(n,`templates/description-cefeafec.art`),{raw_pic_link:l,video_name:u,authors:d,origins:f,characters:p,tags:m,desc:h,iwara_link:g,oreno3d_link:_}),y=`${u} - ${d}`,b=await e.tryGet(_,()=>{let e={title:y,author:d,link:_,category:m.split(` `),description:v};return e});return b}));return{items:d,title:c}}let f=o.req.param(`sort`),p=o.req.param(`pagelimit`)??1,m=l(`https://oreno3d.com`,o,f),h=await r(m),g=a(h.data),_=`div.container > main > div.g-main-list > ul.pagination > li:last-child > a`;if(g(_)){let e=new URLSearchParams(g(_).attr(`href`)),t=e.get(`page`);Number.parseInt(p)>=Number.parseInt(t)&&(p=t)}else p=1;let v=[];v.push(h);let y=[];for(let e=1;e<p;e++)y.push(`${m}&page=${e+1}`);await Promise.all(y.map(async e=>{let t=await r(e);v.push(t)}));let b=[];await Promise.all(v.map(async e=>{let t=await d(e);b.push(t)}));let x=[];for(let e of b)x=[...x,...e.items];let S={title:b[0].title,item:x};return{title:`${S.title} - ${c[f]}(Page 1-${p})`,link:m,item:S.item}}export{u as route};